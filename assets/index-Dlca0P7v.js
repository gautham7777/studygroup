function s_(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function l_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bp={exports:{}},Ks={},Bp={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=Symbol.for("react.element"),a_=Symbol.for("react.portal"),u_=Symbol.for("react.fragment"),c_=Symbol.for("react.strict_mode"),d_=Symbol.for("react.profiler"),f_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),p_=Symbol.for("react.forward_ref"),m_=Symbol.for("react.suspense"),g_=Symbol.for("react.memo"),y_=Symbol.for("react.lazy"),wd=Symbol.iterator;function v_(t){return t===null||typeof t!="object"?null:(t=wd&&t[wd]||t["@@iterator"],typeof t=="function"?t:null)}var Hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gp=Object.assign,zp={};function Ui(t,e,n){this.props=t,this.context=e,this.refs=zp,this.updater=n||Hp}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wp(){}Wp.prototype=Ui.prototype;function Gu(t,e,n){this.props=t,this.context=e,this.refs=zp,this.updater=n||Hp}var zu=Gu.prototype=new Wp;zu.constructor=Gu;Gp(zu,Ui.prototype);zu.isPureReactComponent=!0;var xd=Array.isArray,$p=Object.prototype.hasOwnProperty,Wu={current:null},qp={key:!0,ref:!0,__self:!0,__source:!0};function Yp(t,e,n){var i,r={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)$p.call(e,i)&&!qp.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];r.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:to,type:t,key:o,ref:s,props:r,_owner:Wu.current}}function __(t,e){return{$$typeof:to,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $u(t){return typeof t=="object"&&t!==null&&t.$$typeof===to}function C_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Id=/\/+/g;function Al(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C_(""+t.key):e.toString(36)}function Bo(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case to:case a_:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+Al(s,0):i,xd(r)?(n="",t!=null&&(n=t.replace(Id,"$&/")+"/"),Bo(r,e,n,"",function(d){return d})):r!=null&&($u(r)&&(r=__(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(Id,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",xd(t))for(var l=0;l<t.length;l++){o=t[l];var u=i+Al(o,l);s+=Bo(o,e,n,u,r)}else if(u=v_(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=i+Al(o,l++),s+=Bo(o,e,n,u,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function yo(t,e,n){if(t==null)return t;var i=[],r=0;return Bo(t,i,"","",function(o){return e.call(n,o,r++)}),i}function E_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},Ho={transition:null},T_={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Ho,ReactCurrentOwner:Wu};function Kp(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:yo,forEach:function(t,e,n){yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yo(t,function(){e++}),e},toArray:function(t){return yo(t,function(e){return e})||[]},only:function(t){if(!$u(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Ui;H.Fragment=u_;H.Profiler=d_;H.PureComponent=Gu;H.StrictMode=c_;H.Suspense=m_;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T_;H.act=Kp;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Gp({},t.props),r=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Wu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)$p.call(e,u)&&!qp.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:to,type:t.type,key:r,ref:o,props:i,_owner:s}};H.createContext=function(t){return t={$$typeof:h_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f_,_context:t},t.Consumer=t};H.createElement=Yp;H.createFactory=function(t){var e=Yp.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:p_,render:t}};H.isValidElement=$u;H.lazy=function(t){return{$$typeof:y_,_payload:{_status:-1,_result:t},_init:E_}};H.memo=function(t,e){return{$$typeof:g_,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=Ho.transition;Ho.transition={};try{t()}finally{Ho.transition=e}};H.unstable_act=Kp;H.useCallback=function(t,e){return Me.current.useCallback(t,e)};H.useContext=function(t){return Me.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};H.useEffect=function(t,e){return Me.current.useEffect(t,e)};H.useId=function(){return Me.current.useId()};H.useImperativeHandle=function(t,e,n){return Me.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Me.current.useMemo(t,e)};H.useReducer=function(t,e,n){return Me.current.useReducer(t,e,n)};H.useRef=function(t){return Me.current.useRef(t)};H.useState=function(t){return Me.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return Me.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return Me.current.useTransition()};H.version="18.3.1";Bp.exports=H;var w=Bp.exports;const Jp=l_(w),S_=s_({__proto__:null,default:Jp},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_=w,x_=Symbol.for("react.element"),I_=Symbol.for("react.fragment"),N_=Object.prototype.hasOwnProperty,R_=w_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P_={key:!0,ref:!0,__self:!0,__source:!0};function Qp(t,e,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)N_.call(e,i)&&!P_.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:x_,type:t,key:o,ref:s,props:r,_owner:R_.current}}Ks.Fragment=I_;Ks.jsx=Qp;Ks.jsxs=Qp;bp.exports=Ks;var C=bp.exports,ma={},Xp={exports:{}},Ke={},Zp={exports:{}},jp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,U){var O=M.length;M.push(U);e:for(;0<O;){var le=O-1>>>1,pe=M[le];if(0<r(pe,U))M[le]=U,M[O]=pe,O=le;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var U=M[0],O=M.pop();if(O!==U){M[0]=O;e:for(var le=0,pe=M.length,mo=pe>>>1;le<mo;){var En=2*(le+1)-1,Pl=M[En],Tn=En+1,go=M[Tn];if(0>r(Pl,O))Tn<pe&&0>r(go,Pl)?(M[le]=go,M[Tn]=O,le=Tn):(M[le]=Pl,M[En]=O,le=En);else if(Tn<pe&&0>r(go,O))M[le]=go,M[Tn]=O,le=Tn;else break e}}return U}function r(M,U){var O=M.sortIndex-U.sortIndex;return O!==0?O:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],d=[],f=1,h=null,p=3,m=!1,y=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var U=n(d);U!==null;){if(U.callback===null)i(d);else if(U.startTime<=M)i(d),U.sortIndex=U.expirationTime,e(u,U);else break;U=n(d)}}function S(M){if(E=!1,_(M),!y)if(n(u)!==null)y=!0,Nl(I);else{var U=n(d);U!==null&&Rl(S,U.startTime-M)}}function I(M,U){y=!1,E&&(E=!1,v(A),A=-1),m=!0;var O=p;try{for(_(U),h=n(u);h!==null&&(!(h.expirationTime>U)||M&&!ue());){var le=h.callback;if(typeof le=="function"){h.callback=null,p=h.priorityLevel;var pe=le(h.expirationTime<=U);U=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===n(u)&&i(u),_(U)}else i(u);h=n(u)}if(h!==null)var mo=!0;else{var En=n(d);En!==null&&Rl(S,En.startTime-U),mo=!1}return mo}finally{h=null,p=O,m=!1}}var P=!1,x=null,A=-1,z=5,D=-1;function ue(){return!(t.unstable_now()-D<z)}function Vt(){if(x!==null){var M=t.unstable_now();D=M;var U=!0;try{U=x(!0,M)}finally{U?bt():(P=!1,x=null)}}else P=!1}var bt;if(typeof g=="function")bt=function(){g(Vt)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Yi=Qe.port2;Qe.port1.onmessage=Vt,bt=function(){Yi.postMessage(null)}}else bt=function(){T(Vt,0)};function Nl(M){x=M,P||(P=!0,bt())}function Rl(M,U){A=T(function(){M(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Nl(I))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var O=p;p=U;try{return M()}finally{p=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var O=p;p=M;try{return U()}finally{p=O}},t.unstable_scheduleCallback=function(M,U,O){var le=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?le+O:le):O=le,M){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=O+pe,M={id:f++,callback:U,priorityLevel:M,startTime:O,expirationTime:pe,sortIndex:-1},O>le?(M.sortIndex=O,e(d,M),n(u)===null&&M===n(d)&&(E?(v(A),A=-1):E=!0,Rl(S,O-le))):(M.sortIndex=pe,e(u,M),y||m||(y=!0,Nl(I))),M},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(M){var U=p;return function(){var O=p;p=U;try{return M.apply(this,arguments)}finally{p=O}}}})(jp);Zp.exports=jp;var A_=Zp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_=w,Ye=A_;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var em=new Set,Ir={};function Wn(t,e){Si(t,e),Si(t+"Capture",e)}function Si(t,e){for(Ir[t]=e,t=0;t<e.length;t++)em.add(e[t])}var Nt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ga=Object.prototype.hasOwnProperty,M_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nd={},Rd={};function D_(t){return ga.call(Rd,t)?!0:ga.call(Nd,t)?!1:M_.test(t)?Rd[t]=!0:(Nd[t]=!0,!1)}function L_(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F_(t,e,n,i){if(e===null||typeof e>"u"||L_(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,n,i,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var qu=/[\-:]([a-z])/g;function Yu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qu,Yu);Se[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qu,Yu);Se[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qu,Yu);Se[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ku(t,e,n,i){var r=Se.hasOwnProperty(e)?Se[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F_(e,n,r,i)&&(n=null),i||r===null?D_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Lt=k_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vo=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),Ju=Symbol.for("react.strict_mode"),ya=Symbol.for("react.profiler"),tm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),Qu=Symbol.for("react.forward_ref"),va=Symbol.for("react.suspense"),_a=Symbol.for("react.suspense_list"),Xu=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),im=Symbol.for("react.offscreen"),Pd=Symbol.iterator;function Ki(t){return t===null||typeof t!="object"?null:(t=Pd&&t[Pd]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,kl;function sr(t){if(kl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kl=e&&e[1]||""}return`
`+kl+t}var Ml=!1;function Dl(t,e){if(!t||Ml)return"";Ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,l=o.length-1;1<=s&&0<=l&&r[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(r[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||r[s]!==o[l]){var u=`
`+r[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{Ml=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sr(t):""}function U_(t){switch(t.tag){case 5:return sr(t.type);case 16:return sr("Lazy");case 13:return sr("Suspense");case 19:return sr("SuspenseList");case 0:case 2:case 15:return t=Dl(t.type,!1),t;case 11:return t=Dl(t.type.render,!1),t;case 1:return t=Dl(t.type,!0),t;default:return""}}function Ca(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Xn:return"Portal";case ya:return"Profiler";case Ju:return"StrictMode";case va:return"Suspense";case _a:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nm:return(t.displayName||"Context")+".Consumer";case tm:return(t._context.displayName||"Context")+".Provider";case Qu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xu:return e=t.displayName||null,e!==null?e:Ca(t.type)||"Memo";case Gt:e=t._payload,t=t._init;try{return Ca(t(e))}catch{}}return null}function O_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ca(e);case 8:return e===Ju?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function V_(t){var e=rm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _o(t){t._valueTracker||(t._valueTracker=V_(t))}function om(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=rm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ns(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ea(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ad(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=cn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sm(t,e){e=e.checked,e!=null&&Ku(t,"checked",e,!1)}function Ta(t,e){sm(t,e);var n=cn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sa(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sa(t,e.type,cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sa(t,e,n){(e!=="number"||ns(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lr=Array.isArray;function di(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+cn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Md(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(lr(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cn(n)}}function lm(t,e){var n=cn(e.value),i=cn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Dd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function am(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?am(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Co,um=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Co.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b_=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(t){b_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cr[e]=cr[t]})});function cm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cr.hasOwnProperty(t)&&cr[t]?(""+e).trim():e+"px"}function dm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=cm(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var B_=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(t,e){if(e){if(B_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Na(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ra=null;function Zu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pa=null,fi=null,hi=null;function Ld(t){if(t=ro(t)){if(typeof Pa!="function")throw Error(N(280));var e=t.stateNode;e&&(e=js(e),Pa(t.stateNode,t.type,e))}}function fm(t){fi?hi?hi.push(t):hi=[t]:fi=t}function hm(){if(fi){var t=fi,e=hi;if(hi=fi=null,Ld(t),e)for(t=0;t<e.length;t++)Ld(e[t])}}function pm(t,e){return t(e)}function mm(){}var Ll=!1;function gm(t,e,n){if(Ll)return t(e,n);Ll=!0;try{return pm(t,e,n)}finally{Ll=!1,(fi!==null||hi!==null)&&(mm(),hm())}}function Rr(t,e){var n=t.stateNode;if(n===null)return null;var i=js(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var Aa=!1;if(Nt)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){Aa=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{Aa=!1}function H_(t,e,n,i,r,o,s,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var dr=!1,is=null,rs=!1,ka=null,G_={onError:function(t){dr=!0,is=t}};function z_(t,e,n,i,r,o,s,l,u){dr=!1,is=null,H_.apply(G_,arguments)}function W_(t,e,n,i,r,o,s,l,u){if(z_.apply(this,arguments),dr){if(dr){var d=is;dr=!1,is=null}else throw Error(N(198));rs||(rs=!0,ka=d)}}function $n(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ym(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fd(t){if($n(t)!==t)throw Error(N(188))}function $_(t){var e=t.alternate;if(!e){if(e=$n(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Fd(r),t;if(o===i)return Fd(r),e;o=o.sibling}throw Error(N(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(N(189))}}if(n.alternate!==i)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function vm(t){return t=$_(t),t!==null?_m(t):null}function _m(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_m(t);if(e!==null)return e;t=t.sibling}return null}var Cm=Ye.unstable_scheduleCallback,Ud=Ye.unstable_cancelCallback,q_=Ye.unstable_shouldYield,Y_=Ye.unstable_requestPaint,ae=Ye.unstable_now,K_=Ye.unstable_getCurrentPriorityLevel,ju=Ye.unstable_ImmediatePriority,Em=Ye.unstable_UserBlockingPriority,os=Ye.unstable_NormalPriority,J_=Ye.unstable_LowPriority,Tm=Ye.unstable_IdlePriority,Js=null,yt=null;function Q_(t){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Js,t,void 0,(t.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:j_,X_=Math.log,Z_=Math.LN2;function j_(t){return t>>>=0,t===0?32:31-(X_(t)/Z_|0)|0}var Eo=64,To=4194304;function ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ss(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~r;l!==0?i=ar(l):(o&=s,o!==0&&(i=ar(o)))}else s=n&~r,s!==0?i=ar(s):o!==0&&(i=ar(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ct(e),r=1<<n,i|=t[n],e&=~r;return i}function eC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ct(o),l=1<<s,u=r[s];u===-1?(!(l&n)||l&i)&&(r[s]=eC(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Ma(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sm(){var t=Eo;return Eo<<=1,!(Eo&4194240)&&(Eo=64),t}function Fl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function no(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ct(e),t[e]=n}function nC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ct(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function ec(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ct(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var $=0;function wm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xm,tc,Im,Nm,Rm,Da=!1,So=[],Qt=null,Xt=null,Zt=null,Pr=new Map,Ar=new Map,$t=[],iC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Od(t,e){switch(t){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":Xt=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":Pr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(e.pointerId)}}function Qi(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ro(e),e!==null&&tc(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function rC(t,e,n,i,r){switch(e){case"focusin":return Qt=Qi(Qt,t,e,n,i,r),!0;case"dragenter":return Xt=Qi(Xt,t,e,n,i,r),!0;case"mouseover":return Zt=Qi(Zt,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Pr.set(o,Qi(Pr.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ar.set(o,Qi(Ar.get(o)||null,t,e,n,i,r)),!0}return!1}function Pm(t){var e=Rn(t.target);if(e!==null){var n=$n(e);if(n!==null){if(e=n.tag,e===13){if(e=ym(n),e!==null){t.blockedOn=e,Rm(t.priority,function(){Im(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Go(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=La(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ra=i,n.target.dispatchEvent(i),Ra=null}else return e=ro(n),e!==null&&tc(e),t.blockedOn=n,!1;e.shift()}return!0}function Vd(t,e,n){Go(t)&&n.delete(e)}function oC(){Da=!1,Qt!==null&&Go(Qt)&&(Qt=null),Xt!==null&&Go(Xt)&&(Xt=null),Zt!==null&&Go(Zt)&&(Zt=null),Pr.forEach(Vd),Ar.forEach(Vd)}function Xi(t,e){t.blockedOn===e&&(t.blockedOn=null,Da||(Da=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,oC)))}function kr(t){function e(r){return Xi(r,t)}if(0<So.length){Xi(So[0],t);for(var n=1;n<So.length;n++){var i=So[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Qt!==null&&Xi(Qt,t),Xt!==null&&Xi(Xt,t),Zt!==null&&Xi(Zt,t),Pr.forEach(e),Ar.forEach(e),n=0;n<$t.length;n++)i=$t[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<$t.length&&(n=$t[0],n.blockedOn===null);)Pm(n),n.blockedOn===null&&$t.shift()}var pi=Lt.ReactCurrentBatchConfig,ls=!0;function sC(t,e,n,i){var r=$,o=pi.transition;pi.transition=null;try{$=1,nc(t,e,n,i)}finally{$=r,pi.transition=o}}function lC(t,e,n,i){var r=$,o=pi.transition;pi.transition=null;try{$=4,nc(t,e,n,i)}finally{$=r,pi.transition=o}}function nc(t,e,n,i){if(ls){var r=La(t,e,n,i);if(r===null)$l(t,e,i,as,n),Od(t,i);else if(rC(r,t,e,n,i))i.stopPropagation();else if(Od(t,i),e&4&&-1<iC.indexOf(t)){for(;r!==null;){var o=ro(r);if(o!==null&&xm(o),o=La(t,e,n,i),o===null&&$l(t,e,i,as,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else $l(t,e,i,null,n)}}var as=null;function La(t,e,n,i){if(as=null,t=Zu(i),t=Rn(t),t!==null)if(e=$n(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ym(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return as=t,null}function Am(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K_()){case ju:return 1;case Em:return 4;case os:case J_:return 16;case Tm:return 536870912;default:return 16}default:return 16}}var Yt=null,ic=null,zo=null;function km(){if(zo)return zo;var t,e=ic,n=e.length,i,r="value"in Yt?Yt.value:Yt.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[o-i];i++);return zo=r.slice(t,1<i?1-i:void 0)}function Wo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wo(){return!0}function bd(){return!1}function Je(t){function e(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wo:bd,this.isPropagationStopped=bd,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wo)},persist:function(){},isPersistent:wo}),e}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=Je(Oi),io=re({},Oi,{view:0,detail:0}),aC=Je(io),Ul,Ol,Zi,Qs=re({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zi&&(Zi&&t.type==="mousemove"?(Ul=t.screenX-Zi.screenX,Ol=t.screenY-Zi.screenY):Ol=Ul=0,Zi=t),Ul)},movementY:function(t){return"movementY"in t?t.movementY:Ol}}),Bd=Je(Qs),uC=re({},Qs,{dataTransfer:0}),cC=Je(uC),dC=re({},io,{relatedTarget:0}),Vl=Je(dC),fC=re({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),hC=Je(fC),pC=re({},Oi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mC=Je(pC),gC=re({},Oi,{data:0}),Hd=Je(gC),yC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_C={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_C[t])?!!e[t]:!1}function oc(){return CC}var EC=re({},io,{key:function(t){if(t.key){var e=yC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(t){return t.type==="keypress"?Wo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TC=Je(EC),SC=re({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gd=Je(SC),wC=re({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),xC=Je(wC),IC=re({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),NC=Je(IC),RC=re({},Qs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PC=Je(RC),AC=[9,13,27,32],sc=Nt&&"CompositionEvent"in window,fr=null;Nt&&"documentMode"in document&&(fr=document.documentMode);var kC=Nt&&"TextEvent"in window&&!fr,Mm=Nt&&(!sc||fr&&8<fr&&11>=fr),zd=" ",Wd=!1;function Dm(t,e){switch(t){case"keyup":return AC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jn=!1;function MC(t,e){switch(t){case"compositionend":return Lm(e);case"keypress":return e.which!==32?null:(Wd=!0,zd);case"textInput":return t=e.data,t===zd&&Wd?null:t;default:return null}}function DC(t,e){if(jn)return t==="compositionend"||!sc&&Dm(t,e)?(t=km(),zo=ic=Yt=null,jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mm&&e.locale!=="ko"?null:e.data;default:return null}}var LC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LC[t.type]:e==="textarea"}function Fm(t,e,n,i){fm(i),e=us(e,"onChange"),0<e.length&&(n=new rc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var hr=null,Mr=null;function FC(t){qm(t,0)}function Xs(t){var e=ni(t);if(om(e))return t}function UC(t,e){if(t==="change")return e}var Um=!1;if(Nt){var bl;if(Nt){var Bl="oninput"in document;if(!Bl){var qd=document.createElement("div");qd.setAttribute("oninput","return;"),Bl=typeof qd.oninput=="function"}bl=Bl}else bl=!1;Um=bl&&(!document.documentMode||9<document.documentMode)}function Yd(){hr&&(hr.detachEvent("onpropertychange",Om),Mr=hr=null)}function Om(t){if(t.propertyName==="value"&&Xs(Mr)){var e=[];Fm(e,Mr,t,Zu(t)),gm(FC,e)}}function OC(t,e,n){t==="focusin"?(Yd(),hr=e,Mr=n,hr.attachEvent("onpropertychange",Om)):t==="focusout"&&Yd()}function VC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xs(Mr)}function bC(t,e){if(t==="click")return Xs(e)}function BC(t,e){if(t==="input"||t==="change")return Xs(e)}function HC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:HC;function Dr(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ga.call(e,r)||!ht(t[r],e[r]))return!1}return!0}function Kd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jd(t,e){var n=Kd(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kd(n)}}function Vm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bm(){for(var t=window,e=ns();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ns(t.document)}return e}function lc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GC(t){var e=bm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vm(n.ownerDocument.documentElement,n)){if(i!==null&&lc(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Jd(n,o);var s=Jd(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zC=Nt&&"documentMode"in document&&11>=document.documentMode,ei=null,Fa=null,pr=null,Ua=!1;function Qd(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ua||ei==null||ei!==ns(i)||(i=ei,"selectionStart"in i&&lc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pr&&Dr(pr,i)||(pr=i,i=us(Fa,"onSelect"),0<i.length&&(e=new rc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ei)))}function xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ti={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionend:xo("Transition","TransitionEnd")},Hl={},Bm={};Nt&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function Zs(t){if(Hl[t])return Hl[t];if(!ti[t])return t;var e=ti[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Bm)return Hl[t]=e[n];return t}var Hm=Zs("animationend"),Gm=Zs("animationiteration"),zm=Zs("animationstart"),Wm=Zs("transitionend"),$m=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(t,e){$m.set(t,e),Wn(e,[t])}for(var Gl=0;Gl<Xd.length;Gl++){var zl=Xd[Gl],WC=zl.toLowerCase(),$C=zl[0].toUpperCase()+zl.slice(1);pn(WC,"on"+$C)}pn(Hm,"onAnimationEnd");pn(Gm,"onAnimationIteration");pn(zm,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(Wm,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ur));function Zd(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,W_(i,e,void 0,t),t.currentTarget=null}function qm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==o&&r.isPropagationStopped())break e;Zd(r,l,d),o=u}else for(s=0;s<i.length;s++){if(l=i[s],u=l.instance,d=l.currentTarget,l=l.listener,u!==o&&r.isPropagationStopped())break e;Zd(r,l,d),o=u}}}if(rs)throw t=ka,rs=!1,ka=null,t}function Q(t,e){var n=e[Ha];n===void 0&&(n=e[Ha]=new Set);var i=t+"__bubble";n.has(i)||(Ym(e,t,2,!1),n.add(i))}function Wl(t,e,n){var i=0;e&&(i|=4),Ym(n,t,i,e)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Lr(t){if(!t[Io]){t[Io]=!0,em.forEach(function(n){n!=="selectionchange"&&(qC.has(n)||Wl(n,!1,t),Wl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Io]||(e[Io]=!0,Wl("selectionchange",!1,e))}}function Ym(t,e,n,i){switch(Am(e)){case 1:var r=sC;break;case 4:r=lC;break;default:r=nc}n=r.bind(null,e,n,t),r=void 0,!Aa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function $l(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;l!==null;){if(s=Rn(l),s===null)return;if(u=s.tag,u===5||u===6){i=o=s;continue e}l=l.parentNode}}i=i.return}gm(function(){var d=o,f=Zu(n),h=[];e:{var p=$m.get(t);if(p!==void 0){var m=rc,y=t;switch(t){case"keypress":if(Wo(n)===0)break e;case"keydown":case"keyup":m=TC;break;case"focusin":y="focus",m=Vl;break;case"focusout":y="blur",m=Vl;break;case"beforeblur":case"afterblur":m=Vl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=cC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=xC;break;case Hm:case Gm:case zm:m=hC;break;case Wm:m=NC;break;case"scroll":m=aC;break;case"wheel":m=PC;break;case"copy":case"cut":case"paste":m=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gd}var E=(e&4)!==0,T=!E&&t==="scroll",v=E?p!==null?p+"Capture":null:p;E=[];for(var g=d,_;g!==null;){_=g;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,v!==null&&(S=Rr(g,v),S!=null&&E.push(Fr(g,S,_)))),T)break;g=g.return}0<E.length&&(p=new m(p,y,null,n,f),h.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Ra&&(y=n.relatedTarget||n.fromElement)&&(Rn(y)||y[Rt]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=d,y=y?Rn(y):null,y!==null&&(T=$n(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=d),m!==y)){if(E=Bd,S="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(E=Gd,S="onPointerLeave",v="onPointerEnter",g="pointer"),T=m==null?p:ni(m),_=y==null?p:ni(y),p=new E(S,g+"leave",m,n,f),p.target=T,p.relatedTarget=_,S=null,Rn(f)===d&&(E=new E(v,g+"enter",y,n,f),E.target=_,E.relatedTarget=T,S=E),T=S,m&&y)t:{for(E=m,v=y,g=0,_=E;_;_=Kn(_))g++;for(_=0,S=v;S;S=Kn(S))_++;for(;0<g-_;)E=Kn(E),g--;for(;0<_-g;)v=Kn(v),_--;for(;g--;){if(E===v||v!==null&&E===v.alternate)break t;E=Kn(E),v=Kn(v)}E=null}else E=null;m!==null&&jd(h,p,m,E,!1),y!==null&&T!==null&&jd(h,T,y,E,!0)}}e:{if(p=d?ni(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var I=UC;else if($d(p))if(Um)I=BC;else{I=VC;var P=OC}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=bC);if(I&&(I=I(t,d))){Fm(h,I,n,f);break e}P&&P(t,p,d),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Sa(p,"number",p.value)}switch(P=d?ni(d):window,t){case"focusin":($d(P)||P.contentEditable==="true")&&(ei=P,Fa=d,pr=null);break;case"focusout":pr=Fa=ei=null;break;case"mousedown":Ua=!0;break;case"contextmenu":case"mouseup":case"dragend":Ua=!1,Qd(h,n,f);break;case"selectionchange":if(zC)break;case"keydown":case"keyup":Qd(h,n,f)}var x;if(sc)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else jn?Dm(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Mm&&n.locale!=="ko"&&(jn||A!=="onCompositionStart"?A==="onCompositionEnd"&&jn&&(x=km()):(Yt=f,ic="value"in Yt?Yt.value:Yt.textContent,jn=!0)),P=us(d,A),0<P.length&&(A=new Hd(A,t,null,n,f),h.push({event:A,listeners:P}),x?A.data=x:(x=Lm(n),x!==null&&(A.data=x)))),(x=kC?MC(t,n):DC(t,n))&&(d=us(d,"onBeforeInput"),0<d.length&&(f=new Hd("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=x))}qm(h,e)})}function Fr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function us(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Rr(t,n),o!=null&&i.unshift(Fr(t,o,r)),o=Rr(t,e),o!=null&&i.push(Fr(t,o,r))),t=t.return}return i}function Kn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jd(t,e,n,i,r){for(var o=e._reactName,s=[];n!==null&&n!==i;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&d!==null&&(l=d,r?(u=Rr(n,o),u!=null&&s.unshift(Fr(n,u,l))):r||(u=Rr(n,o),u!=null&&s.push(Fr(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var YC=/\r\n?/g,KC=/\u0000|\uFFFD/g;function ef(t){return(typeof t=="string"?t:""+t).replace(YC,`
`).replace(KC,"")}function No(t,e,n){if(e=ef(e),ef(t)!==e&&n)throw Error(N(425))}function cs(){}var Oa=null,Va=null;function ba(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ba=typeof setTimeout=="function"?setTimeout:void 0,JC=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,QC=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(t){return tf.resolve(null).then(t).catch(XC)}:Ba;function XC(t){setTimeout(function(){throw t})}function ql(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),kr(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);kr(e)}function jt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vi=Math.random().toString(36).slice(2),gt="__reactFiber$"+Vi,Ur="__reactProps$"+Vi,Rt="__reactContainer$"+Vi,Ha="__reactEvents$"+Vi,ZC="__reactListeners$"+Vi,jC="__reactHandles$"+Vi;function Rn(t){var e=t[gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rt]||n[gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nf(t);t!==null;){if(n=t[gt])return n;t=nf(t)}return e}t=n,n=t.parentNode}return null}function ro(t){return t=t[gt]||t[Rt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function js(t){return t[Ur]||null}var Ga=[],ii=-1;function mn(t){return{current:t}}function Z(t){0>ii||(t.current=Ga[ii],Ga[ii]=null,ii--)}function J(t,e){ii++,Ga[ii]=t.current,t.current=e}var dn={},Pe=mn(dn),be=mn(!1),Fn=dn;function wi(t,e){var n=t.type.contextTypes;if(!n)return dn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Be(t){return t=t.childContextTypes,t!=null}function ds(){Z(be),Z(Pe)}function rf(t,e,n){if(Pe.current!==dn)throw Error(N(168));J(Pe,e),J(be,n)}function Km(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(N(108,O_(t)||"Unknown",r));return re({},n,i)}function fs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,Fn=Pe.current,J(Pe,t),J(be,be.current),!0}function of(t,e,n){var i=t.stateNode;if(!i)throw Error(N(169));n?(t=Km(t,e,Fn),i.__reactInternalMemoizedMergedChildContext=t,Z(be),Z(Pe),J(Pe,t)):Z(be),J(be,n)}var Et=null,el=!1,Yl=!1;function Jm(t){Et===null?Et=[t]:Et.push(t)}function eE(t){el=!0,Jm(t)}function gn(){if(!Yl&&Et!==null){Yl=!0;var t=0,e=$;try{var n=Et;for($=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Et=null,el=!1}catch(r){throw Et!==null&&(Et=Et.slice(t+1)),Cm(ju,gn),r}finally{$=e,Yl=!1}}return null}var ri=[],oi=0,hs=null,ps=0,Xe=[],Ze=0,Un=null,Tt=1,St="";function Sn(t,e){ri[oi++]=ps,ri[oi++]=hs,hs=t,ps=e}function Qm(t,e,n){Xe[Ze++]=Tt,Xe[Ze++]=St,Xe[Ze++]=Un,Un=t;var i=Tt;t=St;var r=32-ct(i)-1;i&=~(1<<r),n+=1;var o=32-ct(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Tt=1<<32-ct(e)+r|n<<r|i,St=o+t}else Tt=1<<o|n<<r|i,St=t}function ac(t){t.return!==null&&(Sn(t,1),Qm(t,1,0))}function uc(t){for(;t===hs;)hs=ri[--oi],ri[oi]=null,ps=ri[--oi],ri[oi]=null;for(;t===Un;)Un=Xe[--Ze],Xe[Ze]=null,St=Xe[--Ze],Xe[Ze]=null,Tt=Xe[--Ze],Xe[Ze]=null}var qe=null,$e=null,j=!1,st=null;function Xm(t,e){var n=je(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qe=t,$e=jt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qe=t,$e=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Un!==null?{id:Tt,overflow:St}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=je(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qe=t,$e=null,!0):!1;default:return!1}}function za(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wa(t){if(j){var e=$e;if(e){var n=e;if(!sf(t,e)){if(za(t))throw Error(N(418));e=jt(n.nextSibling);var i=qe;e&&sf(t,e)?Xm(i,n):(t.flags=t.flags&-4097|2,j=!1,qe=t)}}else{if(za(t))throw Error(N(418));t.flags=t.flags&-4097|2,j=!1,qe=t}}}function lf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qe=t}function Ro(t){if(t!==qe)return!1;if(!j)return lf(t),j=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ba(t.type,t.memoizedProps)),e&&(e=$e)){if(za(t))throw Zm(),Error(N(418));for(;e;)Xm(t,e),e=jt(e.nextSibling)}if(lf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$e=jt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$e=null}}else $e=qe?jt(t.stateNode.nextSibling):null;return!0}function Zm(){for(var t=$e;t;)t=jt(t.nextSibling)}function xi(){$e=qe=null,j=!1}function cc(t){st===null?st=[t]:st.push(t)}var tE=Lt.ReactCurrentBatchConfig;function ji(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var i=n.stateNode}if(!i)throw Error(N(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=r.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function Po(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function af(t){var e=t._init;return e(t._payload)}function jm(t){function e(v,g){if(t){var _=v.deletions;_===null?(v.deletions=[g],v.flags|=16):_.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function i(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function r(v,g){return v=rn(v,g),v.index=0,v.sibling=null,v}function o(v,g,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<g?(v.flags|=2,g):_):(v.flags|=2,g)):(v.flags|=1048576,g)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,g,_,S){return g===null||g.tag!==6?(g=ea(_,v.mode,S),g.return=v,g):(g=r(g,_),g.return=v,g)}function u(v,g,_,S){var I=_.type;return I===Zn?f(v,g,_.props.children,S,_.key):g!==null&&(g.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Gt&&af(I)===g.type)?(S=r(g,_.props),S.ref=ji(v,g,_),S.return=v,S):(S=Xo(_.type,_.key,_.props,null,v.mode,S),S.ref=ji(v,g,_),S.return=v,S)}function d(v,g,_,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=ta(_,v.mode,S),g.return=v,g):(g=r(g,_.children||[]),g.return=v,g)}function f(v,g,_,S,I){return g===null||g.tag!==7?(g=Ln(_,v.mode,S,I),g.return=v,g):(g=r(g,_),g.return=v,g)}function h(v,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ea(""+g,v.mode,_),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case vo:return _=Xo(g.type,g.key,g.props,null,v.mode,_),_.ref=ji(v,null,g),_.return=v,_;case Xn:return g=ta(g,v.mode,_),g.return=v,g;case Gt:var S=g._init;return h(v,S(g._payload),_)}if(lr(g)||Ki(g))return g=Ln(g,v.mode,_,null),g.return=v,g;Po(v,g)}return null}function p(v,g,_,S){var I=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:l(v,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vo:return _.key===I?u(v,g,_,S):null;case Xn:return _.key===I?d(v,g,_,S):null;case Gt:return I=_._init,p(v,g,I(_._payload),S)}if(lr(_)||Ki(_))return I!==null?null:f(v,g,_,S,null);Po(v,_)}return null}function m(v,g,_,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(_)||null,l(g,v,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vo:return v=v.get(S.key===null?_:S.key)||null,u(g,v,S,I);case Xn:return v=v.get(S.key===null?_:S.key)||null,d(g,v,S,I);case Gt:var P=S._init;return m(v,g,_,P(S._payload),I)}if(lr(S)||Ki(S))return v=v.get(_)||null,f(g,v,S,I,null);Po(g,S)}return null}function y(v,g,_,S){for(var I=null,P=null,x=g,A=g=0,z=null;x!==null&&A<_.length;A++){x.index>A?(z=x,x=null):z=x.sibling;var D=p(v,x,_[A],S);if(D===null){x===null&&(x=z);break}t&&x&&D.alternate===null&&e(v,x),g=o(D,g,A),P===null?I=D:P.sibling=D,P=D,x=z}if(A===_.length)return n(v,x),j&&Sn(v,A),I;if(x===null){for(;A<_.length;A++)x=h(v,_[A],S),x!==null&&(g=o(x,g,A),P===null?I=x:P.sibling=x,P=x);return j&&Sn(v,A),I}for(x=i(v,x);A<_.length;A++)z=m(x,v,A,_[A],S),z!==null&&(t&&z.alternate!==null&&x.delete(z.key===null?A:z.key),g=o(z,g,A),P===null?I=z:P.sibling=z,P=z);return t&&x.forEach(function(ue){return e(v,ue)}),j&&Sn(v,A),I}function E(v,g,_,S){var I=Ki(_);if(typeof I!="function")throw Error(N(150));if(_=I.call(_),_==null)throw Error(N(151));for(var P=I=null,x=g,A=g=0,z=null,D=_.next();x!==null&&!D.done;A++,D=_.next()){x.index>A?(z=x,x=null):z=x.sibling;var ue=p(v,x,D.value,S);if(ue===null){x===null&&(x=z);break}t&&x&&ue.alternate===null&&e(v,x),g=o(ue,g,A),P===null?I=ue:P.sibling=ue,P=ue,x=z}if(D.done)return n(v,x),j&&Sn(v,A),I;if(x===null){for(;!D.done;A++,D=_.next())D=h(v,D.value,S),D!==null&&(g=o(D,g,A),P===null?I=D:P.sibling=D,P=D);return j&&Sn(v,A),I}for(x=i(v,x);!D.done;A++,D=_.next())D=m(x,v,A,D.value,S),D!==null&&(t&&D.alternate!==null&&x.delete(D.key===null?A:D.key),g=o(D,g,A),P===null?I=D:P.sibling=D,P=D);return t&&x.forEach(function(Vt){return e(v,Vt)}),j&&Sn(v,A),I}function T(v,g,_,S){if(typeof _=="object"&&_!==null&&_.type===Zn&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case vo:e:{for(var I=_.key,P=g;P!==null;){if(P.key===I){if(I=_.type,I===Zn){if(P.tag===7){n(v,P.sibling),g=r(P,_.props.children),g.return=v,v=g;break e}}else if(P.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Gt&&af(I)===P.type){n(v,P.sibling),g=r(P,_.props),g.ref=ji(v,P,_),g.return=v,v=g;break e}n(v,P);break}else e(v,P);P=P.sibling}_.type===Zn?(g=Ln(_.props.children,v.mode,S,_.key),g.return=v,v=g):(S=Xo(_.type,_.key,_.props,null,v.mode,S),S.ref=ji(v,g,_),S.return=v,v=S)}return s(v);case Xn:e:{for(P=_.key;g!==null;){if(g.key===P)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(v,g.sibling),g=r(g,_.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=ta(_,v.mode,S),g.return=v,v=g}return s(v);case Gt:return P=_._init,T(v,g,P(_._payload),S)}if(lr(_))return y(v,g,_,S);if(Ki(_))return E(v,g,_,S);Po(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(v,g.sibling),g=r(g,_),g.return=v,v=g):(n(v,g),g=ea(_,v.mode,S),g.return=v,v=g),s(v)):n(v,g)}return T}var Ii=jm(!0),eg=jm(!1),ms=mn(null),gs=null,si=null,dc=null;function fc(){dc=si=gs=null}function hc(t){var e=ms.current;Z(ms),t._currentValue=e}function $a(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function mi(t,e){gs=t,dc=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function tt(t){var e=t._currentValue;if(dc!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(gs===null)throw Error(N(308));si=t,gs.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var Pn=null;function pc(t){Pn===null?Pn=[t]:Pn.push(t)}function tg(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,pc(e)):(n.next=r.next,r.next=n),e.interleaved=n,Pt(t,i)}function Pt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zt=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ng(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function en(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,G&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Pt(t,n)}return r=i.interleaved,r===null?(e.next=e,pc(i)):(e.next=r.next,r.next=e),i.interleaved=e,Pt(t,n)}function $o(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ec(t,n)}}function uf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ys(t,e,n,i){var r=t.updateQueue;zt=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,d=u.next;u.next=null,s===null?o=d:s.next=d,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(o!==null){var h=r.baseState;s=0,f=d=u=null,l=o;do{var p=l.lane,m=l.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,E=l;switch(p=e,m=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){h=y.call(m,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,p=typeof y=="function"?y.call(m,h,p):y,p==null)break e;h=re({},h,p);break e;case 2:zt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,u=h):f=f.next=m,s|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(u=h),r.baseState=u,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Vn|=s,t.lanes=s,t.memoizedState=h}}function cf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(N(191,r));r.call(i)}}}var oo={},vt=mn(oo),Or=mn(oo),Vr=mn(oo);function An(t){if(t===oo)throw Error(N(174));return t}function gc(t,e){switch(J(Vr,e),J(Or,t),J(vt,oo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xa(e,t)}Z(vt),J(vt,e)}function Ni(){Z(vt),Z(Or),Z(Vr)}function ig(t){An(Vr.current);var e=An(vt.current),n=xa(e,t.type);e!==n&&(J(Or,t),J(vt,n))}function yc(t){Or.current===t&&(Z(vt),Z(Or))}var te=mn(0);function vs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kl=[];function vc(){for(var t=0;t<Kl.length;t++)Kl[t]._workInProgressVersionPrimary=null;Kl.length=0}var qo=Lt.ReactCurrentDispatcher,Jl=Lt.ReactCurrentBatchConfig,On=0,ne=null,de=null,ge=null,_s=!1,mr=!1,br=0,nE=0;function we(){throw Error(N(321))}function _c(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ht(t[n],e[n]))return!1;return!0}function Cc(t,e,n,i,r,o){if(On=o,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qo.current=t===null||t.memoizedState===null?sE:lE,t=n(i,r),mr){o=0;do{if(mr=!1,br=0,25<=o)throw Error(N(301));o+=1,ge=de=null,e.updateQueue=null,qo.current=aE,t=n(i,r)}while(mr)}if(qo.current=Cs,e=de!==null&&de.next!==null,On=0,ge=de=ne=null,_s=!1,e)throw Error(N(300));return t}function Ec(){var t=br!==0;return br=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?ne.memoizedState=ge=t:ge=ge.next=t,ge}function nt(){if(de===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=de.next;var e=ge===null?ne.memoizedState:ge.next;if(e!==null)ge=e,de=t;else{if(t===null)throw Error(N(310));de=t,t={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},ge===null?ne.memoizedState=ge=t:ge=ge.next=t}return ge}function Br(t,e){return typeof e=="function"?e(t):e}function Ql(t){var e=nt(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var i=de,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var l=s=null,u=null,d=o;do{var f=d.lane;if((On&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=h,s=i):u=u.next=h,ne.lanes|=f,Vn|=f}d=d.next}while(d!==null&&d!==o);u===null?s=i:u.next=l,ht(i,e.memoizedState)||(Fe=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,ne.lanes|=o,Vn|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xl(t){var e=nt(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);ht(o,e.memoizedState)||(Fe=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function rg(){}function og(t,e){var n=ne,i=nt(),r=e(),o=!ht(i.memoizedState,r);if(o&&(i.memoizedState=r,Fe=!0),i=i.queue,Tc(ag.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||ge!==null&&ge.memoizedState.tag&1){if(n.flags|=2048,Hr(9,lg.bind(null,n,i,r,e),void 0,null),_e===null)throw Error(N(349));On&30||sg(n,e,r)}return r}function sg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lg(t,e,n,i){e.value=n,e.getSnapshot=i,ug(e)&&cg(t)}function ag(t,e,n){return n(function(){ug(e)&&cg(t)})}function ug(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ht(t,n)}catch{return!0}}function cg(t){var e=Pt(t,1);e!==null&&dt(e,t,1,-1)}function df(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:t},e.queue=t,t=t.dispatch=oE.bind(null,ne,t),[e.memoizedState,t]}function Hr(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function dg(){return nt().memoizedState}function Yo(t,e,n,i){var r=mt();ne.flags|=t,r.memoizedState=Hr(1|e,n,void 0,i===void 0?null:i)}function tl(t,e,n,i){var r=nt();i=i===void 0?null:i;var o=void 0;if(de!==null){var s=de.memoizedState;if(o=s.destroy,i!==null&&_c(i,s.deps)){r.memoizedState=Hr(e,n,o,i);return}}ne.flags|=t,r.memoizedState=Hr(1|e,n,o,i)}function ff(t,e){return Yo(8390656,8,t,e)}function Tc(t,e){return tl(2048,8,t,e)}function fg(t,e){return tl(4,2,t,e)}function hg(t,e){return tl(4,4,t,e)}function pg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mg(t,e,n){return n=n!=null?n.concat([t]):null,tl(4,4,pg.bind(null,e,t),n)}function Sc(){}function gg(t,e){var n=nt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_c(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function yg(t,e){var n=nt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_c(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function vg(t,e,n){return On&21?(ht(n,e)||(n=Sm(),ne.lanes|=n,Vn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=n)}function iE(t,e){var n=$;$=n!==0&&4>n?n:4,t(!0);var i=Jl.transition;Jl.transition={};try{t(!1),e()}finally{$=n,Jl.transition=i}}function _g(){return nt().memoizedState}function rE(t,e,n){var i=nn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Cg(t))Eg(e,n);else if(n=tg(t,e,n,i),n!==null){var r=ke();dt(n,t,i,r),Tg(n,e,i)}}function oE(t,e,n){var i=nn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cg(t))Eg(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(r.hasEagerState=!0,r.eagerState=l,ht(l,s)){var u=e.interleaved;u===null?(r.next=r,pc(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=tg(t,e,r,i),n!==null&&(r=ke(),dt(n,t,i,r),Tg(n,e,i))}}function Cg(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function Eg(t,e){mr=_s=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tg(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ec(t,n)}}var Cs={readContext:tt,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useInsertionEffect:we,useLayoutEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useMutableSource:we,useSyncExternalStore:we,useId:we,unstable_isNewReconciler:!1},sE={readContext:tt,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:tt,useEffect:ff,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yo(4194308,4,pg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yo(4,2,t,e)},useMemo:function(t,e){var n=mt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=mt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=rE.bind(null,ne,t),[i.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:df,useDebugValue:Sc,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=df(!1),e=t[0];return t=iE.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ne,r=mt();if(j){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),_e===null)throw Error(N(349));On&30||sg(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,ff(ag.bind(null,i,o,t),[t]),i.flags|=2048,Hr(9,lg.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=mt(),e=_e.identifierPrefix;if(j){var n=St,i=Tt;n=(i&~(1<<32-ct(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=br++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lE={readContext:tt,useCallback:gg,useContext:tt,useEffect:Tc,useImperativeHandle:mg,useInsertionEffect:fg,useLayoutEffect:hg,useMemo:yg,useReducer:Ql,useRef:dg,useState:function(){return Ql(Br)},useDebugValue:Sc,useDeferredValue:function(t){var e=nt();return vg(e,de.memoizedState,t)},useTransition:function(){var t=Ql(Br)[0],e=nt().memoizedState;return[t,e]},useMutableSource:rg,useSyncExternalStore:og,useId:_g,unstable_isNewReconciler:!1},aE={readContext:tt,useCallback:gg,useContext:tt,useEffect:Tc,useImperativeHandle:mg,useInsertionEffect:fg,useLayoutEffect:hg,useMemo:yg,useReducer:Xl,useRef:dg,useState:function(){return Xl(Br)},useDebugValue:Sc,useDeferredValue:function(t){var e=nt();return de===null?e.memoizedState=t:vg(e,de.memoizedState,t)},useTransition:function(){var t=Xl(Br)[0],e=nt().memoizedState;return[t,e]},useMutableSource:rg,useSyncExternalStore:og,useId:_g,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qa(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nl={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ke(),r=nn(t),o=xt(i,r);o.payload=e,n!=null&&(o.callback=n),e=en(t,o,r),e!==null&&(dt(e,t,r,i),$o(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ke(),r=nn(t),o=xt(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=en(t,o,r),e!==null&&(dt(e,t,r,i),$o(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ke(),i=nn(t),r=xt(n,i);r.tag=2,e!=null&&(r.callback=e),e=en(t,r,i),e!==null&&(dt(e,t,i,n),$o(e,t,i))}};function hf(t,e,n,i,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!Dr(n,i)||!Dr(r,o):!0}function Sg(t,e,n){var i=!1,r=dn,o=e.contextType;return typeof o=="object"&&o!==null?o=tt(o):(r=Be(e)?Fn:Pe.current,i=e.contextTypes,o=(i=i!=null)?wi(t,r):dn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function pf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function Ya(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},mc(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=tt(o):(o=Be(e)?Fn:Pe.current,r.context=wi(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(qa(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&nl.enqueueReplaceState(r,r.state,null),ys(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ri(t,e){try{var n="",i=e;do n+=U_(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Zl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ka(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uE=typeof WeakMap=="function"?WeakMap:Map;function wg(t,e,n){n=xt(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ts||(Ts=!0,ru=i),Ka(t,e)},n}function xg(t,e,n){n=xt(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Ka(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ka(t,e),typeof i!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function mf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new uE;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=SE.bind(null,t,e,n),e.then(t,t))}function gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yf(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xt(-1,1),e.tag=2,en(n,e,1))),n.lanes|=1),t)}var cE=Lt.ReactCurrentOwner,Fe=!1;function Ae(t,e,n,i){e.child=t===null?eg(e,null,n,i):Ii(e,t.child,n,i)}function vf(t,e,n,i,r){n=n.render;var o=e.ref;return mi(e,r),i=Cc(t,e,n,i,o,r),n=Ec(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,At(t,e,r)):(j&&n&&ac(e),e.flags|=1,Ae(t,e,i,r),e.child)}function _f(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!kc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Ig(t,e,o,i,r)):(t=Xo(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Dr,n(s,i)&&t.ref===e.ref)return At(t,e,r)}return e.flags|=1,t=rn(o,i),t.ref=e.ref,t.return=e,e.child=t}function Ig(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Dr(o,i)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,At(t,e,r)}return Ja(t,e,n,i,r)}function Ng(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(ai,We),We|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(ai,We),We|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,J(ai,We),We|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,J(ai,We),We|=i;return Ae(t,e,r,n),e.child}function Rg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ja(t,e,n,i,r){var o=Be(n)?Fn:Pe.current;return o=wi(e,o),mi(e,r),n=Cc(t,e,n,i,o,r),i=Ec(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,At(t,e,r)):(j&&i&&ac(e),e.flags|=1,Ae(t,e,n,r),e.child)}function Cf(t,e,n,i,r){if(Be(n)){var o=!0;fs(e)}else o=!1;if(mi(e,r),e.stateNode===null)Ko(t,e),Sg(e,n,i),Ya(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=tt(d):(d=Be(n)?Fn:Pe.current,d=wi(e,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==i||u!==d)&&pf(e,s,i,d),zt=!1;var p=e.memoizedState;s.state=p,ys(e,i,s,r),u=e.memoizedState,l!==i||p!==u||be.current||zt?(typeof f=="function"&&(qa(e,n,f,i),u=e.memoizedState),(l=zt||hf(e,n,l,i,p,u,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),s.props=i,s.state=u,s.context=d,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,ng(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:rt(e.type,l),s.props=d,h=e.pendingProps,p=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=tt(u):(u=Be(n)?Fn:Pe.current,u=wi(e,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==h||p!==u)&&pf(e,s,i,u),zt=!1,p=e.memoizedState,s.state=p,ys(e,i,s,r);var y=e.memoizedState;l!==h||p!==y||be.current||zt?(typeof m=="function"&&(qa(e,n,m,i),y=e.memoizedState),(d=zt||hf(e,n,d,i,p,y,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),s.props=i,s.state=y,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Qa(t,e,n,i,o,r)}function Qa(t,e,n,i,r,o){Rg(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&of(e,n,!1),At(t,e,o);i=e.stateNode,cE.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=Ii(e,t.child,null,o),e.child=Ii(e,null,l,o)):Ae(t,e,l,o),e.memoizedState=i.state,r&&of(e,n,!0),e.child}function Pg(t){var e=t.stateNode;e.pendingContext?rf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rf(t,e.context,!1),gc(t,e.containerInfo)}function Ef(t,e,n,i,r){return xi(),cc(r),e.flags|=256,Ae(t,e,n,i),e.child}var Xa={dehydrated:null,treeContext:null,retryLane:0};function Za(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ag(t,e,n){var i=e.pendingProps,r=te.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),J(te,r&1),t===null)return Wa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,t=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ol(s,i,0,null),t=Ln(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Za(n),e.memoizedState=Xa,t):wc(e,s));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return dE(t,e,s,i,l,r,n);if(o){o=i.fallback,s=e.mode,r=t.child,l=r.sibling;var u={mode:"hidden",children:i.children};return!(s&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=rn(r,u),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=rn(l,o):(o=Ln(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=t.child.memoizedState,s=s===null?Za(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Xa,i}return o=t.child,t=o.sibling,i=rn(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function wc(t,e){return e=ol({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ao(t,e,n,i){return i!==null&&cc(i),Ii(e,t.child,null,n),t=wc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dE(t,e,n,i,r,o,s){if(n)return e.flags&256?(e.flags&=-257,i=Zl(Error(N(422))),Ao(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=ol({mode:"visible",children:i.children},r,0,null),o=Ln(o,r,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ii(e,t.child,null,s),e.child.memoizedState=Za(s),e.memoizedState=Xa,o);if(!(e.mode&1))return Ao(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(N(419)),i=Zl(o,i,void 0),Ao(t,e,s,i)}if(l=(s&t.childLanes)!==0,Fe||l){if(i=_e,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Pt(t,r),dt(i,t,r,-1))}return Ac(),i=Zl(Error(N(421))),Ao(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=wE.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,$e=jt(r.nextSibling),qe=e,j=!0,st=null,t!==null&&(Xe[Ze++]=Tt,Xe[Ze++]=St,Xe[Ze++]=Un,Tt=t.id,St=t.overflow,Un=e),e=wc(e,i.children),e.flags|=4096,e)}function Tf(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),$a(t.return,e,n)}function jl(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function kg(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ae(t,e,i.children,n),i=te.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tf(t,n,e);else if(t.tag===19)Tf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(J(te,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&vs(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),jl(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&vs(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}jl(e,!0,n,null,o);break;case"together":jl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ko(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function At(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=rn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fE(t,e,n){switch(e.tag){case 3:Pg(e),xi();break;case 5:ig(e);break;case 1:Be(e.type)&&fs(e);break;case 4:gc(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;J(ms,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(J(te,te.current&1),e.flags|=128,null):n&e.child.childLanes?Ag(t,e,n):(J(te,te.current&1),t=At(t,e,n),t!==null?t.sibling:null);J(te,te.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return kg(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),J(te,te.current),i)break;return null;case 22:case 23:return e.lanes=0,Ng(t,e,n)}return At(t,e,n)}var Mg,ja,Dg,Lg;Mg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ja=function(){};Dg=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,An(vt.current);var o=null;switch(n){case"input":r=Ea(t,r),i=Ea(t,i),o=[];break;case"select":r=re({},r,{value:void 0}),i=re({},i,{value:void 0}),o=[];break;case"textarea":r=wa(t,r),i=wa(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cs)}Ia(n,i);var s;n=null;for(d in r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ir.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in i){var u=i[d];if(l=r!=null?r[d]:void 0,i.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ir.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Q("scroll",t),o||l===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Lg=function(t,e,n,i){n!==i&&(e.flags|=4)};function er(t,e){if(!j)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function hE(t,e,n){var i=e.pendingProps;switch(uc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(e),null;case 1:return Be(e.type)&&ds(),xe(e),null;case 3:return i=e.stateNode,Ni(),Z(be),Z(Pe),vc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ro(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(lu(st),st=null))),ja(t,e),xe(e),null;case 5:yc(e);var r=An(Vr.current);if(n=e.type,t!==null&&e.stateNode!=null)Dg(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(N(166));return xe(e),null}if(t=An(vt.current),Ro(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[gt]=e,i[Ur]=o,t=(e.mode&1)!==0,n){case"dialog":Q("cancel",i),Q("close",i);break;case"iframe":case"object":case"embed":Q("load",i);break;case"video":case"audio":for(r=0;r<ur.length;r++)Q(ur[r],i);break;case"source":Q("error",i);break;case"img":case"image":case"link":Q("error",i),Q("load",i);break;case"details":Q("toggle",i);break;case"input":Ad(i,o),Q("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Q("invalid",i);break;case"textarea":Md(i,o),Q("invalid",i)}Ia(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&No(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&No(i.textContent,l,t),r=["children",""+l]):Ir.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Q("scroll",i)}switch(n){case"input":_o(i),kd(i,o,!0);break;case"textarea":_o(i),Dd(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=cs)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=am(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[gt]=e,t[Ur]=i,Mg(t,e,!1,!1),e.stateNode=t;e:{switch(s=Na(n,i),n){case"dialog":Q("cancel",t),Q("close",t),r=i;break;case"iframe":case"object":case"embed":Q("load",t),r=i;break;case"video":case"audio":for(r=0;r<ur.length;r++)Q(ur[r],t);r=i;break;case"source":Q("error",t),r=i;break;case"img":case"image":case"link":Q("error",t),Q("load",t),r=i;break;case"details":Q("toggle",t),r=i;break;case"input":Ad(t,i),r=Ea(t,i),Q("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=re({},i,{value:void 0}),Q("invalid",t);break;case"textarea":Md(t,i),r=wa(t,i),Q("invalid",t);break;default:r=i}Ia(n,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?dm(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&um(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Nr(t,u):typeof u=="number"&&Nr(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ir.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Q("scroll",t):u!=null&&Ku(t,o,u,s))}switch(n){case"input":_o(t),kd(t,i,!1);break;case"textarea":_o(t),Dd(t);break;case"option":i.value!=null&&t.setAttribute("value",""+cn(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?di(t,!!i.multiple,o,!1):i.defaultValue!=null&&di(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cs)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xe(e),null;case 6:if(t&&e.stateNode!=null)Lg(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(N(166));if(n=An(Vr.current),An(vt.current),Ro(e)){if(i=e.stateNode,n=e.memoizedProps,i[gt]=e,(o=i.nodeValue!==n)&&(t=qe,t!==null))switch(t.tag){case 3:No(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[gt]=e,e.stateNode=i}return xe(e),null;case 13:if(Z(te),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(j&&$e!==null&&e.mode&1&&!(e.flags&128))Zm(),xi(),e.flags|=98560,o=!1;else if(o=Ro(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(N(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(N(317));o[gt]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xe(e),o=!1}else st!==null&&(lu(st),st=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?he===0&&(he=3):Ac())),e.updateQueue!==null&&(e.flags|=4),xe(e),null);case 4:return Ni(),ja(t,e),t===null&&Lr(e.stateNode.containerInfo),xe(e),null;case 10:return hc(e.type._context),xe(e),null;case 17:return Be(e.type)&&ds(),xe(e),null;case 19:if(Z(te),o=e.memoizedState,o===null)return xe(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)er(o,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=vs(t),s!==null){for(e.flags|=128,er(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(te,te.current&1|2),e.child}t=t.sibling}o.tail!==null&&ae()>Pi&&(e.flags|=128,i=!0,er(o,!1),e.lanes=4194304)}else{if(!i)if(t=vs(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),er(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!j)return xe(e),null}else 2*ae()-o.renderingStartTime>Pi&&n!==1073741824&&(e.flags|=128,i=!0,er(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ae(),e.sibling=null,n=te.current,J(te,i?n&1|2:n&1),e):(xe(e),null);case 22:case 23:return Pc(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?We&1073741824&&(xe(e),e.subtreeFlags&6&&(e.flags|=8192)):xe(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function pE(t,e){switch(uc(e),e.tag){case 1:return Be(e.type)&&ds(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ni(),Z(be),Z(Pe),vc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yc(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return Ni(),null;case 10:return hc(e.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var ko=!1,Ne=!1,mE=typeof WeakSet=="function"?WeakSet:Set,k=null;function li(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){oe(t,e,i)}else n.current=null}function eu(t,e,n){try{n()}catch(i){oe(t,e,i)}}var Sf=!1;function gE(t,e){if(Oa=ls,t=bm(),lc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,d=0,f=0,h=t,p=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(l=s+r),h!==o||i!==0&&h.nodeType!==3||(u=s+i),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++d===r&&(l=s),p===o&&++f===i&&(u=s),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Va={focusedElem:t,selectionRange:n},ls=!1,k=e;k!==null;)if(e=k,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,k=t;else for(;k!==null;){e=k;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,T=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:rt(e.type,E),T);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(S){oe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,k=t;break}k=e.return}return y=Sf,Sf=!1,y}function gr(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&eu(e,n,o)}r=r.next}while(r!==i)}}function il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function tu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fg(t){var e=t.alternate;e!==null&&(t.alternate=null,Fg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gt],delete e[Ur],delete e[Ha],delete e[ZC],delete e[jC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ug(t){return t.tag===5||t.tag===3||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ug(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cs));else if(i!==4&&(t=t.child,t!==null))for(nu(t,e,n),t=t.sibling;t!==null;)nu(t,e,n),t=t.sibling}function iu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(iu(t,e,n),t=t.sibling;t!==null;)iu(t,e,n),t=t.sibling}var Ce=null,ot=!1;function Bt(t,e,n){for(n=n.child;n!==null;)Og(t,e,n),n=n.sibling}function Og(t,e,n){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Js,n)}catch{}switch(n.tag){case 5:Ne||li(n,e);case 6:var i=Ce,r=ot;Ce=null,Bt(t,e,n),Ce=i,ot=r,Ce!==null&&(ot?(t=Ce,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(ot?(t=Ce,n=n.stateNode,t.nodeType===8?ql(t.parentNode,n):t.nodeType===1&&ql(t,n),kr(t)):ql(Ce,n.stateNode));break;case 4:i=Ce,r=ot,Ce=n.stateNode.containerInfo,ot=!0,Bt(t,e,n),Ce=i,ot=r;break;case 0:case 11:case 14:case 15:if(!Ne&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&eu(n,e,s),r=r.next}while(r!==i)}Bt(t,e,n);break;case 1:if(!Ne&&(li(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){oe(n,e,l)}Bt(t,e,n);break;case 21:Bt(t,e,n);break;case 22:n.mode&1?(Ne=(i=Ne)||n.memoizedState!==null,Bt(t,e,n),Ne=i):Bt(t,e,n);break;default:Bt(t,e,n)}}function xf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mE),e.forEach(function(i){var r=xE.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function it(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Ce=l.stateNode,ot=!1;break e;case 3:Ce=l.stateNode.containerInfo,ot=!0;break e;case 4:Ce=l.stateNode.containerInfo,ot=!0;break e}l=l.return}if(Ce===null)throw Error(N(160));Og(o,s,r),Ce=null,ot=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(d){oe(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vg(e,t),e=e.sibling}function Vg(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(it(e,t),pt(t),i&4){try{gr(3,t,t.return),il(3,t)}catch(E){oe(t,t.return,E)}try{gr(5,t,t.return)}catch(E){oe(t,t.return,E)}}break;case 1:it(e,t),pt(t),i&512&&n!==null&&li(n,n.return);break;case 5:if(it(e,t),pt(t),i&512&&n!==null&&li(n,n.return),t.flags&32){var r=t.stateNode;try{Nr(r,"")}catch(E){oe(t,t.return,E)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&sm(r,o),Na(l,s);var d=Na(l,o);for(s=0;s<u.length;s+=2){var f=u[s],h=u[s+1];f==="style"?dm(r,h):f==="dangerouslySetInnerHTML"?um(r,h):f==="children"?Nr(r,h):Ku(r,f,h,d)}switch(l){case"input":Ta(r,o);break;case"textarea":lm(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?di(r,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?di(r,!!o.multiple,o.defaultValue,!0):di(r,!!o.multiple,o.multiple?[]:"",!1))}r[Ur]=o}catch(E){oe(t,t.return,E)}}break;case 6:if(it(e,t),pt(t),i&4){if(t.stateNode===null)throw Error(N(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(E){oe(t,t.return,E)}}break;case 3:if(it(e,t),pt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{kr(e.containerInfo)}catch(E){oe(t,t.return,E)}break;case 4:it(e,t),pt(t);break;case 13:it(e,t),pt(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Nc=ae())),i&4&&xf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ne=(d=Ne)||f,it(e,t),Ne=d):it(e,t),pt(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(k=t,f=t.child;f!==null;){for(h=k=f;k!==null;){switch(p=k,m=p.child,p.tag){case 0:case 11:case 14:case 15:gr(4,p,p.return);break;case 1:li(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){oe(i,n,E)}}break;case 5:li(p,p.return);break;case 22:if(p.memoizedState!==null){Nf(h);continue}}m!==null?(m.return=p,k=m):Nf(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{r=h.stateNode,d?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=cm("display",s))}catch(E){oe(t,t.return,E)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(E){oe(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:it(e,t),pt(t),i&4&&xf(t);break;case 21:break;default:it(e,t),pt(t)}}function pt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ug(n)){var i=n;break e}n=n.return}throw Error(N(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Nr(r,""),i.flags&=-33);var o=wf(t);iu(t,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,l=wf(t);nu(t,l,s);break;default:throw Error(N(161))}}catch(u){oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yE(t,e,n){k=t,bg(t)}function bg(t,e,n){for(var i=(t.mode&1)!==0;k!==null;){var r=k,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||ko;if(!s){var l=r.alternate,u=l!==null&&l.memoizedState!==null||Ne;l=ko;var d=Ne;if(ko=s,(Ne=u)&&!d)for(k=r;k!==null;)s=k,u=s.child,s.tag===22&&s.memoizedState!==null?Rf(r):u!==null?(u.return=s,k=u):Rf(r);for(;o!==null;)k=o,bg(o),o=o.sibling;k=r,ko=l,Ne=d}If(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,k=o):If(t)}}function If(t){for(;k!==null;){var e=k;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ne||il(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ne)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&cf(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cf(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&kr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Ne||e.flags&512&&tu(e)}catch(p){oe(e,e.return,p)}}if(e===t){k=null;break}if(n=e.sibling,n!==null){n.return=e.return,k=n;break}k=e.return}}function Nf(t){for(;k!==null;){var e=k;if(e===t){k=null;break}var n=e.sibling;if(n!==null){n.return=e.return,k=n;break}k=e.return}}function Rf(t){for(;k!==null;){var e=k;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(u){oe(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){oe(e,r,u)}}var o=e.return;try{tu(e)}catch(u){oe(e,o,u)}break;case 5:var s=e.return;try{tu(e)}catch(u){oe(e,s,u)}}}catch(u){oe(e,e.return,u)}if(e===t){k=null;break}var l=e.sibling;if(l!==null){l.return=e.return,k=l;break}k=e.return}}var vE=Math.ceil,Es=Lt.ReactCurrentDispatcher,xc=Lt.ReactCurrentOwner,et=Lt.ReactCurrentBatchConfig,G=0,_e=null,ce=null,Te=0,We=0,ai=mn(0),he=0,Gr=null,Vn=0,rl=0,Ic=0,yr=null,Le=null,Nc=0,Pi=1/0,Ct=null,Ts=!1,ru=null,tn=null,Mo=!1,Kt=null,Ss=0,vr=0,ou=null,Jo=-1,Qo=0;function ke(){return G&6?ae():Jo!==-1?Jo:Jo=ae()}function nn(t){return t.mode&1?G&2&&Te!==0?Te&-Te:tE.transition!==null?(Qo===0&&(Qo=Sm()),Qo):(t=$,t!==0||(t=window.event,t=t===void 0?16:Am(t.type)),t):1}function dt(t,e,n,i){if(50<vr)throw vr=0,ou=null,Error(N(185));no(t,n,i),(!(G&2)||t!==_e)&&(t===_e&&(!(G&2)&&(rl|=n),he===4&&qt(t,Te)),He(t,i),n===1&&G===0&&!(e.mode&1)&&(Pi=ae()+500,el&&gn()))}function He(t,e){var n=t.callbackNode;tC(t,e);var i=ss(t,t===_e?Te:0);if(i===0)n!==null&&Ud(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Ud(n),e===1)t.tag===0?eE(Pf.bind(null,t)):Jm(Pf.bind(null,t)),QC(function(){!(G&6)&&gn()}),n=null;else{switch(wm(i)){case 1:n=ju;break;case 4:n=Em;break;case 16:n=os;break;case 536870912:n=Tm;break;default:n=os}n=Yg(n,Bg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bg(t,e){if(Jo=-1,Qo=0,G&6)throw Error(N(327));var n=t.callbackNode;if(gi()&&t.callbackNode!==n)return null;var i=ss(t,t===_e?Te:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ws(t,i);else{e=i;var r=G;G|=2;var o=Gg();(_e!==t||Te!==e)&&(Ct=null,Pi=ae()+500,Dn(t,e));do try{EE();break}catch(l){Hg(t,l)}while(!0);fc(),Es.current=o,G=r,ce!==null?e=0:(_e=null,Te=0,e=he)}if(e!==0){if(e===2&&(r=Ma(t),r!==0&&(i=r,e=su(t,r))),e===1)throw n=Gr,Dn(t,0),qt(t,i),He(t,ae()),n;if(e===6)qt(t,i);else{if(r=t.current.alternate,!(i&30)&&!_E(r)&&(e=ws(t,i),e===2&&(o=Ma(t),o!==0&&(i=o,e=su(t,o))),e===1))throw n=Gr,Dn(t,0),qt(t,i),He(t,ae()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(N(345));case 2:wn(t,Le,Ct);break;case 3:if(qt(t,i),(i&130023424)===i&&(e=Nc+500-ae(),10<e)){if(ss(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ke(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Ba(wn.bind(null,t,Le,Ct),e);break}wn(t,Le,Ct);break;case 4:if(qt(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-ct(i);o=1<<s,s=e[s],s>r&&(r=s),i&=~o}if(i=r,i=ae()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*vE(i/1960))-i,10<i){t.timeoutHandle=Ba(wn.bind(null,t,Le,Ct),i);break}wn(t,Le,Ct);break;case 5:wn(t,Le,Ct);break;default:throw Error(N(329))}}}return He(t,ae()),t.callbackNode===n?Bg.bind(null,t):null}function su(t,e){var n=yr;return t.current.memoizedState.isDehydrated&&(Dn(t,e).flags|=256),t=ws(t,e),t!==2&&(e=Le,Le=n,e!==null&&lu(e)),t}function lu(t){Le===null?Le=t:Le.push.apply(Le,t)}function _E(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ht(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qt(t,e){for(e&=~Ic,e&=~rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ct(e),i=1<<n;t[n]=-1,e&=~i}}function Pf(t){if(G&6)throw Error(N(327));gi();var e=ss(t,0);if(!(e&1))return He(t,ae()),null;var n=ws(t,e);if(t.tag!==0&&n===2){var i=Ma(t);i!==0&&(e=i,n=su(t,i))}if(n===1)throw n=Gr,Dn(t,0),qt(t,e),He(t,ae()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wn(t,Le,Ct),He(t,ae()),null}function Rc(t,e){var n=G;G|=1;try{return t(e)}finally{G=n,G===0&&(Pi=ae()+500,el&&gn())}}function bn(t){Kt!==null&&Kt.tag===0&&!(G&6)&&gi();var e=G;G|=1;var n=et.transition,i=$;try{if(et.transition=null,$=1,t)return t()}finally{$=i,et.transition=n,G=e,!(G&6)&&gn()}}function Pc(){We=ai.current,Z(ai)}function Dn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JC(n)),ce!==null)for(n=ce.return;n!==null;){var i=n;switch(uc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ds();break;case 3:Ni(),Z(be),Z(Pe),vc();break;case 5:yc(i);break;case 4:Ni();break;case 13:Z(te);break;case 19:Z(te);break;case 10:hc(i.type._context);break;case 22:case 23:Pc()}n=n.return}if(_e=t,ce=t=rn(t.current,null),Te=We=e,he=0,Gr=null,Ic=rl=Vn=0,Le=yr=null,Pn!==null){for(e=0;e<Pn.length;e++)if(n=Pn[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}Pn=null}return t}function Hg(t,e){do{var n=ce;try{if(fc(),qo.current=Cs,_s){for(var i=ne.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_s=!1}if(On=0,ge=de=ne=null,mr=!1,br=0,xc.current=null,n===null||n.return===null){he=1,Gr=e,ce=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Te,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=gf(s);if(m!==null){m.flags&=-257,yf(m,s,l,o,e),m.mode&1&&mf(o,d,e),e=m,u=d;var y=e.updateQueue;if(y===null){var E=new Set;E.add(u),e.updateQueue=E}else y.add(u);break e}else{if(!(e&1)){mf(o,d,e),Ac();break e}u=Error(N(426))}}else if(j&&l.mode&1){var T=gf(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),yf(T,s,l,o,e),cc(Ri(u,l));break e}}o=u=Ri(u,l),he!==4&&(he=2),yr===null?yr=[o]:yr.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=wg(o,u,e);uf(o,v);break e;case 1:l=u;var g=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(tn===null||!tn.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=xg(o,l,e);uf(o,S);break e}}o=o.return}while(o!==null)}Wg(n)}catch(I){e=I,ce===n&&n!==null&&(ce=n=n.return);continue}break}while(!0)}function Gg(){var t=Es.current;return Es.current=Cs,t===null?Cs:t}function Ac(){(he===0||he===3||he===2)&&(he=4),_e===null||!(Vn&268435455)&&!(rl&268435455)||qt(_e,Te)}function ws(t,e){var n=G;G|=2;var i=Gg();(_e!==t||Te!==e)&&(Ct=null,Dn(t,e));do try{CE();break}catch(r){Hg(t,r)}while(!0);if(fc(),G=n,Es.current=i,ce!==null)throw Error(N(261));return _e=null,Te=0,he}function CE(){for(;ce!==null;)zg(ce)}function EE(){for(;ce!==null&&!q_();)zg(ce)}function zg(t){var e=qg(t.alternate,t,We);t.memoizedProps=t.pendingProps,e===null?Wg(t):ce=e,xc.current=null}function Wg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pE(n,e),n!==null){n.flags&=32767,ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,ce=null;return}}else if(n=hE(n,e,We),n!==null){ce=n;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);he===0&&(he=5)}function wn(t,e,n){var i=$,r=et.transition;try{et.transition=null,$=1,TE(t,e,n,i)}finally{et.transition=r,$=i}return null}function TE(t,e,n,i){do gi();while(Kt!==null);if(G&6)throw Error(N(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(nC(t,o),t===_e&&(ce=_e=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mo||(Mo=!0,Yg(os,function(){return gi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=et.transition,et.transition=null;var s=$;$=1;var l=G;G|=4,xc.current=null,gE(t,n),Vg(n,t),GC(Va),ls=!!Oa,Va=Oa=null,t.current=n,yE(n),Y_(),G=l,$=s,et.transition=o}else t.current=n;if(Mo&&(Mo=!1,Kt=t,Ss=r),o=t.pendingLanes,o===0&&(tn=null),Q_(n.stateNode),He(t,ae()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Ts)throw Ts=!1,t=ru,ru=null,t;return Ss&1&&t.tag!==0&&gi(),o=t.pendingLanes,o&1?t===ou?vr++:(vr=0,ou=t):vr=0,gn(),null}function gi(){if(Kt!==null){var t=wm(Ss),e=et.transition,n=$;try{if(et.transition=null,$=16>t?16:t,Kt===null)var i=!1;else{if(t=Kt,Kt=null,Ss=0,G&6)throw Error(N(331));var r=G;for(G|=4,k=t.current;k!==null;){var o=k,s=o.child;if(k.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(k=d;k!==null;){var f=k;switch(f.tag){case 0:case 11:case 15:gr(8,f,o)}var h=f.child;if(h!==null)h.return=f,k=h;else for(;k!==null;){f=k;var p=f.sibling,m=f.return;if(Fg(f),f===d){k=null;break}if(p!==null){p.return=m,k=p;break}k=m}}}var y=o.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}k=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,k=s;else e:for(;k!==null;){if(o=k,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gr(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,k=v;break e}k=o.return}}var g=t.current;for(k=g;k!==null;){s=k;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,k=_;else e:for(s=g;k!==null;){if(l=k,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(I){oe(l,l.return,I)}if(l===s){k=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,k=S;break e}k=l.return}}if(G=r,gn(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Js,t)}catch{}i=!0}return i}finally{$=n,et.transition=e}}return!1}function Af(t,e,n){e=Ri(n,e),e=wg(t,e,1),t=en(t,e,1),e=ke(),t!==null&&(no(t,1,e),He(t,e))}function oe(t,e,n){if(t.tag===3)Af(t,t,n);else for(;e!==null;){if(e.tag===3){Af(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(tn===null||!tn.has(i))){t=Ri(n,t),t=xg(e,t,1),e=en(e,t,1),t=ke(),e!==null&&(no(e,1,t),He(e,t));break}}e=e.return}}function SE(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ke(),t.pingedLanes|=t.suspendedLanes&n,_e===t&&(Te&n)===n&&(he===4||he===3&&(Te&130023424)===Te&&500>ae()-Nc?Dn(t,0):Ic|=n),He(t,e)}function $g(t,e){e===0&&(t.mode&1?(e=To,To<<=1,!(To&130023424)&&(To=4194304)):e=1);var n=ke();t=Pt(t,e),t!==null&&(no(t,e,n),He(t,n))}function wE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$g(t,n)}function xE(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(N(314))}i!==null&&i.delete(e),$g(t,n)}var qg;qg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||be.current)Fe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fe=!1,fE(t,e,n);Fe=!!(t.flags&131072)}else Fe=!1,j&&e.flags&1048576&&Qm(e,ps,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ko(t,e),t=e.pendingProps;var r=wi(e,Pe.current);mi(e,n),r=Cc(null,e,i,t,r,n);var o=Ec();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Be(i)?(o=!0,fs(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,mc(e),r.updater=nl,e.stateNode=r,r._reactInternals=e,Ya(e,i,t,n),e=Qa(null,e,i,!0,o,n)):(e.tag=0,j&&o&&ac(e),Ae(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ko(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=NE(i),t=rt(i,t),r){case 0:e=Ja(null,e,i,t,n);break e;case 1:e=Cf(null,e,i,t,n);break e;case 11:e=vf(null,e,i,t,n);break e;case 14:e=_f(null,e,i,rt(i.type,t),n);break e}throw Error(N(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rt(i,r),Ja(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rt(i,r),Cf(t,e,i,r,n);case 3:e:{if(Pg(e),t===null)throw Error(N(387));i=e.pendingProps,o=e.memoizedState,r=o.element,ng(t,e),ys(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Ri(Error(N(423)),e),e=Ef(t,e,i,n,r);break e}else if(i!==r){r=Ri(Error(N(424)),e),e=Ef(t,e,i,n,r);break e}else for($e=jt(e.stateNode.containerInfo.firstChild),qe=e,j=!0,st=null,n=eg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),i===r){e=At(t,e,n);break e}Ae(t,e,i,n)}e=e.child}return e;case 5:return ig(e),t===null&&Wa(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,ba(i,r)?s=null:o!==null&&ba(i,o)&&(e.flags|=32),Rg(t,e),Ae(t,e,s,n),e.child;case 6:return t===null&&Wa(e),null;case 13:return Ag(t,e,n);case 4:return gc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ii(e,null,i,n):Ae(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rt(i,r),vf(t,e,i,r,n);case 7:return Ae(t,e,e.pendingProps,n),e.child;case 8:return Ae(t,e,e.pendingProps.children,n),e.child;case 12:return Ae(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,J(ms,i._currentValue),i._currentValue=s,o!==null)if(ht(o.value,s)){if(o.children===r.children&&!be.current){e=At(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=xt(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),$a(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(N(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$a(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ae(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,mi(e,n),r=tt(r),i=i(r),e.flags|=1,Ae(t,e,i,n),e.child;case 14:return i=e.type,r=rt(i,e.pendingProps),r=rt(i.type,r),_f(t,e,i,r,n);case 15:return Ig(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rt(i,r),Ko(t,e),e.tag=1,Be(i)?(t=!0,fs(e)):t=!1,mi(e,n),Sg(e,i,r),Ya(e,i,r,n),Qa(null,e,i,!0,t,n);case 19:return kg(t,e,n);case 22:return Ng(t,e,n)}throw Error(N(156,e.tag))};function Yg(t,e){return Cm(t,e)}function IE(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function je(t,e,n,i){return new IE(t,e,n,i)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NE(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qu)return 11;if(t===Xu)return 14}return 2}function rn(t,e){var n=t.alternate;return n===null?(n=je(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xo(t,e,n,i,r,o){var s=2;if(i=t,typeof t=="function")kc(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Zn:return Ln(n.children,r,o,e);case Ju:s=8,r|=8;break;case ya:return t=je(12,n,e,r|2),t.elementType=ya,t.lanes=o,t;case va:return t=je(13,n,e,r),t.elementType=va,t.lanes=o,t;case _a:return t=je(19,n,e,r),t.elementType=_a,t.lanes=o,t;case im:return ol(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tm:s=10;break e;case nm:s=9;break e;case Qu:s=11;break e;case Xu:s=14;break e;case Gt:s=16,i=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=je(s,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Ln(t,e,n,i){return t=je(7,t,i,e),t.lanes=n,t}function ol(t,e,n,i){return t=je(22,t,i,e),t.elementType=im,t.lanes=n,t.stateNode={isHidden:!1},t}function ea(t,e,n){return t=je(6,t,null,e),t.lanes=n,t}function ta(t,e,n){return e=je(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RE(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fl(0),this.expirationTimes=Fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Mc(t,e,n,i,r,o,s,l,u){return t=new RE(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=je(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(o),t}function PE(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Kg(t){if(!t)return dn;t=t._reactInternals;e:{if($n(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Be(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(Be(n))return Km(t,n,e)}return e}function Jg(t,e,n,i,r,o,s,l,u){return t=Mc(n,i,!0,t,r,o,s,l,u),t.context=Kg(null),n=t.current,i=ke(),r=nn(n),o=xt(i,r),o.callback=e??null,en(n,o,r),t.current.lanes=r,no(t,r,i),He(t,i),t}function sl(t,e,n,i){var r=e.current,o=ke(),s=nn(r);return n=Kg(n),e.context===null?e.context=n:e.pendingContext=n,e=xt(o,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=en(r,e,s),t!==null&&(dt(t,r,s,o),$o(t,r,s)),s}function xs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dc(t,e){kf(t,e),(t=t.alternate)&&kf(t,e)}function AE(){return null}var Qg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lc(t){this._internalRoot=t}ll.prototype.render=Lc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));sl(t,e,null,null)};ll.prototype.unmount=Lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bn(function(){sl(null,t,null,null)}),e[Rt]=null}};function ll(t){this._internalRoot=t}ll.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$t.length&&e!==0&&e<$t[n].priority;n++);$t.splice(n,0,t),n===0&&Pm(t)}};function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mf(){}function kE(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var d=xs(s);o.call(d)}}var s=Jg(e,i,t,0,null,!1,!1,"",Mf);return t._reactRootContainer=s,t[Rt]=s.current,Lr(t.nodeType===8?t.parentNode:t),bn(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var d=xs(u);l.call(d)}}var u=Mc(t,0,!1,null,null,!1,!1,"",Mf);return t._reactRootContainer=u,t[Rt]=u.current,Lr(t.nodeType===8?t.parentNode:t),bn(function(){sl(e,u,n,i)}),u}function ul(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var l=r;r=function(){var u=xs(s);l.call(u)}}sl(e,s,t,r)}else s=kE(n,e,t,r,i);return xs(s)}xm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ar(e.pendingLanes);n!==0&&(ec(e,n|1),He(e,ae()),!(G&6)&&(Pi=ae()+500,gn()))}break;case 13:bn(function(){var i=Pt(t,1);if(i!==null){var r=ke();dt(i,t,1,r)}}),Dc(t,1)}};tc=function(t){if(t.tag===13){var e=Pt(t,134217728);if(e!==null){var n=ke();dt(e,t,134217728,n)}Dc(t,134217728)}};Im=function(t){if(t.tag===13){var e=nn(t),n=Pt(t,e);if(n!==null){var i=ke();dt(n,t,e,i)}Dc(t,e)}};Nm=function(){return $};Rm=function(t,e){var n=$;try{return $=t,e()}finally{$=n}};Pa=function(t,e,n){switch(e){case"input":if(Ta(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=js(i);if(!r)throw Error(N(90));om(i),Ta(i,r)}}}break;case"textarea":lm(t,n);break;case"select":e=n.value,e!=null&&di(t,!!n.multiple,e,!1)}};pm=Rc;mm=bn;var ME={usingClientEntryPoint:!1,Events:[ro,ni,js,fm,hm,Rc]},tr={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DE={bundleType:tr.bundleType,version:tr.version,rendererPackageName:tr.rendererPackageName,rendererConfig:tr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vm(t),t===null?null:t.stateNode},findFiberByHostInstance:tr.findFiberByHostInstance||AE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Do=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Do.isDisabled&&Do.supportsFiber)try{Js=Do.inject(DE),yt=Do}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ME;Ke.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fc(e))throw Error(N(200));return PE(t,e,null,n)};Ke.createRoot=function(t,e){if(!Fc(t))throw Error(N(299));var n=!1,i="",r=Qg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Mc(t,1,!1,null,null,n,!1,i,r),t[Rt]=e.current,Lr(t.nodeType===8?t.parentNode:t),new Lc(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=vm(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return bn(t)};Ke.hydrate=function(t,e,n){if(!al(e))throw Error(N(200));return ul(null,t,e,!0,n)};Ke.hydrateRoot=function(t,e,n){if(!Fc(t))throw Error(N(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=Qg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Jg(e,null,t,1,n??null,r,!1,o,s),t[Rt]=e.current,Lr(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new ll(e)};Ke.render=function(t,e,n){if(!al(e))throw Error(N(200));return ul(null,t,e,!1,n)};Ke.unmountComponentAtNode=function(t){if(!al(t))throw Error(N(40));return t._reactRootContainer?(bn(function(){ul(null,null,t,!1,function(){t._reactRootContainer=null,t[Rt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Rc;Ke.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!al(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return ul(t,e,n,!1,i)};Ke.version="18.3.1-next-f1338f8080-20240426";function Xg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xg)}catch(t){console.error(t)}}Xg(),Xp.exports=Ke;var LE=Xp.exports,Df=LE;ma.createRoot=Df.createRoot,ma.hydrateRoot=Df.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zr(){return zr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zr.apply(this,arguments)}var Jt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jt||(Jt={}));const Lf="popstate";function FE(t){t===void 0&&(t={});function e(r,o){let{pathname:s="/",search:l="",hash:u=""}=qn(r.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),au("",{pathname:s,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let s=r.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let u=r.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof o=="string"?o:Is(o))}function i(r,o){Uc(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return OE(e,n,i,t)}function ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UE(){return Math.random().toString(36).substr(2,8)}function Ff(t,e){return{usr:t.state,key:t.key,idx:e}}function au(t,e,n,i){return n===void 0&&(n=null),zr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qn(e):e,{state:n,key:e&&e.key||i||UE()})}function Is(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function qn(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function OE(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,s=r.history,l=Jt.Pop,u=null,d=f();d==null&&(d=0,s.replaceState(zr({},s.state,{idx:d}),""));function f(){return(s.state||{idx:null}).idx}function h(){l=Jt.Pop;let T=f(),v=T==null?null:T-d;d=T,u&&u({action:l,location:E.location,delta:v})}function p(T,v){l=Jt.Push;let g=au(E.location,T,v);n&&n(g,T),d=f()+1;let _=Ff(g,d),S=E.createHref(g);try{s.pushState(_,"",S)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;r.location.assign(S)}o&&u&&u({action:l,location:E.location,delta:1})}function m(T,v){l=Jt.Replace;let g=au(E.location,T,v);n&&n(g,T),d=f();let _=Ff(g,d),S=E.createHref(g);s.replaceState(_,"",S),o&&u&&u({action:l,location:E.location,delta:0})}function y(T){let v=r.location.origin!=="null"?r.location.origin:r.location.href,g=typeof T=="string"?T:Is(T);return g=g.replace(/ $/,"%20"),ie(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let E={get action(){return l},get location(){return t(r,s)},listen(T){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(Lf,h),u=T,()=>{r.removeEventListener(Lf,h),u=null}},createHref(T){return e(r,T)},createURL:y,encodeLocation(T){let v=y(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(T){return s.go(T)}};return E}var Uf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Uf||(Uf={}));function VE(t,e,n){return n===void 0&&(n="/"),bE(t,e,n)}function bE(t,e,n,i){let r=typeof e=="string"?qn(e):e,o=Ai(r.pathname||"/",n);if(o==null)return null;let s=Zg(t);BE(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let d=XE(o);l=JE(s[u],d)}return l}function Zg(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,s,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(ie(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let d=on([i,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(ie(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zg(o.children,e,f,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:YE(d,o.index),routesMeta:f})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))r(o,s);else for(let u of jg(o.path))r(o,s,u)}),e}function jg(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let s=jg(i.join("/")),l=[];return l.push(...s.map(u=>u===""?o:[o,u].join("/"))),r&&l.push(...s),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function BE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const HE=/^:[\w-]+$/,GE=3,zE=2,WE=1,$E=10,qE=-2,Of=t=>t==="*";function YE(t,e){let n=t.split("/"),i=n.length;return n.some(Of)&&(i+=qE),e&&(i+=zE),n.filter(r=>!Of(r)).reduce((r,o)=>r+(HE.test(o)?GE:o===""?WE:$E),i)}function KE(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function JE(t,e,n){let{routesMeta:i}=t,r={},o="/",s=[];for(let l=0;l<i.length;++l){let u=i[l],d=l===i.length-1,f=o==="/"?e:e.slice(o.length)||"/",h=uu({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),p=u.route;if(!h)return null;Object.assign(r,h.params),s.push({params:r,pathname:on([o,h.pathname]),pathnameBase:tT(on([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=on([o,h.pathnameBase]))}return s}function uu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=QE(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((d,f,h)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let E=l[h]||"";s=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const y=l[h];return m&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:s,pattern:t}}function QE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Uc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function XE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ai(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function ZE(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?qn(t):t;return{pathname:n?n.startsWith("/")?n:jE(n,e):e,search:nT(i),hash:iT(r)}}function jE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function na(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Oc(t,e){let n=eT(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Vc(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=qn(t):(r=zr({},t),ie(!r.pathname||!r.pathname.includes("?"),na("?","pathname","search",r)),ie(!r.pathname||!r.pathname.includes("#"),na("#","pathname","hash",r)),ie(!r.search||!r.search.includes("#"),na("#","search","hash",r)));let o=t===""||r.pathname==="",s=o?"/":r.pathname,l;if(s==null)l=n;else{let h=e.length-1;if(!i&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}l=h>=0?e[h]:"/"}let u=ZE(r,l),d=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const on=t=>t.join("/").replace(/\/\/+/g,"/"),tT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ey=["post","put","patch","delete"];new Set(ey);const oT=["get",...ey];new Set(oT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wr(){return Wr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wr.apply(this,arguments)}const cl=w.createContext(null),ty=w.createContext(null),Ft=w.createContext(null),dl=w.createContext(null),Ut=w.createContext({outlet:null,matches:[],isDataRoute:!1}),ny=w.createContext(null);function sT(t,e){let{relative:n}=e===void 0?{}:e;bi()||ie(!1);let{basename:i,navigator:r}=w.useContext(Ft),{hash:o,pathname:s,search:l}=fl(t,{relative:n}),u=s;return i!=="/"&&(u=s==="/"?i:on([i,s])),r.createHref({pathname:u,search:l,hash:o})}function bi(){return w.useContext(dl)!=null}function Bi(){return bi()||ie(!1),w.useContext(dl).location}function iy(t){w.useContext(Ft).static||w.useLayoutEffect(t)}function so(){let{isDataRoute:t}=w.useContext(Ut);return t?CT():lT()}function lT(){bi()||ie(!1);let t=w.useContext(cl),{basename:e,future:n,navigator:i}=w.useContext(Ft),{matches:r}=w.useContext(Ut),{pathname:o}=Bi(),s=JSON.stringify(Oc(r,n.v7_relativeSplatPath)),l=w.useRef(!1);return iy(()=>{l.current=!0}),w.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){i.go(d);return}let h=Vc(d,JSON.parse(s),o,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:on([e,h.pathname])),(f.replace?i.replace:i.push)(h,f.state,f)},[e,i,s,o,t])}function aT(){let{matches:t}=w.useContext(Ut),e=t[t.length-1];return e?e.params:{}}function fl(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=w.useContext(Ft),{matches:r}=w.useContext(Ut),{pathname:o}=Bi(),s=JSON.stringify(Oc(r,i.v7_relativeSplatPath));return w.useMemo(()=>Vc(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function uT(t,e){return cT(t,e)}function cT(t,e,n,i){bi()||ie(!1);let{navigator:r}=w.useContext(Ft),{matches:o}=w.useContext(Ut),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let d=Bi(),f;if(e){var h;let T=typeof e=="string"?qn(e):e;u==="/"||(h=T.pathname)!=null&&h.startsWith(u)||ie(!1),f=T}else f=d;let p=f.pathname||"/",m=p;if(u!=="/"){let T=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let y=VE(t,{pathname:m}),E=mT(y&&y.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:on([u,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:on([u,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,i);return e&&E?w.createElement(dl.Provider,{value:{location:Wr({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Jt.Pop}},E):E}function dT(){let t=_T(),e=rT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:r},n):null,null)}const fT=w.createElement(dT,null);class hT extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(Ut.Provider,{value:this.props.routeContext},w.createElement(ny.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pT(t){let{routeContext:e,match:n,children:i}=t,r=w.useContext(cl);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Ut.Provider,{value:e},i)}function mT(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let f=s.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||ie(!1),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let f=0;f<s.length;f++){let h=s[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=f),h.route.id){let{loaderData:p,errors:m}=n,y=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,h,p)=>{let m,y=!1,E=null,T=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,E=h.route.errorElement||fT,u&&(d<0&&p===0?(ET("route-fallback"),y=!0,T=null):d===p&&(y=!0,T=h.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,p+1)),g=()=>{let _;return m?_=E:y?_=T:h.route.Component?_=w.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=f,w.createElement(pT,{match:h,routeContext:{outlet:f,matches:v,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?w.createElement(hT,{location:n.location,revalidation:n.revalidation,component:E,error:m,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var ry=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ry||{}),oy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(oy||{});function gT(t){let e=w.useContext(cl);return e||ie(!1),e}function yT(t){let e=w.useContext(ty);return e||ie(!1),e}function vT(t){let e=w.useContext(Ut);return e||ie(!1),e}function sy(t){let e=vT(),n=e.matches[e.matches.length-1];return n.route.id||ie(!1),n.route.id}function _T(){var t;let e=w.useContext(ny),n=yT(),i=sy();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function CT(){let{router:t}=gT(ry.UseNavigateStable),e=sy(oy.UseNavigateStable),n=w.useRef(!1);return iy(()=>{n.current=!0}),w.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Wr({fromRouteId:e},o)))},[t,e])}const Vf={};function ET(t,e,n){Vf[t]||(Vf[t]=!0)}function TT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Zo(t){let{to:e,replace:n,state:i,relative:r}=t;bi()||ie(!1);let{future:o,static:s}=w.useContext(Ft),{matches:l}=w.useContext(Ut),{pathname:u}=Bi(),d=so(),f=Vc(e,Oc(l,o.v7_relativeSplatPath),u,r==="path"),h=JSON.stringify(f);return w.useEffect(()=>d(JSON.parse(h),{replace:n,state:i,relative:r}),[d,h,r,n,i]),null}function Ht(t){ie(!1)}function ST(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Jt.Pop,navigator:o,static:s=!1,future:l}=t;bi()&&ie(!1);let u=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:u,navigator:o,static:s,future:Wr({v7_relativeSplatPath:!1},l)}),[u,l,o,s]);typeof i=="string"&&(i=qn(i));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:y="default"}=i,E=w.useMemo(()=>{let T=Ai(f,u);return T==null?null:{location:{pathname:T,search:h,hash:p,state:m,key:y},navigationType:r}},[u,f,h,p,m,y,r]);return E==null?null:w.createElement(Ft.Provider,{value:d},w.createElement(dl.Provider,{children:n,value:E}))}function wT(t){let{children:e,location:n}=t;return uT(cu(e),n)}new Promise(()=>{});function cu(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(i,r)=>{if(!w.isValidElement(i))return;let o=[...e,r];if(i.type===w.Fragment){n.push.apply(n,cu(i.props.children,o));return}i.type!==Ht&&ie(!1),!i.props.index||!i.props.children||ie(!1);let s={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=cu(i.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ns(){return Ns=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ns.apply(this,arguments)}function ly(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function xT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IT(t,e){return t.button===0&&(!e||e==="_self")&&!xT(t)}const NT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RT=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],PT="6";try{window.__reactRouterVersion=PT}catch{}const AT=w.createContext({isTransitioning:!1}),kT="startTransition",bf=S_[kT];function MT(t){let{basename:e,children:n,future:i,window:r}=t,o=w.useRef();o.current==null&&(o.current=FE({window:r,v5Compat:!0}));let s=o.current,[l,u]=w.useState({action:s.action,location:s.location}),{v7_startTransition:d}=i||{},f=w.useCallback(h=>{d&&bf?bf(()=>u(h)):u(h)},[u,d]);return w.useLayoutEffect(()=>s.listen(f),[s,f]),w.useEffect(()=>TT(i),[i]),w.createElement(ST,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:s,future:i})}const DT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yi=w.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:s,state:l,target:u,to:d,preventScrollReset:f,viewTransition:h}=e,p=ly(e,NT),{basename:m}=w.useContext(Ft),y,E=!1;if(typeof d=="string"&&LT.test(d)&&(y=d,DT))try{let _=new URL(window.location.href),S=d.startsWith("//")?new URL(_.protocol+d):new URL(d),I=Ai(S.pathname,m);S.origin===_.origin&&I!=null?d=I+S.search+S.hash:E=!0}catch{}let T=sT(d,{relative:r}),v=UT(d,{replace:s,state:l,target:u,preventScrollReset:f,relative:r,viewTransition:h});function g(_){i&&i(_),_.defaultPrevented||v(_)}return w.createElement("a",Ns({},p,{href:y||T,onClick:E||o?i:g,ref:n,target:u}))}),Jn=w.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:s=!1,style:l,to:u,viewTransition:d,children:f}=e,h=ly(e,RT),p=fl(u,{relative:h.relative}),m=Bi(),y=w.useContext(ty),{navigator:E,basename:T}=w.useContext(Ft),v=y!=null&&OT(p)&&d===!0,g=E.encodeLocation?E.encodeLocation(p).pathname:p.pathname,_=m.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(_=_.toLowerCase(),S=S?S.toLowerCase():null,g=g.toLowerCase()),S&&T&&(S=Ai(S,T)||S);const I=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let P=_===g||!s&&_.startsWith(g)&&_.charAt(I)==="/",x=S!=null&&(S===g||!s&&S.startsWith(g)&&S.charAt(g.length)==="/"),A={isActive:P,isPending:x,isTransitioning:v},z=P?i:void 0,D;typeof o=="function"?D=o(A):D=[o,P?"active":null,x?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let ue=typeof l=="function"?l(A):l;return w.createElement(yi,Ns({},h,{"aria-current":z,className:D,ref:n,style:ue,to:u,viewTransition:d}),typeof f=="function"?f(A):f)});var du;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(du||(du={}));var Bf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bf||(Bf={}));function FT(t){let e=w.useContext(cl);return e||ie(!1),e}function UT(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:s,viewTransition:l}=e===void 0?{}:e,u=so(),d=Bi(),f=fl(t,{relative:s});return w.useCallback(h=>{if(IT(h,n)){h.preventDefault();let p=i!==void 0?i:Is(d)===Is(f);u(t,{replace:p,state:r,preventScrollReset:o,relative:s,viewTransition:l})}},[d,u,f,i,r,n,t,o,s,l])}function OT(t,e){e===void 0&&(e={});let n=w.useContext(AT);n==null&&ie(!1);let{basename:i}=FT(du.useViewTransitionState),r=fl(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ai(n.currentLocation.pathname,i)||n.currentLocation.pathname,s=Ai(n.nextLocation.pathname,i)||n.nextLocation.pathname;return uu(r.pathname,s)!=null||uu(r.pathname,o)!=null}var ui=(t=>(t.VISUAL="Visual",t.AUDITORY="Auditory",t.KINESTHETIC="Kinesthetic",t))(ui||{}),Wt=(t=>(t.DISCUSSION="Discussion",t.PROBLEM_SOLVING="Problem Solving",t.QUIET_REVIEW="Quiet Review",t.FLASHCARDS="Flashcards",t))(Wt||{});const vi=[{id:1,username:"Alice",email:"alice@example.com"},{id:2,username:"Bob",email:"bob@example.com"},{id:3,username:"Charlie",email:"charlie@example.com"},{id:4,username:"Diana",email:"diana@example.com"}],sn=[{id:1,name:"Mathematics"},{id:2,name:"Physics"},{id:3,name:"History"},{id:4,name:"Computer Science"},{id:5,name:"Literature"},{id:6,name:"Chemistry"}],Nn=[{id:1,userId:1,bio:"Visual learner who enjoys breaking down complex problems. Strong in Math, but could use a hand with History essays.",learningStyle:ui.VISUAL,preferredMethods:[Wt.PROBLEM_SOLVING,Wt.QUIET_REVIEW],availability:"Weeknights",subjectsCanHelp:[1,2],subjectsNeedHelp:[3]},{id:2,userId:2,bio:"Auditory learner, I find discussing topics helps me understand them best. Happy to help with History and Literature.",learningStyle:ui.AUDITORY,preferredMethods:[Wt.DISCUSSION],availability:"Weekends",subjectsCanHelp:[3,5],subjectsNeedHelp:[4]},{id:3,userId:3,bio:"I'm a hands-on, kinesthetic learner. I excel at coding challenges and can help with Computer Science concepts. Looking for a partner for Physics.",learningStyle:ui.KINESTHETIC,preferredMethods:[Wt.PROBLEM_SOLVING],availability:"Afternoons",subjectsCanHelp:[4],subjectsNeedHelp:[2]},{id:4,userId:4,bio:"I love diving deep into Literature and Chemistry. I prefer quiet review sessions but am open to discussion. Need some help with advanced Math.",learningStyle:ui.VISUAL,preferredMethods:[Wt.QUIET_REVIEW,Wt.FLASHCARDS],availability:"Mornings",subjectsCanHelp:[5,6],subjectsNeedHelp:[1]}],ay=[{id:1,name:"Physics Problem Solvers",subjectId:2,members:[1,3]},{id:2,name:"CS Algorithms Crew",subjectId:4,members:[2,3]}],VT=[{id:1,groupId:1,content:`Force = mass * acceleration
Key concepts for Chapter 5:
- Newton's Laws
- Friction
- Gravity on inclined planes`},{id:2,groupId:2,content:`Big O Notation:
O(1) - Constant
O(log n) - Logarithmic
O(n) - Linear
O(n log n) - Log-linear
O(n^2) - Quadratic`}],uy=w.createContext(void 0),bT=({children:t})=>{const[e,n]=w.useState(null),[i,r]=w.useState(null),[o,s]=w.useState(!0);w.useEffect(()=>{try{const h=localStorage.getItem("studySyncUser");if(h){const p=JSON.parse(h);n(p);const m=Nn.find(y=>y.userId===p.id)||null;r(m)}}catch(h){console.error("Failed to parse user from localStorage",h)}finally{s(!1)}},[]);const l=w.useCallback(async h=>(s(!0),new Promise((p,m)=>{setTimeout(()=>{const y=vi.find(E=>E.email.toLowerCase()===h.toLowerCase());if(y){n(y);const E=Nn.find(T=>T.userId===y.id)||null;r(E),localStorage.setItem("studySyncUser",JSON.stringify(y)),s(!1),p()}else s(!1),m(new Error("User not found"))},500)})),[]),u=w.useCallback(async(h,p)=>(s(!0),new Promise((m,y)=>{setTimeout(()=>{if(vi.some(v=>v.email.toLowerCase()===p.toLowerCase())){s(!1),y(new Error("Email already in use"));return}const E={id:Date.now(),username:h,email:p},T={id:Date.now(),userId:E.id,bio:"",learningStyle:"Visual",preferredMethods:[],availability:"Weekends",subjectsNeedHelp:[],subjectsCanHelp:[]};vi.push(E),Nn.push(T),n(E),r(T),localStorage.setItem("studySyncUser",JSON.stringify(E)),s(!1),m()},500)})),[]),d=w.useCallback(()=>{n(null),r(null),localStorage.removeItem("studySyncUser")},[]),f=w.useCallback(h=>{r(h);const p=Nn.findIndex(m=>m.id===h.id);p!==-1&&(Nn[p]=h)},[]);return C.jsx(uy.Provider,{value:{user:e,profile:i,loading:o,login:l,logout:d,register:u,updateProfile:f},children:t})},_t=()=>{const t=w.useContext(uy);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},BT=({user:t,profile:e})=>{const n=i=>{var r;return((r=sn.find(o=>o.id===i))==null?void 0:r.name)||"Unknown"};return C.jsxs("div",{className:"bg-surface p-4 rounded-lg shadow transition-transform hover:scale-105",children:[C.jsx("h3",{className:"font-bold text-lg text-primary",children:t.username}),C.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.bio}),C.jsxs("div",{className:"mt-3",children:[C.jsx("h4",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Can Help With"}),C.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.subjectsCanHelp.map(i=>C.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:n(i)},i))})]})]})},HT=()=>{const{user:t,profile:e}=_t(),n=ay.filter(r=>r.members.includes(t.id)),i=Nn.filter(r=>r.userId===t.id?!1:r.subjectsCanHelp.some(o=>e==null?void 0:e.subjectsNeedHelp.includes(o))).slice(0,3);return C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-sm",children:[C.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["Welcome back, ",t==null?void 0:t.username,"!"]}),C.jsx("p",{className:"text-gray-600 mt-2",children:"Here's your study dashboard. Let's make today productive!"})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs("div",{className:"md:col-span-2 space-y-6",children:[C.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"My Study Groups"}),n.length>0?C.jsx("div",{className:"space-y-4",children:n.map(r=>{var o;return C.jsxs(yi,{to:`/group/${r.id}`,className:"block bg-surface p-4 rounded-lg shadow hover:shadow-lg transition-shadow",children:[C.jsx("h3",{className:"font-bold text-primary",children:r.name}),C.jsxs("p",{className:"text-sm text-gray-500",children:["Subject: ",(o=sn.find(s=>s.id===r.subjectId))==null?void 0:o.name]})]},r.id)})}):C.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[C.jsx("p",{className:"text-gray-500",children:"You're not in any study groups yet."}),C.jsx(yi,{to:"/find",className:"mt-2 inline-block text-primary font-semibold hover:underline",children:"Find a group or partner"})]})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Suggested Partners"}),i.length>0?C.jsx("div",{className:"space-y-4",children:i.map(r=>{const o=vi.find(s=>s.id===r.userId);return o?C.jsx(BT,{user:o,profile:r},r.id):null})}):C.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[C.jsx("p",{className:"text-gray-500",children:"No suggestions right now."}),C.jsx(yi,{to:"/profile",className:"mt-2 inline-block text-primary font-semibold hover:underline",children:"Complete your profile for better matches!"})]})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let GT,zT;function WT(){return{geminiUrl:GT,vertexUrl:zT}}function $T(t,e,n){var i,r,o;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const s=WT();return t.vertexai?(r=s.vertexUrl)!==null&&r!==void 0?r:e:(o=s.geminiUrl)!==null&&o!==void 0?o:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lo{}function F(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let d=0;d<u.length;d++){const f=u[d];c(f,e.slice(o+1),n[d])}else for(const d of u)c(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];c(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function a(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const o=t[r];return Array.isArray(o)?o.map(s=>a(s,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ee(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cy(t,e){const n=ee(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function dy(t,e){return Array.isArray(e)?e.map(n=>Rs(t,n)):[Rs(t,e)]}function Rs(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function qT(t,e){const n=Rs(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function YT(t,e){const n=Rs(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Hf(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function fy(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>Hf(t,n)):[Hf(t,e)]}function fu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Gf(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function zf(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ue(t,e){if(e==null)throw new Error("ContentUnion is required");return fu(e)?e:{role:"user",parts:fy(t,e)}}function hy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Ue(t,n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Ue(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ue(t,n)):[Ue(t,e)]}function yn(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Gf(e)||zf(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ue(t,e)]}const n=[],i=[],r=fu(e[0]);for(const o of e){const s=fu(o);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)n.push(o);else{if(Gf(o)||zf(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(o)}}return r||n.push({role:"user",parts:fy(t,i)}),n}function py(t,e){return e}function my(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function hl(t,e){return e}function pl(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function KT(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function vn(t,e){if(typeof e!="string")throw new Error("name must be a string");return KT(t,e,"cachedContents")}function gy(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function _n(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function JT(t){return t!=null&&typeof t=="object"&&"name"in t}function QT(t){return t!=null&&typeof t=="object"&&"video"in t}function XT(t){return t!=null&&typeof t=="object"&&"uri"in t}function yy(t,e){var n;let i;if(JT(e)&&(i=e.name),!(XT(e)&&(i=e.uri,i===void 0))&&!(QT(e)&&(i=(n=e.video)===null||n===void 0?void 0:n.uri,i===void 0))){if(typeof e=="string"&&(i=e),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const o=i.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${i}`);i=o[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function vy(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function _y(t,e){for(const n of["models","tunedModels","publisherModels"])if(ZT(e,n))return e[n];return[]}function ZT(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jT(t,e){const n={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["data"]);i!=null&&c(n,["data"],i);const r=a(e,["mimeType"]);return r!=null&&c(n,["mimeType"],r),n}function eS(t,e){const n={};if(a(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=a(e,["thought"]);i!=null&&c(n,["thought"],i);const r=a(e,["inlineData"]);r!=null&&c(n,["inlineData"],jT(t,r));const o=a(e,["codeExecutionResult"]);o!=null&&c(n,["codeExecutionResult"],o);const s=a(e,["executableCode"]);s!=null&&c(n,["executableCode"],s);const l=a(e,["fileData"]);l!=null&&c(n,["fileData"],l);const u=a(e,["functionCall"]);u!=null&&c(n,["functionCall"],u);const d=a(e,["functionResponse"]);d!=null&&c(n,["functionResponse"],d);const f=a(e,["text"]);return f!=null&&c(n,["text"],f),n}function Wf(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>eS(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function tS(){return{}}function nS(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["dynamicThreshold"]);return r!=null&&c(n,["dynamicThreshold"],r),n}function iS(t,e){const n={},i=a(e,["dynamicRetrievalConfig"]);return i!=null&&c(n,["dynamicRetrievalConfig"],nS(t,i)),n}function rS(t,e){const n={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");a(e,["googleSearch"])!=null&&c(n,["googleSearch"],tS());const r=a(e,["googleSearchRetrieval"]);if(r!=null&&c(n,["googleSearchRetrieval"],iS(t,r)),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const o=a(e,["codeExecution"]);o!=null&&c(n,["codeExecution"],o);const s=a(e,["functionDeclarations"]);return s!=null&&c(n,["functionDeclarations"],s),n}function oS(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["allowedFunctionNames"]);return r!=null&&c(n,["allowedFunctionNames"],r),n}function sS(t,e){const n={},i=a(e,["functionCallingConfig"]);if(i!=null&&c(n,["functionCallingConfig"],oS(t,i)),a(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function lS(t,e,n){const i={},r=a(e,["ttl"]);n!==void 0&&r!=null&&c(n,["ttl"],r);const o=a(e,["expireTime"]);n!==void 0&&o!=null&&c(n,["expireTime"],o);const s=a(e,["displayName"]);n!==void 0&&s!=null&&c(n,["displayName"],s);const l=a(e,["contents"]);if(n!==void 0&&l!=null){let h=yn(t,l);Array.isArray(h)&&(h=h.map(p=>Wf(t,p))),c(n,["contents"],h)}const u=a(e,["systemInstruction"]);n!==void 0&&u!=null&&c(n,["systemInstruction"],Wf(t,Ue(t,u)));const d=a(e,["tools"]);if(n!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>rS(t,p))),c(n,["tools"],h)}const f=a(e,["toolConfig"]);return n!==void 0&&f!=null&&c(n,["toolConfig"],sS(t,f)),i}function aS(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["model"],cy(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],lS(t,r,n)),n}function uS(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],vn(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function cS(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],vn(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function dS(t,e,n){const i={},r=a(e,["ttl"]);n!==void 0&&r!=null&&c(n,["ttl"],r);const o=a(e,["expireTime"]);return n!==void 0&&o!=null&&c(n,["expireTime"],o),i}function fS(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],vn(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],dS(t,r,n)),n}function hS(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);return n!==void 0&&o!=null&&c(n,["_query","pageToken"],o),i}function pS(t,e){const n={},i=a(e,["config"]);return i!=null&&c(n,["config"],hS(t,i,n)),n}function mS(t,e){const n={},i=a(e,["displayName"]);i!=null&&c(n,["displayName"],i);const r=a(e,["data"]);r!=null&&c(n,["data"],r);const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function gS(t,e){const n={},i=a(e,["videoMetadata"]);i!=null&&c(n,["videoMetadata"],i);const r=a(e,["thought"]);r!=null&&c(n,["thought"],r);const o=a(e,["inlineData"]);o!=null&&c(n,["inlineData"],mS(t,o));const s=a(e,["codeExecutionResult"]);s!=null&&c(n,["codeExecutionResult"],s);const l=a(e,["executableCode"]);l!=null&&c(n,["executableCode"],l);const u=a(e,["fileData"]);u!=null&&c(n,["fileData"],u);const d=a(e,["functionCall"]);d!=null&&c(n,["functionCall"],d);const f=a(e,["functionResponse"]);f!=null&&c(n,["functionResponse"],f);const h=a(e,["text"]);return h!=null&&c(n,["text"],h),n}function $f(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>gS(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function yS(){return{}}function vS(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["dynamicThreshold"]);return r!=null&&c(n,["dynamicThreshold"],r),n}function _S(t,e){const n={},i=a(e,["dynamicRetrievalConfig"]);return i!=null&&c(n,["dynamicRetrievalConfig"],vS(t,i)),n}function CS(){return{}}function ES(t,e){const n={},i=a(e,["apiKeyString"]);return i!=null&&c(n,["apiKeyString"],i),n}function TS(t,e){const n={},i=a(e,["apiKeyConfig"]);i!=null&&c(n,["apiKeyConfig"],ES(t,i));const r=a(e,["authType"]);r!=null&&c(n,["authType"],r);const o=a(e,["googleServiceAccountConfig"]);o!=null&&c(n,["googleServiceAccountConfig"],o);const s=a(e,["httpBasicAuthConfig"]);s!=null&&c(n,["httpBasicAuthConfig"],s);const l=a(e,["oauthConfig"]);l!=null&&c(n,["oauthConfig"],l);const u=a(e,["oidcConfig"]);return u!=null&&c(n,["oidcConfig"],u),n}function SS(t,e){const n={},i=a(e,["authConfig"]);return i!=null&&c(n,["authConfig"],TS(t,i)),n}function wS(t,e){const n={},i=a(e,["retrieval"]);i!=null&&c(n,["retrieval"],i),a(e,["googleSearch"])!=null&&c(n,["googleSearch"],yS());const o=a(e,["googleSearchRetrieval"]);o!=null&&c(n,["googleSearchRetrieval"],_S(t,o)),a(e,["enterpriseWebSearch"])!=null&&c(n,["enterpriseWebSearch"],CS());const l=a(e,["googleMaps"]);l!=null&&c(n,["googleMaps"],SS(t,l));const u=a(e,["codeExecution"]);u!=null&&c(n,["codeExecution"],u);const d=a(e,["functionDeclarations"]);return d!=null&&c(n,["functionDeclarations"],d),n}function xS(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["allowedFunctionNames"]);return r!=null&&c(n,["allowedFunctionNames"],r),n}function IS(t,e){const n={},i=a(e,["latitude"]);i!=null&&c(n,["latitude"],i);const r=a(e,["longitude"]);return r!=null&&c(n,["longitude"],r),n}function NS(t,e){const n={},i=a(e,["latLng"]);return i!=null&&c(n,["latLng"],IS(t,i)),n}function RS(t,e){const n={},i=a(e,["functionCallingConfig"]);i!=null&&c(n,["functionCallingConfig"],xS(t,i));const r=a(e,["retrievalConfig"]);return r!=null&&c(n,["retrievalConfig"],NS(t,r)),n}function PS(t,e,n){const i={},r=a(e,["ttl"]);n!==void 0&&r!=null&&c(n,["ttl"],r);const o=a(e,["expireTime"]);n!==void 0&&o!=null&&c(n,["expireTime"],o);const s=a(e,["displayName"]);n!==void 0&&s!=null&&c(n,["displayName"],s);const l=a(e,["contents"]);if(n!==void 0&&l!=null){let h=yn(t,l);Array.isArray(h)&&(h=h.map(p=>$f(t,p))),c(n,["contents"],h)}const u=a(e,["systemInstruction"]);n!==void 0&&u!=null&&c(n,["systemInstruction"],$f(t,Ue(t,u)));const d=a(e,["tools"]);if(n!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>wS(t,p))),c(n,["tools"],h)}const f=a(e,["toolConfig"]);return n!==void 0&&f!=null&&c(n,["toolConfig"],RS(t,f)),i}function AS(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["model"],cy(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],PS(t,r,n)),n}function kS(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],vn(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function MS(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],vn(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function DS(t,e,n){const i={},r=a(e,["ttl"]);n!==void 0&&r!=null&&c(n,["ttl"],r);const o=a(e,["expireTime"]);return n!==void 0&&o!=null&&c(n,["expireTime"],o),i}function LS(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],vn(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],DS(t,r,n)),n}function FS(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);return n!==void 0&&o!=null&&c(n,["_query","pageToken"],o),i}function US(t,e){const n={},i=a(e,["config"]);return i!=null&&c(n,["config"],FS(t,i,n)),n}function jo(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["displayName"]);r!=null&&c(n,["displayName"],r);const o=a(e,["model"]);o!=null&&c(n,["model"],o);const s=a(e,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(e,["updateTime"]);l!=null&&c(n,["updateTime"],l);const u=a(e,["expireTime"]);u!=null&&c(n,["expireTime"],u);const d=a(e,["usageMetadata"]);return d!=null&&c(n,["usageMetadata"],d),n}function OS(){return{}}function VS(t,e){const n={},i=a(e,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const r=a(e,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>jo(t,s))),c(n,["cachedContents"],o)}return n}function es(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["displayName"]);r!=null&&c(n,["displayName"],r);const o=a(e,["model"]);o!=null&&c(n,["model"],o);const s=a(e,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(e,["updateTime"]);l!=null&&c(n,["updateTime"],l);const u=a(e,["expireTime"]);u!=null&&c(n,["expireTime"],u);const d=a(e,["usageMetadata"]);return d!=null&&c(n,["usageMetadata"],d),n}function bS(){return{}}function BS(t,e){const n={},i=a(e,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const r=a(e,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>es(t,s))),c(n,["cachedContents"],o)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ki;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ki||(ki={}));class ml{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let s={config:{}};i?typeof i=="object"?s=Object.assign({},i):s=i:s={config:{}},s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qf;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qf||(qf={}));var Yf;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Yf||(Yf={}));var Kf;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Kf||(Kf={}));var Jf;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Jf||(Jf={}));var Qf;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Qf||(Qf={}));var Xf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xf||(Xf={}));var Zf;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Zf||(Zf={}));var jf;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(jf||(jf={}));var eh;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(eh||(eh={}));var th;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(th||(th={}));var nh;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nh||(nh={}));var ih;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(ih||(ih={}));var rh;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rh||(rh={}));var Ps;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ps||(Ps={}));var oh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(oh||(oh={}));var hu;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hu||(hu={}));var sh;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sh||(sh={}));var lh;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(lh||(lh={}));var ah;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ah||(ah={}));var uh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(uh||(uh={}));var ch;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ch||(ch={}));var dh;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(dh||(dh={}));var fh;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(fh||(fh={}));var hh;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(hh||(hh={}));var ph;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ph||(ph={}));var mh;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mh||(mh={}));var gh;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(gh||(gh={}));var yh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yh||(yh={}));var vh;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(vh||(vh={}));var _h;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(_h||(_h={}));var Ch;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ch||(Ch={}));var Eh;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Eh||(Eh={}));var Th;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Th||(Th={}));var Sh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sh||(Sh={}));class Lo{get text(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,y]of Object.entries(p))m!=="text"&&m!=="thought"&&(y!==null||y!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,o,s,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,r,o,s,l,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,o,s,l,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class wh{}class xh{}class HS{}class GS{}class Ih{}class Nh{}class Rh{}class zS{}class Ph{}class Ah{}class kh{}class WS{}class pu{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class $S{}class qS{}class YS{get text(){var e,n,i;let r="",o=!1;const s=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(l))u!=="text"&&u!=="thought"&&d!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const s of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KS extends lo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ml(ki.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=AS(this.apiClient,e);return l=F("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>es(this.apiClient,f))}else{const d=aS(this.apiClient,e);return l=F("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>jo(this.apiClient,f))}}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=kS(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>es(this.apiClient,f))}else{const d=uS(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>jo(this.apiClient,f))}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=MS(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(()=>{const f=bS(),h=new Ah;return Object.assign(h,f),h})}else{const d=cS(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(()=>{const f=OS(),h=new Ah;return Object.assign(h,f),h})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=LS(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>es(this.apiClient,f))}else{const d=fS(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>jo(this.apiClient,f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=US(this.apiClient,e);return l=F("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=BS(this.apiClient,f),p=new kh;return Object.assign(p,h),p})}else{const d=pS(this.apiClient,e);return l=F("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=VS(this.apiClient,f),p=new kh;return Object.assign(p,h),p})}}}function Mh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(t){return this instanceof Ie?(this.v=t,this):new Ie(t)}function As(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(m){return function(y){return Promise.resolve(y).then(m,h)}}function l(m,y){i[m]&&(r[m]=function(E){return new Promise(function(T,v){o.push([m,E,T,v])>1||u(m,E)})},y&&(r[m]=y(r[m])))}function u(m,y){try{d(i[m](y))}catch(E){p(o[0][3],E)}}function d(m){m.value instanceof Ie?Promise.resolve(m.value.v).then(f,h):p(o[0][2],m)}function f(m){u("next",m)}function h(m){u("throw",m)}function p(m,y){m(y),o.shift(),o.length&&u(o[0][0],o[0][1])}}function mu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Mh=="function"?Mh(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),r(l,u,s.done,s.value)})}}function r(o,s,l,u){Promise.resolve(u).then(function(d){o({value:d,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JS(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Cy(n)}function Cy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function QS(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function XS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0,r=t[0];for(;i<n;)if(t[i].role==="user")r=t[i],i++;else{const o=[];let s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!Cy(t[i])&&(s=!1),i++;s&&(e.push(r),e.push(...o))}return e}class ZS{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new jS(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class jS{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),QS(o)}async sendMessage(e){var n;await this.sendPromise;const i=Ue(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s;const u=(s=(o=(await r).candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,d=u?[u]:[];this.recordHistory(i,d)})(),await this.sendPromise,r}async sendMessageStream(e){var n;await this.sendPromise;const i=Ue(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){return e?XS(this.history):this.history}processStreamResponse(e,n){var i,r;return As(this,arguments,function*(){var s,l,u,d;const f=[];try{for(var h=!0,p=mu(e),m;m=yield Ie(p.next()),s=m.done,!s;h=!0){d=m.value,h=!1;const y=d;if(JS(y)){const E=(r=(i=y.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;E!==void 0&&f.push(E)}yield yield Ie(y)}}catch(y){l={error:y}}finally{try{!h&&!s&&(u=p.return)&&(yield Ie(u.call(p)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n){let i=[];n.length>0&&n.every(r=>r.role==="model")?i=n:i.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e0(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);return n!==void 0&&o!=null&&c(n,["_query","pageToken"],o),i}function t0(t,e){const n={},i=a(e,["config"]);return i!=null&&c(n,["config"],e0(t,i,n)),n}function n0(t,e){const n={},i=a(e,["details"]);i!=null&&c(n,["details"],i);const r=a(e,["message"]);r!=null&&c(n,["message"],r);const o=a(e,["code"]);return o!=null&&c(n,["code"],o),n}function i0(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["displayName"]);r!=null&&c(n,["displayName"],r);const o=a(e,["mimeType"]);o!=null&&c(n,["mimeType"],o);const s=a(e,["sizeBytes"]);s!=null&&c(n,["sizeBytes"],s);const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const u=a(e,["expirationTime"]);u!=null&&c(n,["expirationTime"],u);const d=a(e,["updateTime"]);d!=null&&c(n,["updateTime"],d);const f=a(e,["sha256Hash"]);f!=null&&c(n,["sha256Hash"],f);const h=a(e,["uri"]);h!=null&&c(n,["uri"],h);const p=a(e,["downloadUri"]);p!=null&&c(n,["downloadUri"],p);const m=a(e,["state"]);m!=null&&c(n,["state"],m);const y=a(e,["source"]);y!=null&&c(n,["source"],y);const E=a(e,["videoMetadata"]);E!=null&&c(n,["videoMetadata"],E);const T=a(e,["error"]);return T!=null&&c(n,["error"],n0(t,T)),n}function r0(t,e){const n={},i=a(e,["file"]);i!=null&&c(n,["file"],i0(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function o0(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","file"],yy(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function s0(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","file"],yy(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function l0(t,e){const n={},i=a(e,["details"]);i!=null&&c(n,["details"],i);const r=a(e,["message"]);r!=null&&c(n,["message"],r);const o=a(e,["code"]);return o!=null&&c(n,["code"],o),n}function gu(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["displayName"]);r!=null&&c(n,["displayName"],r);const o=a(e,["mimeType"]);o!=null&&c(n,["mimeType"],o);const s=a(e,["sizeBytes"]);s!=null&&c(n,["sizeBytes"],s);const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const u=a(e,["expirationTime"]);u!=null&&c(n,["expirationTime"],u);const d=a(e,["updateTime"]);d!=null&&c(n,["updateTime"],d);const f=a(e,["sha256Hash"]);f!=null&&c(n,["sha256Hash"],f);const h=a(e,["uri"]);h!=null&&c(n,["uri"],h);const p=a(e,["downloadUri"]);p!=null&&c(n,["downloadUri"],p);const m=a(e,["state"]);m!=null&&c(n,["state"],m);const y=a(e,["source"]);y!=null&&c(n,["source"],y);const E=a(e,["videoMetadata"]);E!=null&&c(n,["videoMetadata"],E);const T=a(e,["error"]);return T!=null&&c(n,["error"],l0(t,T)),n}function a0(t,e){const n={},i=a(e,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const r=a(e,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>gu(t,s))),c(n,["files"],o)}return n}function u0(){return{}}function c0(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d0 extends lo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ml(ki.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>gu(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=t0(this.apiClient,e);return o=F("files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const d=a0(this.apiClient,u),f=new WS;return Object.assign(f,d),f})}}async createInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=r0(this.apiClient,e);return o=F("upload/v1beta/files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(()=>{const u=u0(),d=new $S;return Object.assign(d,u),d})}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=o0(this.apiClient,e);return o=F("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>gu(this.apiClient,u))}}async delete(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=s0(this.apiClient,e);return o=F("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(()=>{const u=c0(),d=new qS;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f0(t,e){const n={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["data"]);i!=null&&c(n,["data"],i);const r=a(e,["mimeType"]);return r!=null&&c(n,["mimeType"],r),n}function h0(t,e){const n={},i=a(e,["displayName"]);i!=null&&c(n,["displayName"],i);const r=a(e,["data"]);r!=null&&c(n,["data"],r);const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function p0(t,e){const n={};if(a(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=a(e,["thought"]);i!=null&&c(n,["thought"],i);const r=a(e,["inlineData"]);r!=null&&c(n,["inlineData"],f0(t,r));const o=a(e,["codeExecutionResult"]);o!=null&&c(n,["codeExecutionResult"],o);const s=a(e,["executableCode"]);s!=null&&c(n,["executableCode"],s);const l=a(e,["fileData"]);l!=null&&c(n,["fileData"],l);const u=a(e,["functionCall"]);u!=null&&c(n,["functionCall"],u);const d=a(e,["functionResponse"]);d!=null&&c(n,["functionResponse"],d);const f=a(e,["text"]);return f!=null&&c(n,["text"],f),n}function m0(t,e){const n={},i=a(e,["videoMetadata"]);i!=null&&c(n,["videoMetadata"],i);const r=a(e,["thought"]);r!=null&&c(n,["thought"],r);const o=a(e,["inlineData"]);o!=null&&c(n,["inlineData"],h0(t,o));const s=a(e,["codeExecutionResult"]);s!=null&&c(n,["codeExecutionResult"],s);const l=a(e,["executableCode"]);l!=null&&c(n,["executableCode"],l);const u=a(e,["fileData"]);u!=null&&c(n,["fileData"],u);const d=a(e,["functionCall"]);d!=null&&c(n,["functionCall"],d);const f=a(e,["functionResponse"]);f!=null&&c(n,["functionResponse"],f);const h=a(e,["text"]);return h!=null&&c(n,["text"],h),n}function g0(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>p0(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function y0(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>m0(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function v0(){return{}}function _0(){return{}}function C0(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["dynamicThreshold"]);return r!=null&&c(n,["dynamicThreshold"],r),n}function E0(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["dynamicThreshold"]);return r!=null&&c(n,["dynamicThreshold"],r),n}function T0(t,e){const n={},i=a(e,["dynamicRetrievalConfig"]);return i!=null&&c(n,["dynamicRetrievalConfig"],C0(t,i)),n}function S0(t,e){const n={},i=a(e,["dynamicRetrievalConfig"]);return i!=null&&c(n,["dynamicRetrievalConfig"],E0(t,i)),n}function w0(){return{}}function x0(t,e){const n={},i=a(e,["apiKeyString"]);return i!=null&&c(n,["apiKeyString"],i),n}function I0(t,e){const n={},i=a(e,["apiKeyConfig"]);i!=null&&c(n,["apiKeyConfig"],x0(t,i));const r=a(e,["authType"]);r!=null&&c(n,["authType"],r);const o=a(e,["googleServiceAccountConfig"]);o!=null&&c(n,["googleServiceAccountConfig"],o);const s=a(e,["httpBasicAuthConfig"]);s!=null&&c(n,["httpBasicAuthConfig"],s);const l=a(e,["oauthConfig"]);l!=null&&c(n,["oauthConfig"],l);const u=a(e,["oidcConfig"]);return u!=null&&c(n,["oidcConfig"],u),n}function N0(t,e){const n={},i=a(e,["authConfig"]);return i!=null&&c(n,["authConfig"],I0(t,i)),n}function R0(t,e){const n={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");a(e,["googleSearch"])!=null&&c(n,["googleSearch"],v0());const r=a(e,["googleSearchRetrieval"]);if(r!=null&&c(n,["googleSearchRetrieval"],T0(t,r)),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const o=a(e,["codeExecution"]);o!=null&&c(n,["codeExecution"],o);const s=a(e,["functionDeclarations"]);return s!=null&&c(n,["functionDeclarations"],s),n}function P0(t,e){const n={},i=a(e,["retrieval"]);i!=null&&c(n,["retrieval"],i),a(e,["googleSearch"])!=null&&c(n,["googleSearch"],_0());const o=a(e,["googleSearchRetrieval"]);o!=null&&c(n,["googleSearchRetrieval"],S0(t,o)),a(e,["enterpriseWebSearch"])!=null&&c(n,["enterpriseWebSearch"],w0());const l=a(e,["googleMaps"]);l!=null&&c(n,["googleMaps"],N0(t,l));const u=a(e,["codeExecution"]);u!=null&&c(n,["codeExecution"],u);const d=a(e,["functionDeclarations"]);return d!=null&&c(n,["functionDeclarations"],d),n}function A0(t,e){const n={},i=a(e,["handle"]);if(i!=null&&c(n,["handle"],i),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function k0(t,e){const n={},i=a(e,["handle"]);i!=null&&c(n,["handle"],i);const r=a(e,["transparent"]);return r!=null&&c(n,["transparent"],r),n}function Dh(){return{}}function Lh(){return{}}function M0(t,e){const n={},i=a(e,["disabled"]);i!=null&&c(n,["disabled"],i);const r=a(e,["startOfSpeechSensitivity"]);r!=null&&c(n,["startOfSpeechSensitivity"],r);const o=a(e,["endOfSpeechSensitivity"]);o!=null&&c(n,["endOfSpeechSensitivity"],o);const s=a(e,["prefixPaddingMs"]);s!=null&&c(n,["prefixPaddingMs"],s);const l=a(e,["silenceDurationMs"]);return l!=null&&c(n,["silenceDurationMs"],l),n}function D0(t,e){const n={},i=a(e,["disabled"]);i!=null&&c(n,["disabled"],i);const r=a(e,["startOfSpeechSensitivity"]);r!=null&&c(n,["startOfSpeechSensitivity"],r);const o=a(e,["endOfSpeechSensitivity"]);o!=null&&c(n,["endOfSpeechSensitivity"],o);const s=a(e,["prefixPaddingMs"]);s!=null&&c(n,["prefixPaddingMs"],s);const l=a(e,["silenceDurationMs"]);return l!=null&&c(n,["silenceDurationMs"],l),n}function L0(t,e){const n={},i=a(e,["automaticActivityDetection"]);i!=null&&c(n,["automaticActivityDetection"],M0(t,i));const r=a(e,["activityHandling"]);r!=null&&c(n,["activityHandling"],r);const o=a(e,["turnCoverage"]);return o!=null&&c(n,["turnCoverage"],o),n}function F0(t,e){const n={},i=a(e,["automaticActivityDetection"]);i!=null&&c(n,["automaticActivityDetection"],D0(t,i));const r=a(e,["activityHandling"]);r!=null&&c(n,["activityHandling"],r);const o=a(e,["turnCoverage"]);return o!=null&&c(n,["turnCoverage"],o),n}function U0(t,e){const n={},i=a(e,["targetTokens"]);return i!=null&&c(n,["targetTokens"],i),n}function O0(t,e){const n={},i=a(e,["targetTokens"]);return i!=null&&c(n,["targetTokens"],i),n}function V0(t,e){const n={},i=a(e,["triggerTokens"]);i!=null&&c(n,["triggerTokens"],i);const r=a(e,["slidingWindow"]);return r!=null&&c(n,["slidingWindow"],U0(t,r)),n}function b0(t,e){const n={},i=a(e,["triggerTokens"]);i!=null&&c(n,["triggerTokens"],i);const r=a(e,["slidingWindow"]);return r!=null&&c(n,["slidingWindow"],O0(t,r)),n}function B0(t,e,n){const i={},r=a(e,["generationConfig"]);n!==void 0&&r!=null&&c(n,["setup","generationConfig"],r);const o=a(e,["responseModalities"]);n!==void 0&&o!=null&&c(n,["setup","generationConfig","responseModalities"],o);const s=a(e,["temperature"]);n!==void 0&&s!=null&&c(n,["setup","generationConfig","temperature"],s);const l=a(e,["topP"]);n!==void 0&&l!=null&&c(n,["setup","generationConfig","topP"],l);const u=a(e,["topK"]);n!==void 0&&u!=null&&c(n,["setup","generationConfig","topK"],u);const d=a(e,["maxOutputTokens"]);n!==void 0&&d!=null&&c(n,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);n!==void 0&&f!=null&&c(n,["setup","generationConfig","mediaResolution"],f);const h=a(e,["seed"]);n!==void 0&&h!=null&&c(n,["setup","generationConfig","seed"],h);const p=a(e,["speechConfig"]);n!==void 0&&p!=null&&c(n,["setup","generationConfig","speechConfig"],p);const m=a(e,["systemInstruction"]);n!==void 0&&m!=null&&c(n,["setup","systemInstruction"],g0(t,Ue(t,m)));const y=a(e,["tools"]);if(n!==void 0&&y!=null){let S=pl(t,y);Array.isArray(S)&&(S=S.map(I=>R0(t,hl(t,I)))),c(n,["setup","tools"],S)}const E=a(e,["sessionResumption"]);n!==void 0&&E!=null&&c(n,["setup","sessionResumption"],A0(t,E));const T=a(e,["inputAudioTranscription"]);n!==void 0&&T!=null&&c(n,["setup","inputAudioTranscription"],Dh());const v=a(e,["outputAudioTranscription"]);n!==void 0&&v!=null&&c(n,["setup","outputAudioTranscription"],Dh());const g=a(e,["realtimeInputConfig"]);n!==void 0&&g!=null&&c(n,["setup","realtimeInputConfig"],L0(t,g));const _=a(e,["contextWindowCompression"]);return n!==void 0&&_!=null&&c(n,["setup","contextWindowCompression"],V0(t,_)),i}function H0(t,e,n){const i={},r=a(e,["generationConfig"]);n!==void 0&&r!=null&&c(n,["setup","generationConfig"],r);const o=a(e,["responseModalities"]);n!==void 0&&o!=null&&c(n,["setup","generationConfig","responseModalities"],o);const s=a(e,["temperature"]);n!==void 0&&s!=null&&c(n,["setup","generationConfig","temperature"],s);const l=a(e,["topP"]);n!==void 0&&l!=null&&c(n,["setup","generationConfig","topP"],l);const u=a(e,["topK"]);n!==void 0&&u!=null&&c(n,["setup","generationConfig","topK"],u);const d=a(e,["maxOutputTokens"]);n!==void 0&&d!=null&&c(n,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);n!==void 0&&f!=null&&c(n,["setup","generationConfig","mediaResolution"],f);const h=a(e,["seed"]);n!==void 0&&h!=null&&c(n,["setup","generationConfig","seed"],h);const p=a(e,["speechConfig"]);n!==void 0&&p!=null&&c(n,["setup","generationConfig","speechConfig"],p);const m=a(e,["systemInstruction"]);n!==void 0&&m!=null&&c(n,["setup","systemInstruction"],y0(t,Ue(t,m)));const y=a(e,["tools"]);if(n!==void 0&&y!=null){let S=pl(t,y);Array.isArray(S)&&(S=S.map(I=>P0(t,hl(t,I)))),c(n,["setup","tools"],S)}const E=a(e,["sessionResumption"]);n!==void 0&&E!=null&&c(n,["setup","sessionResumption"],k0(t,E));const T=a(e,["inputAudioTranscription"]);n!==void 0&&T!=null&&c(n,["setup","inputAudioTranscription"],Lh());const v=a(e,["outputAudioTranscription"]);n!==void 0&&v!=null&&c(n,["setup","outputAudioTranscription"],Lh());const g=a(e,["realtimeInputConfig"]);n!==void 0&&g!=null&&c(n,["setup","realtimeInputConfig"],F0(t,g));const _=a(e,["contextWindowCompression"]);return n!==void 0&&_!=null&&c(n,["setup","contextWindowCompression"],b0(t,_)),i}function G0(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],B0(t,r,n)),n}function z0(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],H0(t,r,n)),n}function W0(){return{}}function $0(){return{}}function q0(){return{}}function Y0(){return{}}function K0(t,e){const n={},i=a(e,["media"]);i!=null&&c(n,["mediaChunks"],dy(t,i));const r=a(e,["audio"]);r!=null&&c(n,["audio"],YT(t,r));const o=a(e,["audioStreamEnd"]);o!=null&&c(n,["audioStreamEnd"],o);const s=a(e,["video"]);s!=null&&c(n,["video"],qT(t,s));const l=a(e,["text"]);return l!=null&&c(n,["text"],l),a(e,["activityStart"])!=null&&c(n,["activityStart"],W0()),a(e,["activityEnd"])!=null&&c(n,["activityEnd"],q0()),n}function J0(t,e){const n={},i=a(e,["media"]);if(i!=null&&c(n,["mediaChunks"],dy(t,i)),a(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=a(e,["audioStreamEnd"]);if(r!=null&&c(n,["audioStreamEnd"],r),a(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(a(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return a(e,["activityStart"])!=null&&c(n,["activityStart"],$0()),a(e,["activityEnd"])!=null&&c(n,["activityEnd"],Y0()),n}function Q0(){return{}}function X0(){return{}}function Z0(t,e){const n={},i=a(e,["data"]);i!=null&&c(n,["data"],i);const r=a(e,["mimeType"]);return r!=null&&c(n,["mimeType"],r),n}function j0(t,e){const n={},i=a(e,["displayName"]);i!=null&&c(n,["displayName"],i);const r=a(e,["data"]);r!=null&&c(n,["data"],r);const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function ew(t,e){const n={},i=a(e,["thought"]);i!=null&&c(n,["thought"],i);const r=a(e,["inlineData"]);r!=null&&c(n,["inlineData"],Z0(t,r));const o=a(e,["codeExecutionResult"]);o!=null&&c(n,["codeExecutionResult"],o);const s=a(e,["executableCode"]);s!=null&&c(n,["executableCode"],s);const l=a(e,["fileData"]);l!=null&&c(n,["fileData"],l);const u=a(e,["functionCall"]);u!=null&&c(n,["functionCall"],u);const d=a(e,["functionResponse"]);d!=null&&c(n,["functionResponse"],d);const f=a(e,["text"]);return f!=null&&c(n,["text"],f),n}function tw(t,e){const n={},i=a(e,["videoMetadata"]);i!=null&&c(n,["videoMetadata"],i);const r=a(e,["thought"]);r!=null&&c(n,["thought"],r);const o=a(e,["inlineData"]);o!=null&&c(n,["inlineData"],j0(t,o));const s=a(e,["codeExecutionResult"]);s!=null&&c(n,["codeExecutionResult"],s);const l=a(e,["executableCode"]);l!=null&&c(n,["executableCode"],l);const u=a(e,["fileData"]);u!=null&&c(n,["fileData"],u);const d=a(e,["functionCall"]);d!=null&&c(n,["functionCall"],d);const f=a(e,["functionResponse"]);f!=null&&c(n,["functionResponse"],f);const h=a(e,["text"]);return h!=null&&c(n,["text"],h),n}function nw(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ew(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function iw(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>tw(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function Fh(t,e){const n={},i=a(e,["text"]);i!=null&&c(n,["text"],i);const r=a(e,["finished"]);return r!=null&&c(n,["finished"],r),n}function Uh(t,e){const n={},i=a(e,["text"]);i!=null&&c(n,["text"],i);const r=a(e,["finished"]);return r!=null&&c(n,["finished"],r),n}function rw(t,e){const n={},i=a(e,["modelTurn"]);i!=null&&c(n,["modelTurn"],nw(t,i));const r=a(e,["turnComplete"]);r!=null&&c(n,["turnComplete"],r);const o=a(e,["interrupted"]);o!=null&&c(n,["interrupted"],o);const s=a(e,["groundingMetadata"]);s!=null&&c(n,["groundingMetadata"],s);const l=a(e,["generationComplete"]);l!=null&&c(n,["generationComplete"],l);const u=a(e,["inputTranscription"]);u!=null&&c(n,["inputTranscription"],Fh(t,u));const d=a(e,["outputTranscription"]);return d!=null&&c(n,["outputTranscription"],Fh(t,d)),n}function ow(t,e){const n={},i=a(e,["modelTurn"]);i!=null&&c(n,["modelTurn"],iw(t,i));const r=a(e,["turnComplete"]);r!=null&&c(n,["turnComplete"],r);const o=a(e,["interrupted"]);o!=null&&c(n,["interrupted"],o);const s=a(e,["groundingMetadata"]);s!=null&&c(n,["groundingMetadata"],s);const l=a(e,["generationComplete"]);l!=null&&c(n,["generationComplete"],l);const u=a(e,["inputTranscription"]);u!=null&&c(n,["inputTranscription"],Uh(t,u));const d=a(e,["outputTranscription"]);return d!=null&&c(n,["outputTranscription"],Uh(t,d)),n}function sw(t,e){const n={},i=a(e,["id"]);i!=null&&c(n,["id"],i);const r=a(e,["args"]);r!=null&&c(n,["args"],r);const o=a(e,["name"]);return o!=null&&c(n,["name"],o),n}function lw(t,e){const n={},i=a(e,["args"]);i!=null&&c(n,["args"],i);const r=a(e,["name"]);return r!=null&&c(n,["name"],r),n}function aw(t,e){const n={},i=a(e,["functionCalls"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>sw(t,o))),c(n,["functionCalls"],r)}return n}function uw(t,e){const n={},i=a(e,["functionCalls"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>lw(t,o))),c(n,["functionCalls"],r)}return n}function cw(t,e){const n={},i=a(e,["ids"]);return i!=null&&c(n,["ids"],i),n}function dw(t,e){const n={},i=a(e,["ids"]);return i!=null&&c(n,["ids"],i),n}function Fo(t,e){const n={},i=a(e,["modality"]);i!=null&&c(n,["modality"],i);const r=a(e,["tokenCount"]);return r!=null&&c(n,["tokenCount"],r),n}function Uo(t,e){const n={},i=a(e,["modality"]);i!=null&&c(n,["modality"],i);const r=a(e,["tokenCount"]);return r!=null&&c(n,["tokenCount"],r),n}function fw(t,e){const n={},i=a(e,["promptTokenCount"]);i!=null&&c(n,["promptTokenCount"],i);const r=a(e,["cachedContentTokenCount"]);r!=null&&c(n,["cachedContentTokenCount"],r);const o=a(e,["responseTokenCount"]);o!=null&&c(n,["responseTokenCount"],o);const s=a(e,["toolUsePromptTokenCount"]);s!=null&&c(n,["toolUsePromptTokenCount"],s);const l=a(e,["thoughtsTokenCount"]);l!=null&&c(n,["thoughtsTokenCount"],l);const u=a(e,["totalTokenCount"]);u!=null&&c(n,["totalTokenCount"],u);const d=a(e,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>Fo(t,y))),c(n,["promptTokensDetails"],m)}const f=a(e,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>Fo(t,y))),c(n,["cacheTokensDetails"],m)}const h=a(e,["responseTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>Fo(t,y))),c(n,["responseTokensDetails"],m)}const p=a(e,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>Fo(t,y))),c(n,["toolUsePromptTokensDetails"],m)}return n}function hw(t,e){const n={},i=a(e,["promptTokenCount"]);i!=null&&c(n,["promptTokenCount"],i);const r=a(e,["cachedContentTokenCount"]);r!=null&&c(n,["cachedContentTokenCount"],r);const o=a(e,["candidatesTokenCount"]);o!=null&&c(n,["responseTokenCount"],o);const s=a(e,["toolUsePromptTokenCount"]);s!=null&&c(n,["toolUsePromptTokenCount"],s);const l=a(e,["thoughtsTokenCount"]);l!=null&&c(n,["thoughtsTokenCount"],l);const u=a(e,["totalTokenCount"]);u!=null&&c(n,["totalTokenCount"],u);const d=a(e,["promptTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(E=>Uo(t,E))),c(n,["promptTokensDetails"],y)}const f=a(e,["cacheTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>Uo(t,E))),c(n,["cacheTokensDetails"],y)}const h=a(e,["candidatesTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(E=>Uo(t,E))),c(n,["responseTokensDetails"],y)}const p=a(e,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(E=>Uo(t,E))),c(n,["toolUsePromptTokensDetails"],y)}const m=a(e,["trafficType"]);return m!=null&&c(n,["trafficType"],m),n}function pw(t,e){const n={},i=a(e,["timeLeft"]);return i!=null&&c(n,["timeLeft"],i),n}function mw(t,e){const n={},i=a(e,["timeLeft"]);return i!=null&&c(n,["timeLeft"],i),n}function gw(t,e){const n={},i=a(e,["newHandle"]);i!=null&&c(n,["newHandle"],i);const r=a(e,["resumable"]);r!=null&&c(n,["resumable"],r);const o=a(e,["lastConsumedClientMessageIndex"]);return o!=null&&c(n,["lastConsumedClientMessageIndex"],o),n}function yw(t,e){const n={},i=a(e,["newHandle"]);i!=null&&c(n,["newHandle"],i);const r=a(e,["resumable"]);r!=null&&c(n,["resumable"],r);const o=a(e,["lastConsumedClientMessageIndex"]);return o!=null&&c(n,["lastConsumedClientMessageIndex"],o),n}function vw(t,e){const n={};a(e,["setupComplete"])!=null&&c(n,["setupComplete"],Q0());const r=a(e,["serverContent"]);r!=null&&c(n,["serverContent"],rw(t,r));const o=a(e,["toolCall"]);o!=null&&c(n,["toolCall"],aw(t,o));const s=a(e,["toolCallCancellation"]);s!=null&&c(n,["toolCallCancellation"],cw(t,s));const l=a(e,["usageMetadata"]);l!=null&&c(n,["usageMetadata"],fw(t,l));const u=a(e,["goAway"]);u!=null&&c(n,["goAway"],pw(t,u));const d=a(e,["sessionResumptionUpdate"]);return d!=null&&c(n,["sessionResumptionUpdate"],gw(t,d)),n}function _w(t,e){const n={};a(e,["setupComplete"])!=null&&c(n,["setupComplete"],X0());const r=a(e,["serverContent"]);r!=null&&c(n,["serverContent"],ow(t,r));const o=a(e,["toolCall"]);o!=null&&c(n,["toolCall"],uw(t,o));const s=a(e,["toolCallCancellation"]);s!=null&&c(n,["toolCallCancellation"],dw(t,s));const l=a(e,["usageMetadata"]);l!=null&&c(n,["usageMetadata"],hw(t,l));const u=a(e,["goAway"]);u!=null&&c(n,["goAway"],mw(t,u));const d=a(e,["sessionResumptionUpdate"]);return d!=null&&c(n,["sessionResumptionUpdate"],yw(t,d)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cw(t,e){const n={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["data"]);i!=null&&c(n,["data"],i);const r=a(e,["mimeType"]);return r!=null&&c(n,["mimeType"],r),n}function Ew(t,e){const n={};if(a(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=a(e,["thought"]);i!=null&&c(n,["thought"],i);const r=a(e,["inlineData"]);r!=null&&c(n,["inlineData"],Cw(t,r));const o=a(e,["codeExecutionResult"]);o!=null&&c(n,["codeExecutionResult"],o);const s=a(e,["executableCode"]);s!=null&&c(n,["executableCode"],s);const l=a(e,["fileData"]);l!=null&&c(n,["fileData"],l);const u=a(e,["functionCall"]);u!=null&&c(n,["functionCall"],u);const d=a(e,["functionResponse"]);d!=null&&c(n,["functionResponse"],d);const f=a(e,["text"]);return f!=null&&c(n,["text"],f),n}function gl(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ew(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function Tw(t,e){const n={};if(a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(e,["category"]);i!=null&&c(n,["category"],i);const r=a(e,["threshold"]);return r!=null&&c(n,["threshold"],r),n}function Sw(){return{}}function ww(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["dynamicThreshold"]);return r!=null&&c(n,["dynamicThreshold"],r),n}function xw(t,e){const n={},i=a(e,["dynamicRetrievalConfig"]);return i!=null&&c(n,["dynamicRetrievalConfig"],ww(t,i)),n}function Iw(t,e){const n={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");a(e,["googleSearch"])!=null&&c(n,["googleSearch"],Sw());const r=a(e,["googleSearchRetrieval"]);if(r!=null&&c(n,["googleSearchRetrieval"],xw(t,r)),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const o=a(e,["codeExecution"]);o!=null&&c(n,["codeExecution"],o);const s=a(e,["functionDeclarations"]);return s!=null&&c(n,["functionDeclarations"],s),n}function Nw(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["allowedFunctionNames"]);return r!=null&&c(n,["allowedFunctionNames"],r),n}function Rw(t,e){const n={},i=a(e,["functionCallingConfig"]);if(i!=null&&c(n,["functionCallingConfig"],Nw(t,i)),a(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Pw(t,e){const n={},i=a(e,["voiceName"]);return i!=null&&c(n,["voiceName"],i),n}function Aw(t,e){const n={},i=a(e,["prebuiltVoiceConfig"]);return i!=null&&c(n,["prebuiltVoiceConfig"],Pw(t,i)),n}function kw(t,e){const n={},i=a(e,["voiceConfig"]);i!=null&&c(n,["voiceConfig"],Aw(t,i));const r=a(e,["languageCode"]);return r!=null&&c(n,["languageCode"],r),n}function Mw(t,e){const n={},i=a(e,["includeThoughts"]);i!=null&&c(n,["includeThoughts"],i);const r=a(e,["thinkingBudget"]);return r!=null&&c(n,["thinkingBudget"],r),n}function Dw(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],gl(t,Ue(t,r)));const o=a(e,["temperature"]);o!=null&&c(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(i,["topP"],s);const l=a(e,["topK"]);l!=null&&c(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(i,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&c(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&c(i,["logprobs"],p);const m=a(e,["presencePenalty"]);m!=null&&c(i,["presencePenalty"],m);const y=a(e,["frequencyPenalty"]);y!=null&&c(i,["frequencyPenalty"],y);const E=a(e,["seed"]);E!=null&&c(i,["seed"],E);const T=a(e,["responseMimeType"]);T!=null&&c(i,["responseMimeType"],T);const v=a(e,["responseSchema"]);if(v!=null&&c(i,["responseSchema"],py(t,v)),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=a(e,["safetySettings"]);if(n!==void 0&&g!=null){let D=g;Array.isArray(D)&&(D=D.map(ue=>Tw(t,ue))),c(n,["safetySettings"],D)}const _=a(e,["tools"]);if(n!==void 0&&_!=null){let D=pl(t,_);Array.isArray(D)&&(D=D.map(ue=>Iw(t,hl(t,ue)))),c(n,["tools"],D)}const S=a(e,["toolConfig"]);if(n!==void 0&&S!=null&&c(n,["toolConfig"],Rw(t,S)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=a(e,["cachedContent"]);n!==void 0&&I!=null&&c(n,["cachedContent"],vn(t,I));const P=a(e,["responseModalities"]);P!=null&&c(i,["responseModalities"],P);const x=a(e,["mediaResolution"]);x!=null&&c(i,["mediaResolution"],x);const A=a(e,["speechConfig"]);if(A!=null&&c(i,["speechConfig"],kw(t,my(t,A))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=a(e,["thinkingConfig"]);return z!=null&&c(i,["thinkingConfig"],Mw(t,z)),i}function Oh(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=yn(t,r);Array.isArray(s)&&(s=s.map(l=>gl(t,l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["generationConfig"],Dw(t,o,n)),n}function Lw(t,e,n){const i={},r=a(e,["taskType"]);n!==void 0&&r!=null&&c(n,["requests[]","taskType"],r);const o=a(e,["title"]);n!==void 0&&o!=null&&c(n,["requests[]","title"],o);const s=a(e,["outputDimensionality"]);if(n!==void 0&&s!=null&&c(n,["requests[]","outputDimensionality"],s),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Fw(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);r!=null&&c(n,["requests[]","content"],hy(t,r));const o=a(e,["config"]);o!=null&&c(n,["config"],Lw(t,o,n));const s=a(e,["model"]);return s!==void 0&&c(n,["requests[]","model"],ee(t,s)),n}function Uw(t,e,n){const i={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(e,["numberOfImages"]);n!==void 0&&r!=null&&c(n,["parameters","sampleCount"],r);const o=a(e,["aspectRatio"]);n!==void 0&&o!=null&&c(n,["parameters","aspectRatio"],o);const s=a(e,["guidanceScale"]);if(n!==void 0&&s!=null&&c(n,["parameters","guidanceScale"],s),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&c(n,["parameters","safetySetting"],l);const u=a(e,["personGeneration"]);n!==void 0&&u!=null&&c(n,["parameters","personGeneration"],u);const d=a(e,["includeSafetyAttributes"]);n!==void 0&&d!=null&&c(n,["parameters","includeSafetyAttributes"],d);const f=a(e,["includeRaiReason"]);n!==void 0&&f!=null&&c(n,["parameters","includeRaiReason"],f);const h=a(e,["language"]);n!==void 0&&h!=null&&c(n,["parameters","language"],h);const p=a(e,["outputMimeType"]);n!==void 0&&p!=null&&c(n,["parameters","outputOptions","mimeType"],p);const m=a(e,["outputCompressionQuality"]);if(n!==void 0&&m!=null&&c(n,["parameters","outputOptions","compressionQuality"],m),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Ow(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&c(n,["config"],Uw(t,o,n)),n}function Vw(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","name"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function bw(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],vy(t,l)),i}function Bw(t,e){const n={},i=a(e,["config"]);return i!=null&&c(n,["config"],bw(t,i,n)),n}function Hw(t,e,n){const i={},r=a(e,["displayName"]);n!==void 0&&r!=null&&c(n,["displayName"],r);const o=a(e,["description"]);n!==void 0&&o!=null&&c(n,["description"],o);const s=a(e,["defaultCheckpointId"]);return n!==void 0&&s!=null&&c(n,["defaultCheckpointId"],s),i}function Gw(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","name"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],Hw(t,r,n)),n}function zw(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","name"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function Ww(t,e){const n={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function $w(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=yn(t,r);Array.isArray(s)&&(s=s.map(l=>gl(t,l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["config"],Ww(t,o)),n}function qw(t,e){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(e,["imageBytes"]);i!=null&&c(n,["bytesBase64Encoded"],_n(t,i));const r=a(e,["mimeType"]);return r!=null&&c(n,["mimeType"],r),n}function Yw(t,e,n){const i={},r=a(e,["numberOfVideos"]);if(n!==void 0&&r!=null&&c(n,["parameters","sampleCount"],r),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=a(e,["durationSeconds"]);if(n!==void 0&&o!=null&&c(n,["parameters","durationSeconds"],o),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(e,["aspectRatio"]);if(n!==void 0&&s!=null&&c(n,["parameters","aspectRatio"],s),a(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=a(e,["personGeneration"]);if(n!==void 0&&l!=null&&c(n,["parameters","personGeneration"],l),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(e,["negativePrompt"]);if(n!==void 0&&u!=null&&c(n,["parameters","negativePrompt"],u),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Kw(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],qw(t,o));const s=a(e,["config"]);return s!=null&&c(n,["config"],Yw(t,s,n)),n}function Jw(t,e){const n={},i=a(e,["displayName"]);i!=null&&c(n,["displayName"],i);const r=a(e,["data"]);r!=null&&c(n,["data"],r);const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function Qw(t,e){const n={},i=a(e,["videoMetadata"]);i!=null&&c(n,["videoMetadata"],i);const r=a(e,["thought"]);r!=null&&c(n,["thought"],r);const o=a(e,["inlineData"]);o!=null&&c(n,["inlineData"],Jw(t,o));const s=a(e,["codeExecutionResult"]);s!=null&&c(n,["codeExecutionResult"],s);const l=a(e,["executableCode"]);l!=null&&c(n,["executableCode"],l);const u=a(e,["fileData"]);u!=null&&c(n,["fileData"],u);const d=a(e,["functionCall"]);d!=null&&c(n,["functionCall"],d);const f=a(e,["functionResponse"]);f!=null&&c(n,["functionResponse"],f);const h=a(e,["text"]);return h!=null&&c(n,["text"],h),n}function Hi(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Qw(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function Xw(t,e){const n={},i=a(e,["featureSelectionPreference"]);return i!=null&&c(n,["featureSelectionPreference"],i),n}function Zw(t,e){const n={},i=a(e,["method"]);i!=null&&c(n,["method"],i);const r=a(e,["category"]);r!=null&&c(n,["category"],r);const o=a(e,["threshold"]);return o!=null&&c(n,["threshold"],o),n}function jw(){return{}}function ex(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["dynamicThreshold"]);return r!=null&&c(n,["dynamicThreshold"],r),n}function tx(t,e){const n={},i=a(e,["dynamicRetrievalConfig"]);return i!=null&&c(n,["dynamicRetrievalConfig"],ex(t,i)),n}function nx(){return{}}function ix(t,e){const n={},i=a(e,["apiKeyString"]);return i!=null&&c(n,["apiKeyString"],i),n}function rx(t,e){const n={},i=a(e,["apiKeyConfig"]);i!=null&&c(n,["apiKeyConfig"],ix(t,i));const r=a(e,["authType"]);r!=null&&c(n,["authType"],r);const o=a(e,["googleServiceAccountConfig"]);o!=null&&c(n,["googleServiceAccountConfig"],o);const s=a(e,["httpBasicAuthConfig"]);s!=null&&c(n,["httpBasicAuthConfig"],s);const l=a(e,["oauthConfig"]);l!=null&&c(n,["oauthConfig"],l);const u=a(e,["oidcConfig"]);return u!=null&&c(n,["oidcConfig"],u),n}function ox(t,e){const n={},i=a(e,["authConfig"]);return i!=null&&c(n,["authConfig"],rx(t,i)),n}function Ey(t,e){const n={},i=a(e,["retrieval"]);i!=null&&c(n,["retrieval"],i),a(e,["googleSearch"])!=null&&c(n,["googleSearch"],jw());const o=a(e,["googleSearchRetrieval"]);o!=null&&c(n,["googleSearchRetrieval"],tx(t,o)),a(e,["enterpriseWebSearch"])!=null&&c(n,["enterpriseWebSearch"],nx());const l=a(e,["googleMaps"]);l!=null&&c(n,["googleMaps"],ox(t,l));const u=a(e,["codeExecution"]);u!=null&&c(n,["codeExecution"],u);const d=a(e,["functionDeclarations"]);return d!=null&&c(n,["functionDeclarations"],d),n}function sx(t,e){const n={},i=a(e,["mode"]);i!=null&&c(n,["mode"],i);const r=a(e,["allowedFunctionNames"]);return r!=null&&c(n,["allowedFunctionNames"],r),n}function lx(t,e){const n={},i=a(e,["latitude"]);i!=null&&c(n,["latitude"],i);const r=a(e,["longitude"]);return r!=null&&c(n,["longitude"],r),n}function ax(t,e){const n={},i=a(e,["latLng"]);return i!=null&&c(n,["latLng"],lx(t,i)),n}function ux(t,e){const n={},i=a(e,["functionCallingConfig"]);i!=null&&c(n,["functionCallingConfig"],sx(t,i));const r=a(e,["retrievalConfig"]);return r!=null&&c(n,["retrievalConfig"],ax(t,r)),n}function cx(t,e){const n={},i=a(e,["voiceName"]);return i!=null&&c(n,["voiceName"],i),n}function dx(t,e){const n={},i=a(e,["prebuiltVoiceConfig"]);return i!=null&&c(n,["prebuiltVoiceConfig"],cx(t,i)),n}function fx(t,e){const n={},i=a(e,["voiceConfig"]);i!=null&&c(n,["voiceConfig"],dx(t,i));const r=a(e,["languageCode"]);return r!=null&&c(n,["languageCode"],r),n}function hx(t,e){const n={},i=a(e,["includeThoughts"]);i!=null&&c(n,["includeThoughts"],i);const r=a(e,["thinkingBudget"]);return r!=null&&c(n,["thinkingBudget"],r),n}function px(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Hi(t,Ue(t,r)));const o=a(e,["temperature"]);o!=null&&c(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(i,["topP"],s);const l=a(e,["topK"]);l!=null&&c(i,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(i,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(i,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&c(i,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&c(i,["logprobs"],p);const m=a(e,["presencePenalty"]);m!=null&&c(i,["presencePenalty"],m);const y=a(e,["frequencyPenalty"]);y!=null&&c(i,["frequencyPenalty"],y);const E=a(e,["seed"]);E!=null&&c(i,["seed"],E);const T=a(e,["responseMimeType"]);T!=null&&c(i,["responseMimeType"],T);const v=a(e,["responseSchema"]);v!=null&&c(i,["responseSchema"],py(t,v));const g=a(e,["routingConfig"]);g!=null&&c(i,["routingConfig"],g);const _=a(e,["modelSelectionConfig"]);_!=null&&c(i,["modelConfig"],Xw(t,_));const S=a(e,["safetySettings"]);if(n!==void 0&&S!=null){let Qe=S;Array.isArray(Qe)&&(Qe=Qe.map(Yi=>Zw(t,Yi))),c(n,["safetySettings"],Qe)}const I=a(e,["tools"]);if(n!==void 0&&I!=null){let Qe=pl(t,I);Array.isArray(Qe)&&(Qe=Qe.map(Yi=>Ey(t,hl(t,Yi)))),c(n,["tools"],Qe)}const P=a(e,["toolConfig"]);n!==void 0&&P!=null&&c(n,["toolConfig"],ux(t,P));const x=a(e,["labels"]);n!==void 0&&x!=null&&c(n,["labels"],x);const A=a(e,["cachedContent"]);n!==void 0&&A!=null&&c(n,["cachedContent"],vn(t,A));const z=a(e,["responseModalities"]);z!=null&&c(i,["responseModalities"],z);const D=a(e,["mediaResolution"]);D!=null&&c(i,["mediaResolution"],D);const ue=a(e,["speechConfig"]);ue!=null&&c(i,["speechConfig"],fx(t,my(t,ue)));const Vt=a(e,["audioTimestamp"]);Vt!=null&&c(i,["audioTimestamp"],Vt);const bt=a(e,["thinkingConfig"]);return bt!=null&&c(i,["thinkingConfig"],hx(t,bt)),i}function Vh(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=yn(t,r);Array.isArray(s)&&(s=s.map(l=>Hi(t,l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["generationConfig"],px(t,o,n)),n}function mx(t,e,n){const i={},r=a(e,["taskType"]);n!==void 0&&r!=null&&c(n,["instances[]","task_type"],r);const o=a(e,["title"]);n!==void 0&&o!=null&&c(n,["instances[]","title"],o);const s=a(e,["outputDimensionality"]);n!==void 0&&s!=null&&c(n,["parameters","outputDimensionality"],s);const l=a(e,["mimeType"]);n!==void 0&&l!=null&&c(n,["instances[]","mimeType"],l);const u=a(e,["autoTruncate"]);return n!==void 0&&u!=null&&c(n,["parameters","autoTruncate"],u),i}function gx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);r!=null&&c(n,["instances[]","content"],hy(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],mx(t,o,n)),n}function yx(t,e,n){const i={},r=a(e,["outputGcsUri"]);n!==void 0&&r!=null&&c(n,["parameters","storageUri"],r);const o=a(e,["negativePrompt"]);n!==void 0&&o!=null&&c(n,["parameters","negativePrompt"],o);const s=a(e,["numberOfImages"]);n!==void 0&&s!=null&&c(n,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);n!==void 0&&l!=null&&c(n,["parameters","aspectRatio"],l);const u=a(e,["guidanceScale"]);n!==void 0&&u!=null&&c(n,["parameters","guidanceScale"],u);const d=a(e,["seed"]);n!==void 0&&d!=null&&c(n,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&c(n,["parameters","safetySetting"],f);const h=a(e,["personGeneration"]);n!==void 0&&h!=null&&c(n,["parameters","personGeneration"],h);const p=a(e,["includeSafetyAttributes"]);n!==void 0&&p!=null&&c(n,["parameters","includeSafetyAttributes"],p);const m=a(e,["includeRaiReason"]);n!==void 0&&m!=null&&c(n,["parameters","includeRaiReason"],m);const y=a(e,["language"]);n!==void 0&&y!=null&&c(n,["parameters","language"],y);const E=a(e,["outputMimeType"]);n!==void 0&&E!=null&&c(n,["parameters","outputOptions","mimeType"],E);const T=a(e,["outputCompressionQuality"]);n!==void 0&&T!=null&&c(n,["parameters","outputOptions","compressionQuality"],T);const v=a(e,["addWatermark"]);n!==void 0&&v!=null&&c(n,["parameters","addWatermark"],v);const g=a(e,["enhancePrompt"]);return n!==void 0&&g!=null&&c(n,["parameters","enhancePrompt"],g),i}function vx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&c(n,["config"],yx(t,o,n)),n}function bc(t,e){const n={},i=a(e,["gcsUri"]);i!=null&&c(n,["gcsUri"],i);const r=a(e,["imageBytes"]);r!=null&&c(n,["bytesBase64Encoded"],_n(t,r));const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function _x(t,e){const n={},i=a(e,["maskMode"]);i!=null&&c(n,["maskMode"],i);const r=a(e,["segmentationClasses"]);r!=null&&c(n,["maskClasses"],r);const o=a(e,["maskDilation"]);return o!=null&&c(n,["dilation"],o),n}function Cx(t,e){const n={},i=a(e,["controlType"]);i!=null&&c(n,["controlType"],i);const r=a(e,["enableControlImageComputation"]);return r!=null&&c(n,["computeControl"],r),n}function Ex(t,e){const n={},i=a(e,["styleDescription"]);return i!=null&&c(n,["styleDescription"],i),n}function Tx(t,e){const n={},i=a(e,["subjectType"]);i!=null&&c(n,["subjectType"],i);const r=a(e,["subjectDescription"]);return r!=null&&c(n,["subjectDescription"],r),n}function Sx(t,e){const n={},i=a(e,["referenceImage"]);i!=null&&c(n,["referenceImage"],bc(t,i));const r=a(e,["referenceId"]);r!=null&&c(n,["referenceId"],r);const o=a(e,["referenceType"]);o!=null&&c(n,["referenceType"],o);const s=a(e,["maskImageConfig"]);s!=null&&c(n,["maskImageConfig"],_x(t,s));const l=a(e,["controlImageConfig"]);l!=null&&c(n,["controlImageConfig"],Cx(t,l));const u=a(e,["styleImageConfig"]);u!=null&&c(n,["styleImageConfig"],Ex(t,u));const d=a(e,["subjectImageConfig"]);return d!=null&&c(n,["subjectImageConfig"],Tx(t,d)),n}function wx(t,e,n){const i={},r=a(e,["outputGcsUri"]);n!==void 0&&r!=null&&c(n,["parameters","storageUri"],r);const o=a(e,["negativePrompt"]);n!==void 0&&o!=null&&c(n,["parameters","negativePrompt"],o);const s=a(e,["numberOfImages"]);n!==void 0&&s!=null&&c(n,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);n!==void 0&&l!=null&&c(n,["parameters","aspectRatio"],l);const u=a(e,["guidanceScale"]);n!==void 0&&u!=null&&c(n,["parameters","guidanceScale"],u);const d=a(e,["seed"]);n!==void 0&&d!=null&&c(n,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&c(n,["parameters","safetySetting"],f);const h=a(e,["personGeneration"]);n!==void 0&&h!=null&&c(n,["parameters","personGeneration"],h);const p=a(e,["includeSafetyAttributes"]);n!==void 0&&p!=null&&c(n,["parameters","includeSafetyAttributes"],p);const m=a(e,["includeRaiReason"]);n!==void 0&&m!=null&&c(n,["parameters","includeRaiReason"],m);const y=a(e,["language"]);n!==void 0&&y!=null&&c(n,["parameters","language"],y);const E=a(e,["outputMimeType"]);n!==void 0&&E!=null&&c(n,["parameters","outputOptions","mimeType"],E);const T=a(e,["outputCompressionQuality"]);n!==void 0&&T!=null&&c(n,["parameters","outputOptions","compressionQuality"],T);const v=a(e,["editMode"]);n!==void 0&&v!=null&&c(n,["parameters","editMode"],v);const g=a(e,["baseSteps"]);return n!==void 0&&g!=null&&c(n,["parameters","editConfig","baseSteps"],g),i}function xx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Sx(t,u))),c(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&c(n,["config"],wx(t,s,n)),n}function Ix(t,e,n){const i={},r=a(e,["includeRaiReason"]);n!==void 0&&r!=null&&c(n,["parameters","includeRaiReason"],r);const o=a(e,["outputMimeType"]);n!==void 0&&o!=null&&c(n,["parameters","outputOptions","mimeType"],o);const s=a(e,["outputCompressionQuality"]);n!==void 0&&s!=null&&c(n,["parameters","outputOptions","compressionQuality"],s);const l=a(e,["numberOfImages"]);n!==void 0&&l!=null&&c(n,["parameters","sampleCount"],l);const u=a(e,["mode"]);return n!==void 0&&u!=null&&c(n,["parameters","mode"],u),i}function Nx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["image"]);r!=null&&c(n,["instances[0]","image"],bc(t,r));const o=a(e,["upscaleFactor"]);o!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&c(n,["config"],Ix(t,s,n)),n}function Rx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","name"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function Px(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],vy(t,l)),i}function Ax(t,e){const n={},i=a(e,["config"]);return i!=null&&c(n,["config"],Px(t,i,n)),n}function kx(t,e,n){const i={},r=a(e,["displayName"]);n!==void 0&&r!=null&&c(n,["displayName"],r);const o=a(e,["description"]);n!==void 0&&o!=null&&c(n,["description"],o);const s=a(e,["defaultCheckpointId"]);return n!==void 0&&s!=null&&c(n,["defaultCheckpointId"],s),i}function Mx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],kx(t,r,n)),n}function Dx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","name"],ee(t,i));const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function Lx(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Hi(t,Ue(t,r)));const o=a(e,["tools"]);if(n!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Ey(t,u))),c(n,["tools"],l)}const s=a(e,["generationConfig"]);return n!==void 0&&s!=null&&c(n,["generationConfig"],s),i}function Fx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=yn(t,r);Array.isArray(s)&&(s=s.map(l=>Hi(t,l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["config"],Lx(t,o,n)),n}function Ux(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=yn(t,r);Array.isArray(s)&&(s=s.map(l=>Hi(t,l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["config"],o),n}function Ox(t,e,n){const i={},r=a(e,["numberOfVideos"]);n!==void 0&&r!=null&&c(n,["parameters","sampleCount"],r);const o=a(e,["outputGcsUri"]);n!==void 0&&o!=null&&c(n,["parameters","storageUri"],o);const s=a(e,["fps"]);n!==void 0&&s!=null&&c(n,["parameters","fps"],s);const l=a(e,["durationSeconds"]);n!==void 0&&l!=null&&c(n,["parameters","durationSeconds"],l);const u=a(e,["seed"]);n!==void 0&&u!=null&&c(n,["parameters","seed"],u);const d=a(e,["aspectRatio"]);n!==void 0&&d!=null&&c(n,["parameters","aspectRatio"],d);const f=a(e,["resolution"]);n!==void 0&&f!=null&&c(n,["parameters","resolution"],f);const h=a(e,["personGeneration"]);n!==void 0&&h!=null&&c(n,["parameters","personGeneration"],h);const p=a(e,["pubsubTopic"]);n!==void 0&&p!=null&&c(n,["parameters","pubsubTopic"],p);const m=a(e,["negativePrompt"]);n!==void 0&&m!=null&&c(n,["parameters","negativePrompt"],m);const y=a(e,["enhancePrompt"]);return n!==void 0&&y!=null&&c(n,["parameters","enhancePrompt"],y),i}function Vx(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],bc(t,o));const s=a(e,["config"]);return s!=null&&c(n,["config"],Ox(t,s,n)),n}function bx(t,e){const n={},i=a(e,["data"]);i!=null&&c(n,["data"],i);const r=a(e,["mimeType"]);return r!=null&&c(n,["mimeType"],r),n}function Bx(t,e){const n={},i=a(e,["thought"]);i!=null&&c(n,["thought"],i);const r=a(e,["inlineData"]);r!=null&&c(n,["inlineData"],bx(t,r));const o=a(e,["codeExecutionResult"]);o!=null&&c(n,["codeExecutionResult"],o);const s=a(e,["executableCode"]);s!=null&&c(n,["executableCode"],s);const l=a(e,["fileData"]);l!=null&&c(n,["fileData"],l);const u=a(e,["functionCall"]);u!=null&&c(n,["functionCall"],u);const d=a(e,["functionResponse"]);d!=null&&c(n,["functionResponse"],d);const f=a(e,["text"]);return f!=null&&c(n,["text"],f),n}function Hx(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Bx(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function Gx(t,e){const n={},i=a(e,["citationSources"]);return i!=null&&c(n,["citations"],i),n}function zx(t,e){const n={},i=a(e,["content"]);i!=null&&c(n,["content"],Hx(t,i));const r=a(e,["citationMetadata"]);r!=null&&c(n,["citationMetadata"],Gx(t,r));const o=a(e,["tokenCount"]);o!=null&&c(n,["tokenCount"],o);const s=a(e,["finishReason"]);s!=null&&c(n,["finishReason"],s);const l=a(e,["avgLogprobs"]);l!=null&&c(n,["avgLogprobs"],l);const u=a(e,["groundingMetadata"]);u!=null&&c(n,["groundingMetadata"],u);const d=a(e,["index"]);d!=null&&c(n,["index"],d);const f=a(e,["logprobsResult"]);f!=null&&c(n,["logprobsResult"],f);const h=a(e,["safetyRatings"]);return h!=null&&c(n,["safetyRatings"],h),n}function bh(t,e){const n={},i=a(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>zx(t,u))),c(n,["candidates"],l)}const r=a(e,["modelVersion"]);r!=null&&c(n,["modelVersion"],r);const o=a(e,["promptFeedback"]);o!=null&&c(n,["promptFeedback"],o);const s=a(e,["usageMetadata"]);return s!=null&&c(n,["usageMetadata"],s),n}function Wx(t,e){const n={},i=a(e,["values"]);return i!=null&&c(n,["values"],i),n}function $x(){return{}}function qx(t,e){const n={},i=a(e,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Wx(t,s))),c(n,["embeddings"],o)}return a(e,["metadata"])!=null&&c(n,["metadata"],$x()),n}function Yx(t,e){const n={},i=a(e,["bytesBase64Encoded"]);i!=null&&c(n,["imageBytes"],_n(t,i));const r=a(e,["mimeType"]);return r!=null&&c(n,["mimeType"],r),n}function Ty(t,e){const n={},i=a(e,["safetyAttributes","categories"]);i!=null&&c(n,["categories"],i);const r=a(e,["safetyAttributes","scores"]);r!=null&&c(n,["scores"],r);const o=a(e,["contentType"]);return o!=null&&c(n,["contentType"],o),n}function Kx(t,e){const n={},i=a(e,["_self"]);i!=null&&c(n,["image"],Yx(t,i));const r=a(e,["raiFilteredReason"]);r!=null&&c(n,["raiFilteredReason"],r);const o=a(e,["_self"]);return o!=null&&c(n,["safetyAttributes"],Ty(t,o)),n}function Jx(t,e){const n={},i=a(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Kx(t,s))),c(n,["generatedImages"],o)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&c(n,["positivePromptSafetyAttributes"],Ty(t,r)),n}function Qx(t,e){const n={},i=a(e,["baseModel"]);i!=null&&c(n,["baseModel"],i);const r=a(e,["createTime"]);r!=null&&c(n,["createTime"],r);const o=a(e,["updateTime"]);return o!=null&&c(n,["updateTime"],o),n}function yu(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["displayName"]);r!=null&&c(n,["displayName"],r);const o=a(e,["description"]);o!=null&&c(n,["description"],o);const s=a(e,["version"]);s!=null&&c(n,["version"],s);const l=a(e,["_self"]);l!=null&&c(n,["tunedModelInfo"],Qx(t,l));const u=a(e,["inputTokenLimit"]);u!=null&&c(n,["inputTokenLimit"],u);const d=a(e,["outputTokenLimit"]);d!=null&&c(n,["outputTokenLimit"],d);const f=a(e,["supportedGenerationMethods"]);return f!=null&&c(n,["supportedActions"],f),n}function Xx(t,e){const n={},i=a(e,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const r=a(e,["_self"]);if(r!=null){let o=_y(t,r);Array.isArray(o)&&(o=o.map(s=>yu(t,s))),c(n,["models"],o)}return n}function Zx(){return{}}function jx(t,e){const n={},i=a(e,["totalTokens"]);i!=null&&c(n,["totalTokens"],i);const r=a(e,["cachedContentTokenCount"]);return r!=null&&c(n,["cachedContentTokenCount"],r),n}function eI(t,e){const n={},i=a(e,["video","uri"]);i!=null&&c(n,["uri"],i);const r=a(e,["video","encodedVideo"]);r!=null&&c(n,["videoBytes"],_n(t,r));const o=a(e,["encoding"]);return o!=null&&c(n,["mimeType"],o),n}function tI(t,e){const n={},i=a(e,["_self"]);return i!=null&&c(n,["video"],eI(t,i)),n}function nI(t,e){const n={},i=a(e,["generatedSamples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>tI(t,l))),c(n,["generatedVideos"],s)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(n,["raiMediaFilteredCount"],r);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function iI(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["metadata"]);r!=null&&c(n,["metadata"],r);const o=a(e,["done"]);o!=null&&c(n,["done"],o);const s=a(e,["error"]);s!=null&&c(n,["error"],s);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(n,["response"],nI(t,l)),n}function rI(t,e){const n={},i=a(e,["displayName"]);i!=null&&c(n,["displayName"],i);const r=a(e,["data"]);r!=null&&c(n,["data"],r);const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function oI(t,e){const n={},i=a(e,["videoMetadata"]);i!=null&&c(n,["videoMetadata"],i);const r=a(e,["thought"]);r!=null&&c(n,["thought"],r);const o=a(e,["inlineData"]);o!=null&&c(n,["inlineData"],rI(t,o));const s=a(e,["codeExecutionResult"]);s!=null&&c(n,["codeExecutionResult"],s);const l=a(e,["executableCode"]);l!=null&&c(n,["executableCode"],l);const u=a(e,["fileData"]);u!=null&&c(n,["fileData"],u);const d=a(e,["functionCall"]);d!=null&&c(n,["functionCall"],d);const f=a(e,["functionResponse"]);f!=null&&c(n,["functionResponse"],f);const h=a(e,["text"]);return h!=null&&c(n,["text"],h),n}function sI(t,e){const n={},i=a(e,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>oI(t,s))),c(n,["parts"],o)}const r=a(e,["role"]);return r!=null&&c(n,["role"],r),n}function lI(t,e){const n={},i=a(e,["citations"]);return i!=null&&c(n,["citations"],i),n}function aI(t,e){const n={},i=a(e,["content"]);i!=null&&c(n,["content"],sI(t,i));const r=a(e,["citationMetadata"]);r!=null&&c(n,["citationMetadata"],lI(t,r));const o=a(e,["finishMessage"]);o!=null&&c(n,["finishMessage"],o);const s=a(e,["finishReason"]);s!=null&&c(n,["finishReason"],s);const l=a(e,["avgLogprobs"]);l!=null&&c(n,["avgLogprobs"],l);const u=a(e,["groundingMetadata"]);u!=null&&c(n,["groundingMetadata"],u);const d=a(e,["index"]);d!=null&&c(n,["index"],d);const f=a(e,["logprobsResult"]);f!=null&&c(n,["logprobsResult"],f);const h=a(e,["safetyRatings"]);return h!=null&&c(n,["safetyRatings"],h),n}function Bh(t,e){const n={},i=a(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>aI(t,f))),c(n,["candidates"],d)}const r=a(e,["createTime"]);r!=null&&c(n,["createTime"],r);const o=a(e,["responseId"]);o!=null&&c(n,["responseId"],o);const s=a(e,["modelVersion"]);s!=null&&c(n,["modelVersion"],s);const l=a(e,["promptFeedback"]);l!=null&&c(n,["promptFeedback"],l);const u=a(e,["usageMetadata"]);return u!=null&&c(n,["usageMetadata"],u),n}function uI(t,e){const n={},i=a(e,["truncated"]);i!=null&&c(n,["truncated"],i);const r=a(e,["token_count"]);return r!=null&&c(n,["tokenCount"],r),n}function cI(t,e){const n={},i=a(e,["values"]);i!=null&&c(n,["values"],i);const r=a(e,["statistics"]);return r!=null&&c(n,["statistics"],uI(t,r)),n}function dI(t,e){const n={},i=a(e,["billableCharacterCount"]);return i!=null&&c(n,["billableCharacterCount"],i),n}function fI(t,e){const n={},i=a(e,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>cI(t,s))),c(n,["embeddings"],o)}const r=a(e,["metadata"]);return r!=null&&c(n,["metadata"],dI(t,r)),n}function hI(t,e){const n={},i=a(e,["gcsUri"]);i!=null&&c(n,["gcsUri"],i);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(n,["imageBytes"],_n(t,r));const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function Sy(t,e){const n={},i=a(e,["safetyAttributes","categories"]);i!=null&&c(n,["categories"],i);const r=a(e,["safetyAttributes","scores"]);r!=null&&c(n,["scores"],r);const o=a(e,["contentType"]);return o!=null&&c(n,["contentType"],o),n}function Bc(t,e){const n={},i=a(e,["_self"]);i!=null&&c(n,["image"],hI(t,i));const r=a(e,["raiFilteredReason"]);r!=null&&c(n,["raiFilteredReason"],r);const o=a(e,["_self"]);o!=null&&c(n,["safetyAttributes"],Sy(t,o));const s=a(e,["prompt"]);return s!=null&&c(n,["enhancedPrompt"],s),n}function pI(t,e){const n={},i=a(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Bc(t,s))),c(n,["generatedImages"],o)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&c(n,["positivePromptSafetyAttributes"],Sy(t,r)),n}function mI(t,e){const n={},i=a(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Bc(t,o))),c(n,["generatedImages"],r)}return n}function gI(t,e){const n={},i=a(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Bc(t,o))),c(n,["generatedImages"],r)}return n}function yI(t,e){const n={},i=a(e,["endpoint"]);i!=null&&c(n,["name"],i);const r=a(e,["deployedModelId"]);return r!=null&&c(n,["deployedModelId"],r),n}function vI(t,e){const n={},i=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&c(n,["baseModel"],i);const r=a(e,["createTime"]);r!=null&&c(n,["createTime"],r);const o=a(e,["updateTime"]);return o!=null&&c(n,["updateTime"],o),n}function _I(t,e){const n={},i=a(e,["checkpointId"]);i!=null&&c(n,["checkpointId"],i);const r=a(e,["epoch"]);r!=null&&c(n,["epoch"],r);const o=a(e,["step"]);return o!=null&&c(n,["step"],o),n}function vu(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["displayName"]);r!=null&&c(n,["displayName"],r);const o=a(e,["description"]);o!=null&&c(n,["description"],o);const s=a(e,["versionId"]);s!=null&&c(n,["version"],s);const l=a(e,["deployedModels"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>yI(t,m))),c(n,["endpoints"],p)}const u=a(e,["labels"]);u!=null&&c(n,["labels"],u);const d=a(e,["_self"]);d!=null&&c(n,["tunedModelInfo"],vI(t,d));const f=a(e,["defaultCheckpointId"]);f!=null&&c(n,["defaultCheckpointId"],f);const h=a(e,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>_I(t,m))),c(n,["checkpoints"],p)}return n}function CI(t,e){const n={},i=a(e,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const r=a(e,["_self"]);if(r!=null){let o=_y(t,r);Array.isArray(o)&&(o=o.map(s=>vu(t,s))),c(n,["models"],o)}return n}function EI(){return{}}function TI(t,e){const n={},i=a(e,["totalTokens"]);return i!=null&&c(n,["totalTokens"],i),n}function SI(t,e){const n={},i=a(e,["tokensInfo"]);return i!=null&&c(n,["tokensInfo"],i),n}function wI(t,e){const n={},i=a(e,["gcsUri"]);i!=null&&c(n,["uri"],i);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(n,["videoBytes"],_n(t,r));const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function xI(t,e){const n={},i=a(e,["_self"]);return i!=null&&c(n,["video"],wI(t,i)),n}function II(t,e){const n={},i=a(e,["videos"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>xI(t,l))),c(n,["generatedVideos"],s)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(n,["raiMediaFilteredCount"],r);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function NI(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["metadata"]);r!=null&&c(n,["metadata"],r);const o=a(e,["done"]);o!=null&&c(n,["done"],o);const s=a(e,["error"]);s!=null&&c(n,["error"],s);const l=a(e,["response"]);return l!=null&&c(n,["response"],II(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PI(t,e,n){const i=new YS;let r;if(n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),t.isVertexAI()){const o=_w(t,r);Object.assign(i,o)}else{const o=vw(t,r);Object.assign(i,o)}e(i)}class AI{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i,r,o;const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let u;const d=LI(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())u=`${s}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const S=this.apiClient.getApiKey();u=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${S}`}let f=()=>{};const h=new Promise(S=>{f=S}),p=e.callbacks,m=function(){var S;(S=p==null?void 0:p.onopen)===null||S===void 0||S.call(p),f({})},y=this.apiClient,E={onopen:m,onmessage:S=>{PI(y,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(S){}},T=this.webSocketFactory.create(u,DI(d),E);T.connect(),await h;let v=ee(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){const S=this.apiClient.getProject(),I=this.apiClient.getLocation();v=`projects/${S}/locations/${I}/`+v}let g={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ps.AUDIO]}:e.config.responseModalities=[Ps.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _={model:v,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?g=z0(this.apiClient,_):g=G0(this.apiClient,_),delete g.config,T.send(JSON.stringify(g)),new MI(T,this.apiClient)}}const kI={turnComplete:!0};class MI{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=yn(e,n.turns),e.isVertexAI()?i=i.map(r=>Hi(e,r)):i=i.map(r=>gl(e,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(RI)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},kI),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:J0(this.apiClient,e)}:n={realtimeInput:K0(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function DI(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function LI(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FI extends lo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const s=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((r=u==null?void 0:u.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o}:l={generatedImages:s},l}),this.list=async n=>{var i;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ml(ki.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)}}async generateContentInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Vh(this.apiClient,e);return l=F("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Bh(this.apiClient,f),p=new Lo;return Object.assign(p,h),p})}else{const d=Oh(this.apiClient,e);return l=F("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=bh(this.apiClient,f),p=new Lo;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Vh(this.apiClient,e);l=F("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return s=f.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return As(this,arguments,function*(){var p,m,y,E;try{for(var T=!0,v=mu(h),g;g=yield Ie(v.next()),p=g.done,!p;T=!0){E=g.value,T=!1;const S=Bh(f,yield Ie(E.json())),I=new Lo;Object.assign(I,S),yield yield Ie(I)}}catch(_){m={error:_}}finally{try{!T&&!p&&(y=v.return)&&(yield Ie(y.call(v)))}finally{if(m)throw m.error}}})})}else{const d=Oh(this.apiClient,e);l=F("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return s=f.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return As(this,arguments,function*(){var p,m,y,E;try{for(var T=!0,v=mu(h),g;g=yield Ie(v.next()),p=g.done,!p;T=!0){E=g.value,T=!1;const S=bh(f,yield Ie(E.json())),I=new Lo;Object.assign(I,S),yield yield Ie(I)}}catch(_){m={error:_}}finally{try{!T&&!p&&(y=v.return)&&(yield Ie(y.call(v)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=gx(this.apiClient,e);return l=F("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=fI(this.apiClient,f),p=new wh;return Object.assign(p,h),p})}else{const d=Fw(this.apiClient,e);return l=F("{model}:batchEmbedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=qx(this.apiClient,f),p=new wh;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=vx(this.apiClient,e);return l=F("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=pI(this.apiClient,f),p=new xh;return Object.assign(p,h),p})}else{const d=Ow(this.apiClient,e);return l=F("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Jx(this.apiClient,f),p=new xh;return Object.assign(p,h),p})}}async editImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=xx(this.apiClient,e);return o=F("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const d=mI(this.apiClient,u),f=new HS;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=Nx(this.apiClient,e);return o=F("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const d=gI(this.apiClient,u),f=new GS;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Rx(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>vu(this.apiClient,f))}else{const d=Vw(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>yu(this.apiClient,f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Ax(this.apiClient,e);return l=F("{models_url}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=CI(this.apiClient,f),p=new Ih;return Object.assign(p,h),p})}else{const d=Bw(this.apiClient,e);return l=F("{models_url}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Xx(this.apiClient,f),p=new Ih;return Object.assign(p,h),p})}}async update(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Mx(this.apiClient,e);return l=F("{model}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>vu(this.apiClient,f))}else{const d=Gw(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>yu(this.apiClient,f))}}async delete(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Dx(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(()=>{const f=EI(),h=new Nh;return Object.assign(h,f),h})}else{const d=zw(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(()=>{const f=Zx(),h=new Nh;return Object.assign(h,f),h})}}async countTokens(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Fx(this.apiClient,e);return l=F("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=TI(this.apiClient,f),p=new Rh;return Object.assign(p,h),p})}else{const d=$w(this.apiClient,e);return l=F("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=jx(this.apiClient,f),p=new Rh;return Object.assign(p,h),p})}}async computeTokens(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=Ux(this.apiClient,e);return o=F("{model}:computeTokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const d=SI(this.apiClient,u),f=new zS;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Vx(this.apiClient,e);return l=F("{model}:predictLongRunning",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>NI(this.apiClient,f))}else{const d=Kw(this.apiClient,e);return l=F("{model}:predictLongRunning",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>iI(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UI(t,e){const n={},i=a(e,["operationName"]);i!=null&&c(n,["_url","operationName"],i);const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function OI(t,e){const n={},i=a(e,["operationName"]);i!=null&&c(n,["_url","operationName"],i);const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function VI(t,e){const n={},i=a(e,["operationName"]);i!=null&&c(n,["operationName"],i);const r=a(e,["resourceName"]);r!=null&&c(n,["_url","resourceName"],r);const o=a(e,["config"]);return o!=null&&c(n,["config"],o),n}function bI(t,e){const n={},i=a(e,["video","uri"]);i!=null&&c(n,["uri"],i);const r=a(e,["video","encodedVideo"]);r!=null&&c(n,["videoBytes"],_n(t,r));const o=a(e,["encoding"]);return o!=null&&c(n,["mimeType"],o),n}function BI(t,e){const n={},i=a(e,["_self"]);return i!=null&&c(n,["video"],bI(t,i)),n}function HI(t,e){const n={},i=a(e,["generatedSamples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>BI(t,l))),c(n,["generatedVideos"],s)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(n,["raiMediaFilteredCount"],r);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function GI(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["metadata"]);r!=null&&c(n,["metadata"],r);const o=a(e,["done"]);o!=null&&c(n,["done"],o);const s=a(e,["error"]);s!=null&&c(n,["error"],s);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(n,["response"],HI(t,l)),n}function zI(t,e){const n={},i=a(e,["gcsUri"]);i!=null&&c(n,["uri"],i);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(n,["videoBytes"],_n(t,r));const o=a(e,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function WI(t,e){const n={},i=a(e,["_self"]);return i!=null&&c(n,["video"],zI(t,i)),n}function $I(t,e){const n={},i=a(e,["videos"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>WI(t,l))),c(n,["generatedVideos"],s)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(n,["raiMediaFilteredCount"],r);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function Hh(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["metadata"]);r!=null&&c(n,["metadata"],r);const o=a(e,["done"]);o!=null&&c(n,["done"],o);const s=a(e,["error"]);s!=null&&c(n,["error"],s);const l=a(e,["response"]);return l!=null&&c(n,["response"],$I(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qI extends lo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;return i&&"httpOptions"in i&&(o=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=OI(this.apiClient,e);return l=F("{operationName}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Hh(this.apiClient,f))}else{const d=UI(this.apiClient,e);return l=F("{operationName}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>GI(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=VI(this.apiClient,e);return o=F("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>Hh(this.apiClient,u))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YI="Content-Type",KI="X-Server-Timeout",JI="User-Agent",QI="x-goog-api-client",XI="0.14.1",ZI=`google-genai-sdk/${XI}`,jI="v1beta1",eN="v1beta",Gh=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class wy extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class _u extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class tN{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:jI,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:eN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))r.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,o=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await zh(r),new pu(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await zh(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return As(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:u}=yield Ie(r.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(u);try{const h=JSON.parse(d);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,y=p.code,E=`got status: ${m}. ${JSON.stringify(h)}`;if(y>=400&&y<500)throw new wy(E);if(y>=500&&y<600)throw new _u(E)}}catch(h){const p=h;if(p.name==="ClientError"||p.name==="ServerError")throw h}s+=d;let f=s.match(Gh);for(;f;){const h=f[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new pu(p)),s=s.slice(f[0].length),f=s.match(Gh)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=ZI+" "+this.clientOptions.userAgentExtra;return e[JI]=n,e[QI]=n,e[YI]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(KI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const u=await this.fetchUploadUrl(r,n);return o.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:F("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:r});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(i=s==null?void 0:s.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function zh(t){var e;if(t===void 0)throw new _u("response is undefined");if(!t.ok){const n=t.status,i=t.statusText;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=`got status: ${n} ${i}. ${JSON.stringify(r)}`;throw n>=400&&n<500?new wy(o):n>=500&&n<600?new _u(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nN(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],i);const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function iN(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);return n!==void 0&&s!=null&&c(n,["_query","filter"],s),i}function rN(t,e){const n={},i=a(e,["config"]);return i!=null&&c(n,["config"],iN(t,i,n)),n}function oN(t,e){const n={},i=a(e,["textInput"]);i!=null&&c(n,["textInput"],i);const r=a(e,["output"]);return r!=null&&c(n,["output"],r),n}function sN(t,e){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(e,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>oN(t,o))),c(n,["examples","examples"],r)}return n}function lN(t,e,n){const i={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(e,["tunedModelDisplayName"]);if(n!==void 0&&r!=null&&c(n,["displayName"],r),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(e,["epochCount"]);n!==void 0&&o!=null&&c(n,["tuningTask","hyperparameters","epochCount"],o);const s=a(e,["learningRateMultiplier"]);if(s!=null&&c(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(e,["batchSize"]);n!==void 0&&l!=null&&c(n,["tuningTask","hyperparameters","batchSize"],l);const u=a(e,["learningRate"]);return n!==void 0&&u!=null&&c(n,["tuningTask","hyperparameters","learningRate"],u),i}function aN(t,e){const n={},i=a(e,["baseModel"]);i!=null&&c(n,["baseModel"],i);const r=a(e,["trainingDataset"]);r!=null&&c(n,["tuningTask","trainingData"],sN(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],lN(t,o,n)),n}function uN(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],i);const r=a(e,["config"]);return r!=null&&c(n,["config"],r),n}function cN(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);return n!==void 0&&s!=null&&c(n,["_query","filter"],s),i}function dN(t,e){const n={},i=a(e,["config"]);return i!=null&&c(n,["config"],cN(t,i,n)),n}function fN(t,e,n){const i={},r=a(e,["gcsUri"]);if(n!==void 0&&r!=null&&c(n,["supervisedTuningSpec","trainingDatasetUri"],r),a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function hN(t,e){const n={},i=a(e,["gcsUri"]);return i!=null&&c(n,["validationDatasetUri"],i),n}function pN(t,e,n){const i={},r=a(e,["validationDataset"]);n!==void 0&&r!=null&&c(n,["supervisedTuningSpec"],hN(t,r));const o=a(e,["tunedModelDisplayName"]);n!==void 0&&o!=null&&c(n,["tunedModelDisplayName"],o);const s=a(e,["description"]);n!==void 0&&s!=null&&c(n,["description"],s);const l=a(e,["epochCount"]);n!==void 0&&l!=null&&c(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=a(e,["learningRateMultiplier"]);n!==void 0&&u!=null&&c(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=a(e,["exportLastCheckpointOnly"]);n!==void 0&&d!=null&&c(n,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=a(e,["adapterSize"]);if(n!==void 0&&f!=null&&c(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),a(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function mN(t,e){const n={},i=a(e,["baseModel"]);i!=null&&c(n,["baseModel"],i);const r=a(e,["trainingDataset"]);r!=null&&c(n,["supervisedTuningSpec","trainingDatasetUri"],fN(t,r,n));const o=a(e,["config"]);return o!=null&&c(n,["config"],pN(t,o,n)),n}function gN(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["model"],i);const r=a(e,["name"]);return r!=null&&c(n,["endpoint"],r),n}function xy(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["state"]);r!=null&&c(n,["state"],gy(t,r));const o=a(e,["createTime"]);o!=null&&c(n,["createTime"],o);const s=a(e,["tuningTask","startTime"]);s!=null&&c(n,["startTime"],s);const l=a(e,["tuningTask","completeTime"]);l!=null&&c(n,["endTime"],l);const u=a(e,["updateTime"]);u!=null&&c(n,["updateTime"],u);const d=a(e,["description"]);d!=null&&c(n,["description"],d);const f=a(e,["baseModel"]);f!=null&&c(n,["baseModel"],f);const h=a(e,["_self"]);h!=null&&c(n,["tunedModel"],gN(t,h));const p=a(e,["distillationSpec"]);p!=null&&c(n,["distillationSpec"],p);const m=a(e,["experiment"]);m!=null&&c(n,["experiment"],m);const y=a(e,["labels"]);y!=null&&c(n,["labels"],y);const E=a(e,["pipelineJob"]);E!=null&&c(n,["pipelineJob"],E);const T=a(e,["tunedModelDisplayName"]);return T!=null&&c(n,["tunedModelDisplayName"],T),n}function yN(t,e){const n={},i=a(e,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const r=a(e,["tunedModels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>xy(t,s))),c(n,["tuningJobs"],o)}return n}function vN(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["metadata"]);r!=null&&c(n,["metadata"],r);const o=a(e,["done"]);o!=null&&c(n,["done"],o);const s=a(e,["error"]);return s!=null&&c(n,["error"],s),n}function _N(t,e){const n={},i=a(e,["checkpointId"]);i!=null&&c(n,["checkpointId"],i);const r=a(e,["epoch"]);r!=null&&c(n,["epoch"],r);const o=a(e,["step"]);o!=null&&c(n,["step"],o);const s=a(e,["endpoint"]);return s!=null&&c(n,["endpoint"],s),n}function CN(t,e){const n={},i=a(e,["model"]);i!=null&&c(n,["model"],i);const r=a(e,["endpoint"]);r!=null&&c(n,["endpoint"],r);const o=a(e,["checkpoints"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>_N(t,l))),c(n,["checkpoints"],s)}return n}function Cu(t,e){const n={},i=a(e,["name"]);i!=null&&c(n,["name"],i);const r=a(e,["state"]);r!=null&&c(n,["state"],gy(t,r));const o=a(e,["createTime"]);o!=null&&c(n,["createTime"],o);const s=a(e,["startTime"]);s!=null&&c(n,["startTime"],s);const l=a(e,["endTime"]);l!=null&&c(n,["endTime"],l);const u=a(e,["updateTime"]);u!=null&&c(n,["updateTime"],u);const d=a(e,["error"]);d!=null&&c(n,["error"],d);const f=a(e,["description"]);f!=null&&c(n,["description"],f);const h=a(e,["baseModel"]);h!=null&&c(n,["baseModel"],h);const p=a(e,["tunedModel"]);p!=null&&c(n,["tunedModel"],CN(t,p));const m=a(e,["supervisedTuningSpec"]);m!=null&&c(n,["supervisedTuningSpec"],m);const y=a(e,["tuningDataStats"]);y!=null&&c(n,["tuningDataStats"],y);const E=a(e,["encryptionSpec"]);E!=null&&c(n,["encryptionSpec"],E);const T=a(e,["partnerModelTuningSpec"]);T!=null&&c(n,["partnerModelTuningSpec"],T);const v=a(e,["distillationSpec"]);v!=null&&c(n,["distillationSpec"],v);const g=a(e,["experiment"]);g!=null&&c(n,["experiment"],g);const _=a(e,["labels"]);_!=null&&c(n,["labels"],_);const S=a(e,["pipelineJob"]);S!=null&&c(n,["pipelineJob"],S);const I=a(e,["tunedModelDisplayName"]);return I!=null&&c(n,["tunedModelDisplayName"],I),n}function EN(t,e){const n={},i=a(e,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const r=a(e,["tuningJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Cu(t,s))),c(n,["tuningJobs"],o)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TN extends lo{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ml(ki.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:hu.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=uN(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Cu(this.apiClient,f))}else{const d=nN(this.apiClient,e);return l=F("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>xy(this.apiClient,f))}}async listInternal(e){var n,i,r,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=dN(this.apiClient,e);return l=F("tuningJobs",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=EN(this.apiClient,f),p=new Ph;return Object.assign(p,h),p})}else{const d=rN(this.apiClient,e);return l=F("tunedModels",d._url),u=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=yN(this.apiClient,f),p=new Ph;return Object.assign(p,h),p})}}async tuneInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const l=mN(this.apiClient,e);return o=F("tuningJobs",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>Cu(this.apiClient,u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=aN(this.apiClient,e);return o=F("tunedModels",l._url),s=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>vN(this.apiClient,u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SN{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const wN=1024*1024*8,xN=3,IN=1e3,NN=2,ia="x-goog-upload-status";async function RN(t,e,n){var i,r,o;let s=0,l=0,u=new pu(new Response),d="upload";for(s=t.size;l<s;){const h=Math.min(wN,s-l),p=t.slice(l,l+h);l+h>=s&&(d+=", finalize");let m=0,y=IN;for(;m<xN&&(u=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[ia]));)m++,await AN(y),y=y*NN;if(l+=h,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[ia])!=="active")break;if(s<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(u==null?void 0:u.json());if(((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[ia])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function PN(t){return{size:t.size,type:t.type}}function AN(t){return new Promise(e=>setTimeout(e,t))}class kN{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RN(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MN{create(e,n,i){return new DN(e,n,i)}}class DN{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wh="x-goog-api-key";class LN{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(Wh)===null&&e.append(Wh,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FN="gl-node/";class UN{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=$T(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new LN(this.apiKey);this.apiClient=new tN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:FN+"web",uploader:new kN,downloader:new SN}),this.models=new FI(this.apiClient),this.live=new AI(this.apiClient,r,new MN),this.chats=new ZS(this.models,this.apiClient),this.caches=new KS(this.apiClient),this.files=new d0(this.apiClient),this.operations=new qI(this.apiClient),this.tunings=new TN(this.apiClient)}}const Hc=new UN({apiKey:"PLACEHOLDER_API_KEY"}),ON=async(t,e)=>{var n,i,r;try{const o=(n=t.subjectsCanHelp)==null?void 0:n.map(d=>{var f;return(f=e.find(h=>h.id===d))==null?void 0:f.name}).filter(Boolean).join(", "),s=(i=t.subjectsNeedHelp)==null?void 0:i.map(d=>{var f;return(f=e.find(h=>h.id===d))==null?void 0:f.name}).filter(Boolean).join(", "),l=`
      Create a short, friendly, and encouraging bio for a student study profile. 
      The bio should be about 2-3 sentences long.
      Here are the student's details:
      - Learning Style: ${t.learningStyle}
      - Preferred Study Methods: ${(r=t.preferredMethods)==null?void 0:r.join(", ")}
      - Subjects they can help with: ${o||"None specified"}
      - Subjects they need help with: ${s||"None specified"}
      - Availability: ${t.availability||"Not specified"}

      Example: "I'm a visual learner who enjoys collaborative problem-solving sessions. I'm strong in Physics and looking for some help with History. Let's connect and learn together!"
    `;return(await Hc.models.generateContent({model:"gemini-2.5-flash",contents:l})).text.trim()}catch(o){return console.error("Error generating bio:",o),"Failed to generate bio. Please try again."}},VN=async(t,e)=>{try{const n=e.map(o=>o.username).join(", "),i=`
        Create a simple, 3-step study plan for a new study group.
        The plan should be actionable and focused on a single study session.
        - Subject: ${t.name}
        - Group Members: ${n}

        The plan should be formatted as a list.
        Example for Math:
        1.  **Concept Review (15 mins):** Start by quickly reviewing the key formulas and concepts for this week's topic. Each member can share one thing they found challenging.
        2.  **Problem Solving (30 mins):** Work through 5 practice problems together on a shared scratchpad. Take turns explaining your approach.
        3.  **Q&A and Wrap-up (15 mins):** Discuss any lingering questions and set a goal for the next session.
        `;return(await Hc.models.generateContent({model:"gemini-2.5-flash",contents:i})).text}catch(n){return console.error("Error suggesting study plan:",n),"Failed to generate a study plan. Please try again."}},bN=async t=>{if(!t.trim())return"Nothing to summarize.";try{const e=`
        Summarize the following study notes into a few key bullet points.
        Focus on the main ideas and takeaways.

        Notes:
        ---
        ${t}
        ---
        `;return(await Hc.models.generateContent({model:"gemini-2.5-flash",contents:e})).text}catch(e){return console.error("Error summarizing text:",e),"Failed to summarize the notes. Please try again."}},BN=()=>{const{profile:t,updateProfile:e}=_t(),[n,i]=w.useState(t),[r,o]=w.useState(!1),[s,l]=w.useState("");if(w.useEffect(()=>{i(t)},[t]),!n)return C.jsx("div",{children:"Loading profile..."});const u=(h,p)=>{const m=Array.from(h.target.selectedOptions,E=>E.value),y=p.startsWith("subjects")?m.map(Number):m;i({...n,[p]:y})},d=h=>{h.preventDefault(),e(n),l("Profile saved successfully!"),setTimeout(()=>l(""),3e3)},f=async()=>{o(!0);try{const h=await ON(n,sn);i({...n,bio:h})}catch(h){console.error("Bio generation failed",h)}finally{o(!1)}};return C.jsxs("div",{className:"max-w-4xl mx-auto bg-surface p-8 rounded-lg shadow-lg",children:[C.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Edit Your Profile"}),s&&C.jsx("div",{className:"bg-secondary text-on-secondary p-3 rounded-md mb-4",children:s}),C.jsxs("form",{onSubmit:d,className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700",children:"Bio"}),C.jsx("textarea",{id:"bio",rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",value:n.bio,onChange:h=>i({...n,bio:h.target.value})}),C.jsx("button",{type:"button",onClick:f,disabled:r,className:"mt-2 text-sm text-primary font-semibold hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Generating...":"✨ Generate with AI"})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"learningStyle",className:"block text-sm font-medium text-gray-700",children:"Learning Style"}),C.jsx("select",{id:"learningStyle",value:n.learningStyle,onChange:h=>i({...n,learningStyle:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:Object.values(ui).map(h=>C.jsx("option",{value:h,children:h},h))})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"availability",className:"block text-sm font-medium text-gray-700",children:"Availability"}),C.jsx("input",{type:"text",id:"availability",value:n.availability,onChange:h=>i({...n,availability:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm"})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"preferredMethods",className:"block text-sm font-medium text-gray-700",children:"Preferred Study Methods"}),C.jsx("select",{multiple:!0,id:"preferredMethods",value:n.preferredMethods,onChange:h=>u(h,"preferredMethods"),className:"mt-1 block w-full h-32 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:Object.values(Wt).map(h=>C.jsx("option",{value:h,children:h},h))})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"subjectsCanHelp",className:"block text-sm font-medium text-gray-700",children:"Subjects I Can Help With"}),C.jsx("select",{multiple:!0,id:"subjectsCanHelp",value:n.subjectsCanHelp.map(String),onChange:h=>u(h,"subjectsCanHelp"),className:"mt-1 block w-full h-40 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:sn.map(h=>C.jsx("option",{value:h.id,children:h.name},h.id))})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"subjectsNeedHelp",className:"block text-sm font-medium text-gray-700",children:"Subjects I Need Help With"}),C.jsx("select",{multiple:!0,id:"subjectsNeedHelp",value:n.subjectsNeedHelp.map(String),onChange:h=>u(h,"subjectsNeedHelp"),className:"mt-1 block w-full h-40 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:sn.map(h=>C.jsx("option",{value:h.id,children:h.name},h.id))})]})]}),C.jsx("div",{className:"flex justify-end",children:C.jsx("button",{type:"submit",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors font-medium",children:"Save Profile"})})]})]})},HN=({user:t,profile:e})=>{const n=i=>{var r;return((r=sn.find(o=>o.id===i))==null?void 0:r.name)||"Unknown"};return C.jsx("div",{className:"bg-surface rounded-xl shadow-md overflow-hidden transition-all hover:shadow-xl hover:-translate-y-1",children:C.jsxs("div",{className:"p-6",children:[C.jsx("div",{className:"uppercase tracking-wide text-sm text-primary font-semibold",children:t.username}),C.jsx("p",{className:"mt-2 text-slate-600 text-sm",children:e.bio}),C.jsxs("div",{className:"mt-4",children:[C.jsx("h4",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Can Help With"}),C.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:e.subjectsCanHelp.map(i=>C.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:n(i)},`can-${i}`))})]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("h4",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Needs Help With"}),C.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:e.subjectsNeedHelp.map(i=>C.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:n(i)},`need-${i}`))})]}),C.jsx("button",{className:"mt-6 w-full bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 transition-colors text-sm font-medium",children:"Send Study Request"})]})})},GN=()=>{const{user:t}=_t(),[e,n]=w.useState(""),[i,r]=w.useState("offering"),o=w.useMemo(()=>Nn.filter(s=>s.userId!==(t==null?void 0:t.id)).filter(s=>{if(!e)return!0;const l=parseInt(e,10);return i==="offering"?s.subjectsCanHelp.includes(l):s.subjectsNeedHelp.includes(l)}),[t,e,i]);return C.jsxs("div",{children:[C.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-sm mb-8",children:[C.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Find Your Study Partner"}),C.jsx("p",{className:"text-gray-600 mt-2",children:"Filter to find the perfect match for your study needs."}),C.jsxs("div",{className:"mt-4 flex flex-col md:flex-row gap-4",children:[C.jsxs("select",{value:e,onChange:s=>n(s.target.value),className:"w-full md:w-1/3 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",children:[C.jsx("option",{value:"",children:"All Subjects"}),sn.map(s=>C.jsx("option",{value:s.id,children:s.name},s.id))]}),C.jsxs("select",{value:i,onChange:s=>r(s.target.value),className:"w-full md:w-1/3 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",children:[C.jsx("option",{value:"offering",children:"Offering Help"}),C.jsx("option",{value:"seeking",children:"Seeking Help"})]})]})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>{const l=vi.find(u=>u.id===s.userId);return l?C.jsx(HN,{user:l,profile:s},s.id):null})}),o.length===0&&C.jsxs("div",{className:"text-center py-12 text-gray-500",children:[C.jsx("p",{children:"No matches found for your criteria."}),C.jsx("p",{children:"Try broadening your search."})]})]})};var $h={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R=function(t,e){if(!t)throw Gi(e)},Gi=function(t){return new Error("Firebase Database ("+Iy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},zN=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],s=t[n++],l=t[n++],u=((r&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Gc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],s=r+1<t.length,l=s?t[r+1]:0,u=r+2<t.length,d=u?t[r+2]:0,f=o>>2,h=(o&3)<<4|l>>4;let p=(l&15)<<2|d>>6,m=d&63;u||(m=64,s||(p=64)),i.push(n[f],n[h],n[p],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ny(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||l==null||d==null||h==null)throw new WN;const p=o<<2|l>>4;if(i.push(p),d!==64){const m=l<<4&240|d>>2;if(i.push(m),h!==64){const y=d<<6&192|h;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ry=function(t){const e=Ny(t);return Gc.encodeByteArray(e,!0)},ks=function(t){return Ry(t).replace(/\./g,"")},Eu=function(t){try{return Gc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){return Py(void 0,t)}function Py(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qN(n)||(t[n]=Py(t[n],e[n]));return t}function qN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=()=>YN().__FIREBASE_DEFAULTS__,JN=()=>{if(typeof process>"u"||typeof $h>"u")return;const t=$h.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Eu(t[1]);return e&&JSON.parse(e)},Ay=()=>{try{return KN()||JN()||QN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XN=t=>{var e,n;return(n=(e=Ay())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZN=t=>{const e=XN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ky=()=>{var t;return(t=Ay())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ks(JSON.stringify(n)),ks(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function My(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(eR())}function tR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nR(){return Iy.NODE_ADMIN===!0}function iR(){try{return typeof indexedDB=="object"}catch{return!1}}function rR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="FirebaseError";class ao extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=oR,Object.setPrototypeOf(this,ao.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dy.prototype.create)}}class Dy{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?sR(o,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new ao(r,l,i)}}function sR(t,e){return t.replace(lR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const lR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){return JSON.parse(t)}function ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=$r(Eu(o[0])||""),n=$r(Eu(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},aR=function(t){const e=Ly(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},uR=function(t){const e=Ly(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function qh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ms(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Tu(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],s=e[r];if(Yh(o)&&Yh(s)){if(!Tu(o,s))return!1}else if(o!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Yh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const p=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],s=this.chain_[2],l=this.chain_[3],u=this.chain_[4],d,f;for(let h=0;h<80;h++){h<40?h<20?(d=l^o&(s^l),f=1518500249):(d=o^s^l,f=1859775393):h<60?(d=o&s|l&(o|s),f=2400959708):(d=o^s^l,f=3395469782);const p=(r<<5|r>>>27)+d+u+f+i[h]&4294967295;u=l,l=s,s=(o<<30|o>>>2)&4294967295,o=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let s=this.inbuf_;for(;r<n;){if(s===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}else for(;r<n;)if(o[s]=e[r],++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function zc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,R(i<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(i)-56320;r=65536+(o<<10)+s}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},vl=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){return t&&t._delegate?t._delegate:t}class qr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new yl;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mR(e))try{this.getOrInitializeService({instanceIdentifier:xn})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xn){return this.instances.has(e)}getOptions(e=xn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&s.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=xn){return this.component?this.component.multipleInstances?e:xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pR(t){return t===xn?void 0:t}function mR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Y||(Y={}));const yR={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},vR=Y.INFO,_R={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},CR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=_R[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fy{constructor(e){this.name=e,this._logLevel=vR,this._logHandler=CR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}}const ER=(t,e)=>e.some(n=>t instanceof n);let Kh,Jh;function TR(){return Kh||(Kh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SR(){return Jh||(Jh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Uy=new WeakMap,Su=new WeakMap,Oy=new WeakMap,ra=new WeakMap,Wc=new WeakMap;function wR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ln(t.result)),r()},s=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Uy.set(n,t)}).catch(()=>{}),Wc.set(e,t),e}function xR(t){if(Su.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),r()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Su.set(t,e)}let wu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Su.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IR(t){wu=t(wu)}function NR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(oa(this),e,...n);return Oy.set(i,e.sort?e.sort():[e]),ln(i)}:SR().includes(t)?function(...e){return t.apply(oa(this),e),ln(Uy.get(this))}:function(...e){return ln(t.apply(oa(this),e))}}function RR(t){return typeof t=="function"?NR(t):(t instanceof IDBTransaction&&xR(t),ER(t,TR())?new Proxy(t,wu):t)}function ln(t){if(t instanceof IDBRequest)return wR(t);if(ra.has(t))return ra.get(t);const e=RR(t);return e!==t&&(ra.set(t,e),Wc.set(e,t)),e}const oa=t=>Wc.get(t);function PR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(t,e),l=ln(s);return i&&s.addEventListener("upgradeneeded",u=>{i(ln(s.result),u.oldVersion,u.newVersion,ln(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const AR=["get","getKey","getAll","getAllKeys","count"],kR=["put","add","delete","clear"],sa=new Map;function Qh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sa.get(e))return sa.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=kR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||AR.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,r?"readwrite":"readonly");let d=u.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&u.done]))[0]};return sa.set(e,o),o}IR(t=>({...t,get:(e,n,i)=>Qh(e,n)||t.get(e,n,i),has:(e,n)=>!!Qh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function DR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xu="@firebase/app",Xh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt=new Fy("@firebase/app"),LR="@firebase/app-compat",FR="@firebase/analytics-compat",UR="@firebase/analytics",OR="@firebase/app-check-compat",VR="@firebase/app-check",bR="@firebase/auth",BR="@firebase/auth-compat",HR="@firebase/database",GR="@firebase/data-connect",zR="@firebase/database-compat",WR="@firebase/functions",$R="@firebase/functions-compat",qR="@firebase/installations",YR="@firebase/installations-compat",KR="@firebase/messaging",JR="@firebase/messaging-compat",QR="@firebase/performance",XR="@firebase/performance-compat",ZR="@firebase/remote-config",jR="@firebase/remote-config-compat",eP="@firebase/storage",tP="@firebase/storage-compat",nP="@firebase/firestore",iP="@firebase/vertexai-preview",rP="@firebase/firestore-compat",oP="firebase",sP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="[DEFAULT]",lP={[xu]:"fire-core",[LR]:"fire-core-compat",[UR]:"fire-analytics",[FR]:"fire-analytics-compat",[VR]:"fire-app-check",[OR]:"fire-app-check-compat",[bR]:"fire-auth",[BR]:"fire-auth-compat",[HR]:"fire-rtdb",[GR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[WR]:"fire-fn",[$R]:"fire-fn-compat",[qR]:"fire-iid",[YR]:"fire-iid-compat",[KR]:"fire-fcm",[JR]:"fire-fcm-compat",[QR]:"fire-perf",[XR]:"fire-perf-compat",[ZR]:"fire-rc",[jR]:"fire-rc-compat",[eP]:"fire-gcs",[tP]:"fire-gcs-compat",[nP]:"fire-fst",[rP]:"fire-fst-compat",[iP]:"fire-vertex","fire-js":"fire-js",[oP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Map,aP=new Map,Nu=new Map;function Zh(t,e){try{t.container.addComponent(e)}catch(n){kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){const e=t.name;if(Nu.has(e))return kt.debug(`There were multiple attempts to register component ${e}.`),!1;Nu.set(e,t);for(const n of Ds.values())Zh(n,t);for(const n of aP.values())Zh(n,t);return!0}function uP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},an=new Dy("app","Firebase",cP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=sP;function Vy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Iu,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw an.create("bad-app-name",{appName:String(r)});if(n||(n=ky()),!n)throw an.create("no-options");const o=Ds.get(r);if(o){if(Tu(n,o.options)&&Tu(i,o.config))return o;throw an.create("duplicate-app",{appName:r})}const s=new gR(r);for(const u of Nu.values())s.addComponent(u);const l=new dP(n,i,s);return Ds.set(r,l),l}function hP(t=Iu){const e=Ds.get(t);if(!e&&t===Iu&&ky())return Vy();if(!e)throw an.create("no-app",{appName:t});return e}function _i(t,e,n){var i;let r=(i=lP[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kt.warn(l.join(" "));return}Ls(new qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="firebase-heartbeat-database",mP=1,Yr="firebase-heartbeat-store";let la=null;function by(){return la||(la=PR(pP,mP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yr)}catch(n){console.warn(n)}}}}).catch(t=>{throw an.create("idb-open",{originalErrorMessage:t.message})})),la}async function gP(t){try{const n=(await by()).transaction(Yr),i=await n.objectStore(Yr).get(By(t));return await n.done,i}catch(e){if(e instanceof ao)kt.warn(e.message);else{const n=an.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kt.warn(n.message)}}}async function jh(t,e){try{const i=(await by()).transaction(Yr,"readwrite");await i.objectStore(Yr).put(e,By(t)),await i.done}catch(n){if(n instanceof ao)kt.warn(n.message);else{const i=an.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kt.warn(i.message)}}}function By(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=1024,vP=30*24*60*60*1e3;class _P{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EP(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ep();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=vP}),this._storage.overwrite(this._heartbeatsCache))}catch(i){kt.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ep(),{heartbeatsToSend:i,unsentEntries:r}=CP(this._heartbeatsCache.heartbeats),o=ks(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return kt.warn(n),""}}}function ep(){return new Date().toISOString().substring(0,10)}function CP(t,e=yP){const n=[];let i=t.slice();for(const r of t){const o=n.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),tp(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tp(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class EP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iR()?rR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return jh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return jh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tp(t){return ks(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){Ls(new qr("platform-logger",e=>new MR(e),"PRIVATE")),Ls(new qr("heartbeat",e=>new _P(e),"PRIVATE")),_i(xu,Xh,t),_i(xu,Xh,"esm2017"),_i("fire-js","")}TP("");var SP="firebase",wP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(SP,wP,"app");var np={};const ip="@firebase/database",rp="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hy="";function xP(t){Hy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:$r(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ot(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IP(e)}}catch{}return new NP},kn=Gy("localStorage"),RP=Gy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Fy("@firebase/database"),PP=function(){let t=1;return function(){return t++}}(),zy=function(t){const e=fR(t),n=new dR;n.update(e);const i=n.digest();return Gc.encodeByteArray(i)},uo=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=uo.apply(null,i):typeof i=="object"?e+=ve(i):e+=i,e+=" "}return e};let _r=null,op=!0;const AP=function(t,e){R(!0,"Can't turn on custom loggers persistently."),Ci.logLevel=Y.VERBOSE,_r=Ci.log.bind(Ci)},Re=function(...t){if(op===!0&&(op=!1,_r===null&&RP.get("logging_enabled")===!0&&AP()),_r){const e=uo.apply(null,t);_r(e)}},co=function(t){return function(...e){Re(t,...e)}},Ru=function(...t){const e="FIREBASE INTERNAL ERROR: "+uo(...t);Ci.error(e)},Mt=function(...t){const e=`FIREBASE FATAL ERROR: ${uo(...t)}`;throw Ci.error(e),new Error(e)},Ge=function(...t){const e="FIREBASE WARNING: "+uo(...t);Ci.warn(e)},kP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ge("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Wy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},MP=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Di="[MIN_NAME]",Bn="[MAX_NAME]",Wi=function(t,e){if(t===e)return 0;if(t===Di||e===Bn)return-1;if(e===Di||t===Bn)return 1;{const n=sp(t),i=sp(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},DP=function(t,e){return t===e?0:t<e?-1:1},nr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ve(e))},$c=function(t){if(typeof t!="object"||t===null)return ve(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ve(e[i]),n+=":",n+=$c(t[e[i]]);return n+="}",n},$y=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function ze(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qy=function(t){R(!Wy(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,s,l,u;t===0?(o=0,s=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=l+i,s=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-i-n))));const d=[];for(u=n;u;u-=1)d.push(s%2?1:0),s=Math.floor(s/2);for(u=e;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();const f=d.join("");let h="";for(u=0;u<64;u+=8){let p=parseInt(f.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},LP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},FP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function UP(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const OP=new RegExp("^-?(0*)\\d{1,10}$"),VP=-2147483648,bP=2147483647,sp=function(t){if(OP.test(t)){const e=Number(t);if(e>=VP&&e<=bP)return e}return null},$i=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ge("Exception was thrown by user callback.",n),e},Math.floor(0))}},BP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cr=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Ge(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ge(e)}}class ts{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ts.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="5",Yy="v",Ky="s",Jy="r",Qy="f",Xy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zy="ls",jy="p",Pu="ac",ev="websocket",tv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,i,r,o=!1,s="",l=!1,u=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function zP(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function iv(t,e,n){R(typeof e=="string","typeof type must == string"),R(typeof n=="object","typeof params must == object");let i;if(e===ev)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===tv)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);zP(t)&&(n.ns=t.namespace);const r=[];return ze(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.counters_={}}incrementCounter(e,n=1){Ot(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $N(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa={},ua={};function Yc(t){const e=t.toString();return aa[e]||(aa[e]=new WP),aa[e]}function $P(t,e){const n=t.toString();return ua[n]||(ua[n]=e()),ua[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&$i(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="start",YP="close",KP="pLPCommand",JP="pRTLPCB",rv="id",ov="pw",sv="ser",QP="cb",XP="seg",ZP="ts",jP="d",eA="dframe",lv=1870,av=30,tA=lv-av,nA=25e3,iA=3e4;class ci{constructor(e,n,i,r,o,s,l){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=co(e),this.stats_=Yc(n),this.urlFn=u=>(this.appCheckToken&&(u[Pu]=this.appCheckToken),iv(n,tv,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new qP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iA)),MP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kc((...o)=>{const[s,l,u,d,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===lp)this.id=l,this.password=u;else if(s===YP)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[lp]="t",i[sv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[QP]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Yy]=qc,this.transportSessionId&&(i[Ky]=this.transportSessionId),this.lastSessionId&&(i[Zy]=this.lastSessionId),this.applicationId&&(i[jy]=this.applicationId),this.appCheckToken&&(i[Pu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Xy.test(location.hostname)&&(i[Jy]=Qy);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ci.forceAllow_=!0}static forceDisallow(){ci.forceDisallow_=!0}static isAvailable(){return ci.forceAllow_?!0:!ci.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!LP()&&!FP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Ry(n),r=$y(i,tA);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[eA]="t",i[rv]=e,i[ov]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Kc{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=PP(),window[KP+this.uniqueCallbackIdentifier]=e,window[JP+this.uniqueCallbackIdentifier]=n,this.myIFrame=Kc.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(l){Re("frame writing exception"),l.stack&&Re(l.stack),Re(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Re("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[rv]=this.myID,e[ov]=this.myPW,e[sv]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+av+i.length<=lv;){const s=this.pendingSegs.shift();i=i+"&"+XP+r+"="+s.seg+"&"+ZP+r+"="+s.ts+"&"+jP+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(nA)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Re("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=16384,oA=45e3;let Fs=null;typeof MozWebSocket<"u"?Fs=MozWebSocket:typeof WebSocket<"u"&&(Fs=WebSocket);class lt{constructor(e,n,i,r,o,s,l){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=co(this.connId),this.stats_=Yc(n),this.connURL=lt.connectionURL_(n,s,l,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const s={};return s[Yy]=qc,typeof location<"u"&&location.hostname&&Xy.test(location.hostname)&&(s[Jy]=Qy),n&&(s[Ky]=n),i&&(s[Zy]=i),r&&(s[Pu]=r),o&&(s[jy]=o),iv(e,ev,s)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kn.set("previous_websocket_failure",!0);try{let i;nR(),this.mySock=new Fs(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){lt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Fs!==null&&!lt.forceDisallow_}static previouslyFailed(){return kn.isInMemoryStorage||kn.get("previous_websocket_failure")===!0}markConnectionHealthy(){kn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=$r(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(R(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=$y(n,rA);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(oA))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}lt.responsesRequiredToBeHealthy=2;lt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ci,lt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=lt&&lt.isAvailable();let i=n&&!lt.previouslyFailed();if(e.webSocketOnly&&(n||Ge("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[lt];else{const r=this.transports_=[];for(const o of Kr.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);Kr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Kr.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=6e4,lA=5e3,aA=10*1024,uA=100*1024,ca="t",ap="d",cA="s",up="r",dA="e",cp="o",dp="a",fp="n",hp="p",fA="h";class hA{constructor(e,n,i,r,o,s,l,u,d,f){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=l,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=co("c:"+this.id+":"),this.transportManager_=new Kr(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Cr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uA?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aA?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ca in e){const n=e[ca];n===dp?this.upgradeIfSecondaryHealthy_():n===up?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=nr("t",e),i=nr("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=nr("t",e),i=nr("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=nr(ca,e);if(ap in e){const i=e[ap];if(n===fA){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===fp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===cA?this.onConnectionShutdown_(i):n===up?this.onReset_(i):n===dA?Ru("Server Error: "+i):n===cp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ru("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),qc!==i&&Ge("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Cr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(sA))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lA))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){R(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends cv{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!My()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Us}getInitialEvent(e){return R(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=32,mp=768;class q{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function W(){return new q("")}function V(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function fn(t){return t.pieces_.length-t.pieceNum_}function K(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new q(t.pieces_,e)}function dv(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function pA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fv(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hv(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new q(e,0)}function fe(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof q)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new q(n,0)}function B(t){return t.pieceNum_>=t.pieces_.length}function Oe(t,e){const n=V(t),i=V(e);if(n===null)return e;if(n===i)return Oe(K(t),K(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Jc(t,e){if(fn(t)!==fn(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function at(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(fn(t)>fn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class mA{constructor(e,n){this.errorPrefix_=n,this.parts_=fv(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=vl(this.parts_[i]);pv(this)}}function gA(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vl(e),pv(t)}function yA(t){const e=t.parts_.pop();t.byteLength_-=vl(e),t.parts_.length>0&&(t.byteLength_-=1)}function pv(t){if(t.byteLength_>mp)throw new Error(t.errorPrefix_+"has a key path longer than "+mp+" bytes ("+t.byteLength_+").");if(t.parts_.length>pp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pp+") or object contains a cycle "+In(t))}function In(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends cv{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Qc}getInitialEvent(e){return R(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=1e3,vA=60*5*1e3,gp=30*1e3,_A=1.3,CA=3e4,EA="server_kill",yp=3;class It extends uv{constructor(e,n,i,r,o,s,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=It.nextPersistentConnectionId_++,this.log_=co("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ir,this.maxReconnectDelay_=vA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Us.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(ve(o)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new yl,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const l=s.d;s.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(s).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},s="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,l=>{const u=l.d,d=l.s;It.warnOnListenWarnings_(u,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ot(e,"w")){const i=Mi(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Ge(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||uR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=aR(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,s=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},s="n";r&&(o.q=i,o.t=r),this.sendRequest(s,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{r&&setTimeout(()=>{r(s.s,s.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const s={p:n,d:i};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ve(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ru("Unrecognized action received from server: "+ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>CA&&(this.reconnectDelay_=ir),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_A)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+It.nextConnectionId_++,o=this.lastSessionId;let s=!1,l=null;const u=function(){l?l.close():(s=!0,i())},d=function(h){R(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:u,sendRequest:d};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,p]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);s?Re("getToken() completed but was canceled"):(Re("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,l=new hA(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,m=>{Ge(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(EA)},o))}catch(h){this.log_("Failed to get token: "+h),s||(this.repoInfo_.nodeAdmin&&Ge(h),u())}}}interrupt(e){Re("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Re("Resuming connection for reason: "+e),delete this.interruptReasons_[e],qh(this.interruptReasons_)&&(this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>$c(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new q(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Re("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yp&&(this.reconnectDelay_=gp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Re("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Hy.replace(/\./g,"-")]=1,My()?e["framework.cordova"]=1:tR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Us.getInstance().currentlyOnline();return qh(this.interruptReasons_)&&e}}It.nextPersistentConnectionId_=0;It.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new b(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new b(Di,e),r=new b(Di,n);return this.compare(i,r)!==0}minPost(){return b.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo;class mv extends _l{static get __EMPTY_NODE(){return Oo}static set __EMPTY_NODE(e){Oo=e}compare(e,n){return Wi(e.name,n.name)}isDefinedOn(e){throw Gi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return b.MIN}maxPost(){return new b(Bn,Oo)}makePost(e,n){return R(typeof e=="string","KeyIndex indexValue must always be a string."),new b(e,Oo)}toString(){return".key"}}const Ei=new mv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?i(e.key,n):1,r&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ye{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??ye.RED,this.left=r??Ve.EMPTY_NODE,this.right=o??Ve.EMPTY_NODE}copy(e,n,i,r,o){return new ye(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ve.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Ve.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ye.RED=!0;ye.BLACK=!1;class TA{copy(e,n,i,r,o){return this}insert(e,n,i){return new ye(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ve{constructor(e,n=Ve.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ve(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ye.BLACK,null,null))}remove(e){return new Ve(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ye.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vo(this.root_,null,this.comparator_,!0,e)}}Ve.EMPTY_NODE=new TA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e){return Wi(t.name,e.name)}function Xc(t,e){return Wi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au;function wA(t){Au=t}const gv=function(t){return typeof t=="number"?"number:"+qy(t):"string:"+t},yv=function(t){if(t.isLeafNode()){const e=t.val();R(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ot(e,".sv"),"Priority must be a string or number.")}else R(t===Au||t.isEmpty(),"priority of unexpected type.");R(t===Au||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp;class me{constructor(e,n=me.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yv(this.priorityNode_)}static set __childrenNodeConstructor(e){vp=e}static get __childrenNodeConstructor(){return vp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new me(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:me.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return B(e)?this:V(e)===".priority"?this.priorityNode_:me.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:me.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=V(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(R(i!==".priority"||fn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,me.__childrenNodeConstructor.EMPTY_NODE.updateChild(K(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+gv(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qy(this.value_):e+=this.value_,this.lazyHash_=zy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===me.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof me.__childrenNodeConstructor?-1:(R(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=me.VALUE_TYPE_ORDER.indexOf(n),o=me.VALUE_TYPE_ORDER.indexOf(i);return R(r>=0,"Unknown leaf type: "+n),R(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}me.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vv,_v;function xA(t){vv=t}function IA(t){_v=t}class NA extends _l{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Wi(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return b.MIN}maxPost(){return new b(Bn,new me("[PRIORITY-POST]",_v))}makePost(e,n){const i=vv(e);return new b(n,new me("[PRIORITY-POST]",i))}toString(){return".priority"}}const se=new NA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=Math.log(2);class PA{constructor(e){const n=o=>parseInt(Math.log(o)/RA,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Os=function(t,e,n,i){t.sort(e);const r=function(u,d){const f=d-u;let h,p;if(f===0)return null;if(f===1)return h=t[u],p=n?n(h):h,new ye(p,h.node,ye.BLACK,null,null);{const m=parseInt(f/2,10)+u,y=r(u,m),E=r(m+1,d);return h=t[m],p=n?n(h):h,new ye(p,h.node,ye.BLACK,y,E)}},o=function(u){let d=null,f=null,h=t.length;const p=function(y,E){const T=h-y,v=h;h-=y;const g=r(T+1,v),_=t[T],S=n?n(_):_;m(new ye(S,_.node,E,null,g))},m=function(y){d?(d.left=y,d=y):(f=y,d=y)};for(let y=0;y<u.count;++y){const E=u.nextBitIsOne(),T=Math.pow(2,u.count-(y+1));E?p(T,ye.BLACK):(p(T,ye.BLACK),p(T,ye.RED))}return f},s=new PA(t.length),l=o(s);return new Ve(i||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da;const Qn={};class wt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return R(Qn&&se,"ChildrenNode.ts has not been loaded"),da=da||new wt({".priority":Qn},{".priority":se}),da}get(e){const n=Mi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ve?n:null}hasIndex(e){return Ot(this.indexSet_,e.toString())}addIndex(e,n){R(e!==Ei,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(b.Wrap);let s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();let l;r?l=Os(i,e.getCompare()):l=Qn;const u=e.toString(),d=Object.assign({},this.indexSet_);d[u]=e;const f=Object.assign({},this.indexes_);return f[u]=l,new wt(f,d)}addToIndexes(e,n){const i=Ms(this.indexes_,(r,o)=>{const s=Mi(this.indexSet_,o);if(R(s,"Missing index implementation for "+o),r===Qn)if(s.isDefinedOn(e.node)){const l=[],u=n.getIterator(b.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&l.push(d),d=u.getNext();return l.push(e),Os(l,s.getCompare())}else return Qn;else{const l=n.get(e.name);let u=r;return l&&(u=u.remove(new b(e.name,l))),u.insert(e,e.node)}});return new wt(i,this.indexSet_)}removeFromIndexes(e,n){const i=Ms(this.indexes_,r=>{if(r===Qn)return r;{const o=n.get(e.name);return o?r.remove(new b(e.name,o)):r}});return new wt(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rr;class L{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yv(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rr||(rr=new L(new Ve(Xc),null,wt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rr}updatePriority(e){return this.children_.isEmpty()?this:new L(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?rr:n}}getChild(e){const n=V(e);return n===null?this:this.getImmediateChild(n).getChild(K(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(R(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new b(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const s=r.isEmpty()?rr:this.priorityNode_;return new L(r,s,o)}}updateChild(e,n){const i=V(e);if(i===null)return n;{R(V(e)!==".priority"||fn(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(K(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(se,(s,l)=>{n[s]=l.val(e),i++,o&&L.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):o=!1}),!e&&o&&r<2*i){const s=[];for(const l in n)s[l]=n[l];return s}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+gv(this.getPriority().val())+":"),this.forEachChild(se,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":zy(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new b(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new b(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new b(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,b.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,b.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fo?-1:0}withIndex(e){if(e===Ei||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new L(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ei||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(se),r=n.getIterator(se);let o=i.getNext(),s=r.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=i.getNext(),s=r.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===Ei?null:this.indexMap_.get(e.toString())}}L.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AA extends L{constructor(){super(new Ve(Xc),L.EMPTY_NODE,wt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}}const fo=new AA;Object.defineProperties(b,{MIN:{value:new b(Di,L.EMPTY_NODE)},MAX:{value:new b(Bn,fo)}});mv.__EMPTY_NODE=L.EMPTY_NODE;me.__childrenNodeConstructor=L;wA(fo);IA(fo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=!0;function Ee(t,e=null){if(t===null)return L.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),R(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new me(n,Ee(e))}if(!(t instanceof Array)&&kA){const n=[];let i=!1;if(ze(t,(s,l)=>{if(s.substring(0,1)!=="."){const u=Ee(l);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),n.push(new b(s,u)))}}),n.length===0)return L.EMPTY_NODE;const o=Os(n,SA,s=>s.name,Xc);if(i){const s=Os(n,se.getCompare());return new L(o,Ee(e),new wt({".priority":s},{".priority":se}))}else return new L(o,Ee(e),wt.Default)}else{let n=L.EMPTY_NODE;return ze(t,(i,r)=>{if(Ot(t,i)&&i.substring(0,1)!=="."){const o=Ee(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Ee(e))}}xA(Ee);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends _l{constructor(e){super(),this.indexPath_=e,R(!B(e)&&V(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Wi(e.name,n.name):o}makePost(e,n){const i=Ee(e),r=L.EMPTY_NODE.updateChild(this.indexPath_,i);return new b(n,r)}maxPost(){const e=L.EMPTY_NODE.updateChild(this.indexPath_,fo);return new b(Bn,e)}toString(){return fv(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends _l{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Wi(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return b.MIN}maxPost(){return b.MAX}makePost(e,n){const i=Ee(e);return new b(n,i)}toString(){return".value"}}const LA=new DA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){return{type:"value",snapshotNode:t}}function Li(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Jr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Qr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function FA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.index_=e}updateChild(e,n,i,r,o,s){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(r).equals(i.getChild(r))&&l.isEmpty()===i.isEmpty()||(s!=null&&(i.isEmpty()?e.hasChild(n)?s.trackChildChange(Jr(n,l)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?s.trackChildChange(Li(n,i)):s.trackChildChange(Qr(n,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(se,(r,o)=>{n.hasChild(r)||i.trackChildChange(Jr(r,o))}),n.isLeafNode()||n.forEachChild(se,(r,o)=>{if(e.hasChild(r)){const s=e.getImmediateChild(r);s.equals(o)||i.trackChildChange(Qr(r,o,s))}else i.trackChildChange(Li(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.indexedFilter_=new Zc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xr.getStartPost_(e),this.endPost_=Xr.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,s){return this.matches(new b(n,i))||(i=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,s)}updateFullNode(e,n,i){n.isLeafNode()&&(n=L.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(L.EMPTY_NODE);const o=this;return n.forEachChild(se,(s,l)=>{o.matches(new b(s,l))||(r=r.updateImmediateChild(s,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Xr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,s){return this.rangedFilter_.matches(new b(n,i))||(i=L.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,s):this.fullLimitUpdateChild_(e,n,i,o,s)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=L.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const l=o.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))r=r.updateImmediateChild(l.name,l.node),s++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(L.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){const l=o.getNext();s<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?s++:r=r.updateImmediateChild(l.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let s;if(this.reverse_){const h=this.index_.getCompare();s=(p,m)=>h(m,p)}else s=this.index_.getCompare();const l=e;R(l.numChildren()===this.limit_,"");const u=new b(n,i),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(l.hasChild(n)){const h=l.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,d,this.reverse_);for(;p!=null&&(p.name===n||l.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:s(p,u);if(f&&!i.isEmpty()&&m>=0)return o!=null&&o.trackChildChange(Qr(n,i,h)),l.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Jr(n,h));const E=l.updateImmediateChild(n,L.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(o!=null&&o.trackChildChange(Li(p.name,p.node)),E.updateImmediateChild(p.name,p.node)):E}}else return i.isEmpty()?e:f&&s(d,u)>=0?(o!=null&&(o.trackChildChange(Jr(d.name,d.node)),o.trackChildChange(Li(n,i))),l.updateImmediateChild(n,i).updateImmediateChild(d.name,L.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=se}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Di}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===se}copy(){const e=new jc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function OA(t){return t.loadsAllData()?new Zc(t.getIndex()):t.hasLimit()?new UA(t):new Xr(t)}function _p(t){const e={};if(t.isDefault())return e;let n;if(t.index_===se?n="$priority":t.index_===LA?n="$value":t.index_===Ei?n="$key":(R(t.index_ instanceof MA,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ve(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=ve(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+ve(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=ve(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Cp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==se&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends uv{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=co("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Vs.getListenId_(e,i),l={};this.listens_[s]=l;const u=_p(e._queryParams);this.restRequest_(o+".json",u,(d,f)=>{let h=f;if(d===404&&(h=null,d=null),d===null&&this.onDataUpdate_(o,h,!1,i),Mi(this.listens_,s)===l){let p;d?d===401?p="permission_denied":p="rest_error:"+d:p="ok",r(p,null)}})}unlisten(e,n){const i=Vs.getListenId_(e,n);delete this.listens_[i]}get(e){const n=_p(e._queryParams),i=e._path.toString(),r=new yl;return this.restRequest_(i+".json",n,(o,s)=>{let l=s;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(i,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cR(n);this.log_("Sending REST request for "+s);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=$r(l.responseText)}catch{Ge("Failed to parse JSON response for "+s+": "+l.responseText)}i(null,u)}else l.status!==401&&l.status!==404&&Ge("Got unsuccessful REST response for "+s+" Status: "+l.status),i(l.status);i=null}},l.open("GET",s,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(){return{value:null,children:new Map}}function Ev(t,e,n){if(B(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=V(e);t.children.has(i)||t.children.set(i,bs());const r=t.children.get(i);e=K(e),Ev(r,e,n)}}function ku(t,e,n){t.value!==null?n(e,t.value):bA(t,(i,r)=>{const o=new q(e.toString()+"/"+i);ku(r,o,n)})}function bA(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ze(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=10*1e3,HA=30*1e3,GA=5*60*1e3;class zA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new BA(e);const i=Ep+(HA-Ep)*Math.random();Cr(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;ze(e,(r,o)=>{o>0&&Ot(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Cr(this.reportStats_.bind(this),Math.floor(Math.random()*2*GA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ut||(ut={}));function Tv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ed(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function td(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ut.ACK_USER_WRITE,this.source=Tv()}operationForChild(e){if(B(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new q(e));return new Bs(W(),n,this.revert)}}else return R(V(this.path)===e,"operationForChild called for unrelated child."),new Bs(K(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.source=e,this.path=n,this.type=ut.LISTEN_COMPLETE}operationForChild(e){return B(this.path)?new Zr(this.source,W()):new Zr(this.source,K(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ut.OVERWRITE}operationForChild(e){return B(this.path)?new Hn(this.source,W(),this.snap.getImmediateChild(e)):new Hn(this.source,K(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ut.MERGE}operationForChild(e){if(B(this.path)){const n=this.children.subtree(new q(e));return n.isEmpty()?null:n.value?new Hn(this.source,W(),n.value):new jr(this.source,W(),n)}else return R(V(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jr(this.source,K(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(B(e))return this.isFullyInitialized()&&!this.filtered_;const n=V(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $A(t,e,n,i){const r=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(FA(s.childName,s.snapshotNode))}),or(t,r,"child_removed",e,i,n),or(t,r,"child_added",e,i,n),or(t,r,"child_moved",o,i,n),or(t,r,"child_changed",e,i,n),or(t,r,"value",e,i,n),r}function or(t,e,n,i,r,o){const s=i.filter(l=>l.type===n);s.sort((l,u)=>YA(t,l,u)),s.forEach(l=>{const u=qA(t,l,o);r.forEach(d=>{d.respondsTo(l.type)&&e.push(d.createEvent(u,t.query_))})})}function qA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function YA(t,e,n){if(e.childName==null||n.childName==null)throw Gi("Should only compare child_ events.");const i=new b(e.childName,e.snapshotNode),r=new b(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t,e){return{eventCache:t,serverCache:e}}function Er(t,e,n,i){return Cl(new Gn(e,n,i),t.serverCache)}function Sv(t,e,n,i){return Cl(t.eventCache,new Gn(e,n,i))}function Mu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function zn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa;const KA=()=>(fa||(fa=new Ve(DP)),fa);class X{constructor(e,n=KA()){this.value=e,this.children=n}static fromObject(e){let n=new X(null);return ze(e,(i,r)=>{n=n.set(new q(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:W(),value:this.value};if(B(e))return null;{const i=V(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(K(e),n);return o!=null?{path:fe(new q(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(B(e))return this;{const n=V(e),i=this.children.get(n);return i!==null?i.subtree(K(e)):new X(null)}}set(e,n){if(B(e))return new X(n,this.children);{const i=V(e),o=(this.children.get(i)||new X(null)).set(K(e),n),s=this.children.insert(i,o);return new X(this.value,s)}}remove(e){if(B(e))return this.children.isEmpty()?new X(null):new X(null,this.children);{const n=V(e),i=this.children.get(n);if(i){const r=i.remove(K(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new X(null):new X(this.value,o)}else return this}}get(e){if(B(e))return this.value;{const n=V(e),i=this.children.get(n);return i?i.get(K(e)):null}}setTree(e,n){if(B(e))return n;{const i=V(e),o=(this.children.get(i)||new X(null)).setTree(K(e),n);let s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new X(this.value,s)}}fold(e){return this.fold_(W(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(fe(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,W(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(B(e))return null;{const o=V(e),s=this.children.get(o);return s?s.findOnPath_(K(e),fe(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,W(),n)}foreachOnPath_(e,n,i){if(B(e))return this;{this.value&&i(n,this.value);const r=V(e),o=this.children.get(r);return o?o.foreachOnPath_(K(e),fe(n,r),i):new X(null)}}foreach(e){this.foreach_(W(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(fe(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.writeTree_=e}static empty(){return new ft(new X(null))}}function Tr(t,e,n){if(B(e))return new ft(new X(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const s=Oe(r,e);return o=o.updateChild(s,n),new ft(t.writeTree_.set(r,o))}else{const r=new X(n),o=t.writeTree_.setTree(e,r);return new ft(o)}}}function Tp(t,e,n){let i=t;return ze(n,(r,o)=>{i=Tr(i,fe(e,r),o)}),i}function Sp(t,e){if(B(e))return ft.empty();{const n=t.writeTree_.setTree(e,new X(null));return new ft(n)}}function Du(t,e){return Yn(t,e)!=null}function Yn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Oe(n.path,e)):null}function wp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(se,(i,r)=>{e.push(new b(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new b(i,r.value))}),e}function un(t,e){if(B(e))return t;{const n=Yn(t,e);return n!=null?new ft(new X(n)):new ft(t.writeTree_.subtree(e))}}function Lu(t){return t.writeTree_.isEmpty()}function Fi(t,e){return wv(W(),t.writeTree_,e)}function wv(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(R(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=wv(fe(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(fe(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,e){return Rv(e,t)}function JA(t,e,n,i,r){R(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Tr(t.visibleWrites,e,n)),t.lastWriteId=i}function QA(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function XA(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);R(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){const l=t.allWrites[s];l.visible&&(s>=n&&ZA(l,i.path)?r=!1:at(i.path,l.path)&&(o=!0)),s--}if(r){if(o)return jA(t),!0;if(i.snap)t.visibleWrites=Sp(t.visibleWrites,i.path);else{const l=i.children;ze(l,u=>{t.visibleWrites=Sp(t.visibleWrites,fe(i.path,u))})}return!0}else return!1}function ZA(t,e){if(t.snap)return at(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&at(fe(t.path,n),e))return!0;return!1}function jA(t){t.visibleWrites=xv(t.allWrites,ek,W()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ek(t){return t.visible}function xv(t,e,n){let i=ft.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const s=o.path;let l;if(o.snap)at(n,s)?(l=Oe(n,s),i=Tr(i,l,o.snap)):at(s,n)&&(l=Oe(s,n),i=Tr(i,W(),o.snap.getChild(l)));else if(o.children){if(at(n,s))l=Oe(n,s),i=Tp(i,l,o.children);else if(at(s,n))if(l=Oe(s,n),B(l))i=Tp(i,W(),o.children);else{const u=Mi(o.children,V(l));if(u){const d=u.getChild(K(l));i=Tr(i,W(),d)}}}else throw Gi("WriteRecord should have .snap or .children")}}return i}function Iv(t,e,n,i,r){if(!i&&!r){const o=Yn(t.visibleWrites,e);if(o!=null)return o;{const s=un(t.visibleWrites,e);if(Lu(s))return n;if(n==null&&!Du(s,W()))return null;{const l=n||L.EMPTY_NODE;return Fi(s,l)}}}else{const o=un(t.visibleWrites,e);if(!r&&Lu(o))return n;if(!r&&n==null&&!Du(o,W()))return null;{const s=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(at(d.path,e)||at(e,d.path))},l=xv(t.allWrites,s,e),u=n||L.EMPTY_NODE;return Fi(l,u)}}}function tk(t,e,n){let i=L.EMPTY_NODE;const r=Yn(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(se,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){const o=un(t.visibleWrites,e);return n.forEachChild(se,(s,l)=>{const u=Fi(un(o,new q(s)),l);i=i.updateImmediateChild(s,u)}),wp(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{const o=un(t.visibleWrites,e);return wp(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function nk(t,e,n,i,r){R(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=fe(e,n);if(Du(t.visibleWrites,o))return null;{const s=un(t.visibleWrites,o);return Lu(s)?r.getChild(n):Fi(s,r.getChild(n))}}function ik(t,e,n,i){const r=fe(e,n),o=Yn(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const s=un(t.visibleWrites,r);return Fi(s,i.getNode().getImmediateChild(n))}else return null}function rk(t,e){return Yn(t.visibleWrites,e)}function ok(t,e,n,i,r,o,s){let l;const u=un(t.visibleWrites,e),d=Yn(u,W());if(d!=null)l=d;else if(n!=null)l=Fi(u,n);else return[];if(l=l.withIndex(s),!l.isEmpty()&&!l.isLeafNode()){const f=[],h=s.getCompare(),p=o?l.getReverseIteratorFrom(i,s):l.getIteratorFrom(i,s);let m=p.getNext();for(;m&&f.length<r;)h(m,i)!==0&&f.push(m),m=p.getNext();return f}else return[]}function sk(){return{visibleWrites:ft.empty(),allWrites:[],lastWriteId:-1}}function Hs(t,e,n,i){return Iv(t.writeTree,t.treePath,e,n,i)}function id(t,e){return tk(t.writeTree,t.treePath,e)}function xp(t,e,n,i){return nk(t.writeTree,t.treePath,e,n,i)}function Gs(t,e){return rk(t.writeTree,fe(t.treePath,e))}function lk(t,e,n,i,r,o){return ok(t.writeTree,t.treePath,e,n,i,r,o)}function rd(t,e,n){return ik(t.writeTree,t.treePath,e,n)}function Nv(t,e){return Rv(fe(t.treePath,e),t.writeTree)}function Rv(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;R(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),R(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,Qr(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Jr(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Li(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,Qr(i,e.snapshotNode,r.oldSnap));else throw Gi("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Pv=new uk;class od{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Gn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rd(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zn(this.viewCache_),o=lk(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t){return{filter:t}}function dk(t,e){R(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function fk(t,e,n,i,r){const o=new ak;let s,l;if(n.type===ut.OVERWRITE){const d=n;d.source.fromUser?s=Fu(t,e,d.path,d.snap,i,r,o):(R(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered()&&!B(d.path),s=zs(t,e,d.path,d.snap,i,r,l,o))}else if(n.type===ut.MERGE){const d=n;d.source.fromUser?s=pk(t,e,d.path,d.children,i,r,o):(R(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered(),s=Uu(t,e,d.path,d.children,i,r,l,o))}else if(n.type===ut.ACK_USER_WRITE){const d=n;d.revert?s=yk(t,e,d.path,i,r,o):s=mk(t,e,d.path,d.affectedTree,i,r,o)}else if(n.type===ut.LISTEN_COMPLETE)s=gk(t,e,n.path,i,o);else throw Gi("Unknown operation type: "+n.type);const u=o.getChanges();return hk(e,s,u),{viewCache:s,changes:u}}function hk(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Mu(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(Cv(Mu(e)))}}function Av(t,e,n,i,r,o){const s=e.eventCache;if(Gs(i,n)!=null)return e;{let l,u;if(B(n))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=zn(e),f=d instanceof L?d:L.EMPTY_NODE,h=id(i,f);l=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{const d=Hs(i,zn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const d=V(n);if(d===".priority"){R(fn(n)===1,"Can't have a priority with additional path components");const f=s.getNode();u=e.serverCache.getNode();const h=xp(i,n,f,u);h!=null?l=t.filter.updatePriority(f,h):l=s.getNode()}else{const f=K(n);let h;if(s.isCompleteForChild(d)){u=e.serverCache.getNode();const p=xp(i,n,s.getNode(),u);p!=null?h=s.getNode().getImmediateChild(d).updateChild(f,p):h=s.getNode().getImmediateChild(d)}else h=rd(i,d,e.serverCache);h!=null?l=t.filter.updateChild(s.getNode(),d,h,f,r,o):l=s.getNode()}}return Er(e,l,s.isFullyInitialized()||B(n),t.filter.filtersNodes())}}function zs(t,e,n,i,r,o,s,l){const u=e.serverCache;let d;const f=s?t.filter:t.filter.getIndexedFilter();if(B(n))d=f.updateFullNode(u.getNode(),i,null);else if(f.filtersNodes()&&!u.isFiltered()){const m=u.getNode().updateChild(n,i);d=f.updateFullNode(u.getNode(),m,null)}else{const m=V(n);if(!u.isCompleteForPath(n)&&fn(n)>1)return e;const y=K(n),T=u.getNode().getImmediateChild(m).updateChild(y,i);m===".priority"?d=f.updatePriority(u.getNode(),T):d=f.updateChild(u.getNode(),m,T,y,Pv,null)}const h=Sv(e,d,u.isFullyInitialized()||B(n),f.filtersNodes()),p=new od(r,h,o);return Av(t,h,n,r,p,l)}function Fu(t,e,n,i,r,o,s){const l=e.eventCache;let u,d;const f=new od(r,e,o);if(B(n))d=t.filter.updateFullNode(e.eventCache.getNode(),i,s),u=Er(e,d,!0,t.filter.filtersNodes());else{const h=V(n);if(h===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),i),u=Er(e,d,l.isFullyInitialized(),l.isFiltered());else{const p=K(n),m=l.getNode().getImmediateChild(h);let y;if(B(p))y=i;else{const E=f.getCompleteChild(h);E!=null?dv(p)===".priority"&&E.getChild(hv(p)).isEmpty()?y=E:y=E.updateChild(p,i):y=L.EMPTY_NODE}if(m.equals(y))u=e;else{const E=t.filter.updateChild(l.getNode(),h,y,p,f,s);u=Er(e,E,l.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function Ip(t,e){return t.eventCache.isCompleteForChild(e)}function pk(t,e,n,i,r,o,s){let l=e;return i.foreach((u,d)=>{const f=fe(n,u);Ip(e,V(f))&&(l=Fu(t,l,f,d,r,o,s))}),i.foreach((u,d)=>{const f=fe(n,u);Ip(e,V(f))||(l=Fu(t,l,f,d,r,o,s))}),l}function Np(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Uu(t,e,n,i,r,o,s,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;B(n)?d=i:d=new X(null).setTree(n,i);const f=e.serverCache.getNode();return d.children.inorderTraversal((h,p)=>{if(f.hasChild(h)){const m=e.serverCache.getNode().getImmediateChild(h),y=Np(t,m,p);u=zs(t,u,new q(h),y,r,o,s,l)}}),d.children.inorderTraversal((h,p)=>{const m=!e.serverCache.isCompleteForChild(h)&&p.value===null;if(!f.hasChild(h)&&!m){const y=e.serverCache.getNode().getImmediateChild(h),E=Np(t,y,p);u=zs(t,u,new q(h),E,r,o,s,l)}}),u}function mk(t,e,n,i,r,o,s){if(Gs(r,n)!=null)return e;const l=e.serverCache.isFiltered(),u=e.serverCache;if(i.value!=null){if(B(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return zs(t,e,n,u.getNode().getChild(n),r,o,l,s);if(B(n)){let d=new X(null);return u.getNode().forEachChild(Ei,(f,h)=>{d=d.set(new q(f),h)}),Uu(t,e,n,d,r,o,l,s)}else return e}else{let d=new X(null);return i.foreach((f,h)=>{const p=fe(n,f);u.isCompleteForPath(p)&&(d=d.set(f,u.getNode().getChild(p)))}),Uu(t,e,n,d,r,o,l,s)}}function gk(t,e,n,i,r){const o=e.serverCache,s=Sv(e,o.getNode(),o.isFullyInitialized()||B(n),o.isFiltered());return Av(t,s,n,i,Pv,r)}function yk(t,e,n,i,r,o){let s;if(Gs(i,n)!=null)return e;{const l=new od(i,e,r),u=e.eventCache.getNode();let d;if(B(n)||V(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Hs(i,zn(e));else{const h=e.serverCache.getNode();R(h instanceof L,"serverChildren would be complete if leaf node"),f=id(i,h)}f=f,d=t.filter.updateFullNode(u,f,o)}else{const f=V(n);let h=rd(i,f,e.serverCache);h==null&&e.serverCache.isCompleteForChild(f)&&(h=u.getImmediateChild(f)),h!=null?d=t.filter.updateChild(u,f,h,K(n),l,o):e.eventCache.getNode().hasChild(f)?d=t.filter.updateChild(u,f,L.EMPTY_NODE,K(n),l,o):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Hs(i,zn(e)),s.isLeafNode()&&(d=t.filter.updateFullNode(d,s,o)))}return s=e.serverCache.isFullyInitialized()||Gs(i,W())!=null,Er(e,d,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Zc(i.getIndex()),o=OA(i);this.processor_=ck(o);const s=n.serverCache,l=n.eventCache,u=r.updateFullNode(L.EMPTY_NODE,s.getNode(),null),d=o.updateFullNode(L.EMPTY_NODE,l.getNode(),null),f=new Gn(u,s.isFullyInitialized(),r.filtersNodes()),h=new Gn(d,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=Cl(h,f),this.eventGenerator_=new WA(this.query_)}get query(){return this.query_}}function _k(t){return t.viewCache_.serverCache.getNode()}function Ck(t,e){const n=zn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!B(e)&&!n.getImmediateChild(V(e)).isEmpty())?n.getChild(e):null}function Rp(t){return t.eventRegistrations_.length===0}function Ek(t,e){t.eventRegistrations_.push(e)}function Pp(t,e,n){const i=[];if(n){R(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,r);s&&i.push(s)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))r.push(s);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function Ap(t,e,n,i){e.type===ut.MERGE&&e.source.queryId!==null&&(R(zn(t.viewCache_),"We should always have a full cache before handling merges"),R(Mu(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=fk(t.processor_,r,e,n,i);return dk(t.processor_,o.viewCache),R(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,kv(t,o.changes,o.viewCache.eventCache.getNode(),null)}function Tk(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(se,(o,s)=>{i.push(Li(o,s))}),n.isFullyInitialized()&&i.push(Cv(n.getNode())),kv(t,i,n.getNode(),e)}function kv(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return $A(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws;class Sk{constructor(){this.views=new Map}}function wk(t){R(!Ws,"__referenceConstructor has already been defined"),Ws=t}function xk(){return R(Ws,"Reference.ts has not been loaded"),Ws}function Ik(t){return t.views.size===0}function sd(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return R(o!=null,"SyncTree gave us an op for an invalid query."),Ap(o,e,n,i)}else{let o=[];for(const s of t.views.values())o=o.concat(Ap(s,e,n,i));return o}}function Nk(t,e,n,i,r){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let l=Hs(n,r?i:null),u=!1;l?u=!0:i instanceof L?(l=id(n,i),u=!1):(l=L.EMPTY_NODE,u=!1);const d=Cl(new Gn(l,u,!1),new Gn(i,r,!1));return new vk(e,d)}return s}function Rk(t,e,n,i,r,o){const s=Nk(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),Ek(s,n),Tk(s,n)}function Pk(t,e,n,i){const r=e._queryIdentifier,o=[];let s=[];const l=hn(t);if(r==="default")for(const[u,d]of t.views.entries())s=s.concat(Pp(d,n,i)),Rp(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||o.push(d.query));else{const u=t.views.get(r);u&&(s=s.concat(Pp(u,n,i)),Rp(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||o.push(u.query)))}return l&&!hn(t)&&o.push(new(xk())(e._repo,e._path)),{removed:o,events:s}}function Mv(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ti(t,e){let n=null;for(const i of t.views.values())n=n||Ck(i,e);return n}function Dv(t,e){if(e._queryParams.loadsAllData())return El(t);{const i=e._queryIdentifier;return t.views.get(i)}}function Lv(t,e){return Dv(t,e)!=null}function hn(t){return El(t)!=null}function El(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s;function Ak(t){R(!$s,"__referenceConstructor has already been defined"),$s=t}function kk(){return R($s,"Reference.ts has not been loaded"),$s}let Mk=1;class kp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new X(null),this.pendingWriteTree_=sk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Fv(t,e,n,i,r){return JA(t.pendingWriteTree_,e,n,i,r),r?ho(t,new Hn(Tv(),e,n)):[]}function Mn(t,e,n=!1){const i=QA(t.pendingWriteTree_,e);if(XA(t.pendingWriteTree_,e)){let o=new X(null);return i.snap!=null?o=o.set(W(),!0):ze(i.children,s=>{o=o.set(new q(s),!0)}),ho(t,new Bs(i.path,o,n))}else return[]}function Tl(t,e,n){return ho(t,new Hn(ed(),e,n))}function Dk(t,e,n){const i=X.fromObject(n);return ho(t,new jr(ed(),e,i))}function Lk(t,e){return ho(t,new Zr(ed(),e))}function Fk(t,e,n){const i=ad(t,n);if(i){const r=ud(i),o=r.path,s=r.queryId,l=Oe(o,e),u=new Zr(td(s),l);return cd(t,o,u)}else return[]}function Ou(t,e,n,i,r=!1){const o=e._path,s=t.syncPointTree_.get(o);let l=[];if(s&&(e._queryIdentifier==="default"||Lv(s,e))){const u=Pk(s,e,n,i);Ik(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const d=u.removed;if(l=u.events,!r){const f=d.findIndex(p=>p._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(o,(p,m)=>hn(m));if(f&&!h){const p=t.syncPointTree_.subtree(o);if(!p.isEmpty()){const m=Vk(p);for(let y=0;y<m.length;++y){const E=m[y],T=E.query,v=Vv(t,E);t.listenProvider_.startListening(Sr(T),qs(t,T),v.hashFn,v.onComplete)}}}!h&&d.length>0&&!i&&(f?t.listenProvider_.stopListening(Sr(e),null):d.forEach(p=>{const m=t.queryToTagMap.get(Sl(p));t.listenProvider_.stopListening(Sr(p),m)}))}bk(t,d)}return l}function Uk(t,e,n,i){const r=ad(t,i);if(r!=null){const o=ud(r),s=o.path,l=o.queryId,u=Oe(s,e),d=new Hn(td(l),u,n);return cd(t,s,d)}else return[]}function Ok(t,e,n,i){const r=ad(t,i);if(r){const o=ud(r),s=o.path,l=o.queryId,u=Oe(s,e),d=X.fromObject(n),f=new jr(td(l),u,d);return cd(t,s,f)}else return[]}function Mp(t,e,n,i=!1){const r=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const y=Oe(p,r);o=o||Ti(m,y),s=s||hn(m)});let l=t.syncPointTree_.get(r);l?(s=s||hn(l),o=o||Ti(l,W())):(l=new Sk,t.syncPointTree_=t.syncPointTree_.set(r,l));let u;o!=null?u=!0:(u=!1,o=L.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((m,y)=>{const E=Ti(y,W());E&&(o=o.updateImmediateChild(m,E))}));const d=Lv(l,e);if(!d&&!e._queryParams.loadsAllData()){const p=Sl(e);R(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=Bk();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const f=nd(t.pendingWriteTree_,r);let h=Rk(l,e,n,f,o,u);if(!d&&!s&&!i){const p=Dv(l,e);h=h.concat(Hk(t,e,p))}return h}function ld(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,l)=>{const u=Oe(s,e),d=Ti(l,u);if(d)return d});return Iv(r,e,o,n,!0)}function ho(t,e){return Uv(e,t.syncPointTree_,null,nd(t.pendingWriteTree_,W()))}function Uv(t,e,n,i){if(B(t.path))return Ov(t,e,n,i);{const r=e.get(W());n==null&&r!=null&&(n=Ti(r,W()));let o=[];const s=V(t.path),l=t.operationForChild(s),u=e.children.get(s);if(u&&l){const d=n?n.getImmediateChild(s):null,f=Nv(i,s);o=o.concat(Uv(l,u,d,f))}return r&&(o=o.concat(sd(r,t,i,n))),o}}function Ov(t,e,n,i){const r=e.get(W());n==null&&r!=null&&(n=Ti(r,W()));let o=[];return e.children.inorderTraversal((s,l)=>{const u=n?n.getImmediateChild(s):null,d=Nv(i,s),f=t.operationForChild(s);f&&(o=o.concat(Ov(f,l,u,d)))}),r&&(o=o.concat(sd(r,t,i,n))),o}function Vv(t,e){const n=e.query,i=qs(t,n);return{hashFn:()=>(_k(e)||L.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?Fk(t,n._path,i):Lk(t,n._path);{const o=UP(r,n);return Ou(t,n,null,o)}}}}function qs(t,e){const n=Sl(e);return t.queryToTagMap.get(n)}function Sl(t){return t._path.toString()+"$"+t._queryIdentifier}function ad(t,e){return t.tagToQueryMap.get(e)}function ud(t){const e=t.indexOf("$");return R(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}}function cd(t,e,n){const i=t.syncPointTree_.get(e);R(i,"Missing sync point for query tag that we're tracking");const r=nd(t.pendingWriteTree_,e);return sd(i,n,r,null)}function Vk(t){return t.fold((e,n,i)=>{if(n&&hn(n))return[El(n)];{let r=[];return n&&(r=Mv(n)),ze(i,(o,s)=>{r=r.concat(s)}),r}})}function Sr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(kk())(t._repo,t._path):t}function bk(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Sl(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function Bk(){return Mk++}function Hk(t,e,n){const i=e._path,r=qs(t,e),o=Vv(t,n),s=t.listenProvider_.startListening(Sr(e),r,o.hashFn,o.onComplete),l=t.syncPointTree_.subtree(i);if(r)R(!hn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((d,f,h)=>{if(!B(d)&&f&&hn(f))return[El(f).query];{let p=[];return f&&(p=p.concat(Mv(f).map(m=>m.query))),ze(h,(m,y)=>{p=p.concat(y)}),p}});for(let d=0;d<u.length;++d){const f=u[d];t.listenProvider_.stopListening(Sr(f),qs(t,f))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new dd(n)}node(){return this.node_}}class fd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=fe(this.path_,e);return new fd(this.syncTree_,n)}node(){return ld(this.syncTree_,this.path_)}}const Gk=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Dp=function(t,e,n){if(!t||typeof t!="object")return t;if(R(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return zk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Wk(t[".sv"],e);R(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},zk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:R(!1,"Unexpected server value: "+t)}},Wk=function(t,e,n){t.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&R(!1,"Unexpected increment value: "+i);const r=e.node();if(R(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return typeof s!="number"?i:s+i},$k=function(t,e,n,i){return hd(e,new fd(n,t),i)},bv=function(t,e,n){return hd(t,new dd(e),n)};function hd(t,e,n){const i=t.getPriority().val(),r=Dp(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,l=Dp(s.getValue(),e,n);return l!==s.getValue()||r!==s.getPriority().val()?new me(l,Ee(r)):t}else{const s=t;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new me(r))),s.forEachChild(se,(l,u)=>{const d=hd(u,e.getImmediateChild(l),n);d!==u&&(o=o.updateImmediateChild(l,d))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function md(t,e){let n=e instanceof q?e:new q(e),i=t,r=V(n);for(;r!==null;){const o=Mi(i.node.children,r)||{children:{},childCount:0};i=new pd(r,i,o),n=K(n),r=V(n)}return i}function qi(t){return t.node.value}function Bv(t,e){t.node.value=e,Vu(t)}function Hv(t){return t.node.childCount>0}function qk(t){return qi(t)===void 0&&!Hv(t)}function wl(t,e){ze(t.node.children,(n,i)=>{e(new pd(n,t,i))})}function Gv(t,e,n,i){n&&e(t),wl(t,r=>{Gv(r,e,!0)})}function Yk(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function po(t){return new q(t.parent===null?t.name:po(t.parent)+"/"+t.name)}function Vu(t){t.parent!==null&&Kk(t.parent,t.name,t)}function Kk(t,e,n){const i=qk(n),r=Ot(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Vu(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,Vu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=/[\[\].#$\/\u0000-\u001F\u007F]/,Qk=/[\[\].#$\u0000-\u001F\u007F]/,ha=10*1024*1024,zv=function(t){return typeof t=="string"&&t.length!==0&&!Jk.test(t)},Wv=function(t){return typeof t=="string"&&t.length!==0&&!Qk.test(t)},Xk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Wv(t)},$v=function(t,e,n,i){i&&e===void 0||gd(zc(t,"value"),e,n)},gd=function(t,e,n){const i=n instanceof q?new mA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+In(i));if(typeof e=="function")throw new Error(t+"contains a function "+In(i)+" with contents = "+e.toString());if(Wy(e))throw new Error(t+"contains "+e.toString()+" "+In(i));if(typeof e=="string"&&e.length>ha/3&&vl(e)>ha)throw new Error(t+"contains a string greater than "+ha+" utf8 bytes "+In(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(ze(e,(s,l)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!zv(s)))throw new Error(t+" contains an invalid key ("+s+") "+In(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gA(i,s),gd(t,l,i),yA(i)}),r&&o)throw new Error(t+' contains ".value" child '+In(i)+" in addition to actual children.")}},qv=function(t,e,n,i){if(!Wv(n))throw new Error(zc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Zk=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qv(t,e,n)},Yv=function(t,e){if(V(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},jk=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!zv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Xk(n))throw new Error(zc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yd(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!Jc(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function Kv(t,e,n){yd(t,n),Jv(t,i=>Jc(i,e))}function Dt(t,e,n){yd(t,n),Jv(t,i=>at(i,e)||at(e,i))}function Jv(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(tM(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function tM(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();_r&&Re("event: "+n.toString()),$i(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="repo_interrupt",iM=25;class rM{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bs(),this.transactionQueueTree_=new pd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oM(t,e,n){if(t.stats_=Yc(t.repoInfo_),t.forceRestClient_||BP())t.server_=new Vs(t.repoInfo_,(i,r,o,s)=>{Lp(t,i,r,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Fp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new It(t.repoInfo_,e,(i,r,o,s)=>{Lp(t,i,r,o,s)},i=>{Fp(t,i)},i=>{sM(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=$P(t.repoInfo_,()=>new zA(t.stats_,t.server_)),t.infoData_=new VA,t.infoSyncTree_=new kp({startListening:(i,r,o,s)=>{let l=[];const u=t.infoData_.getNode(i._path);return u.isEmpty()||(l=Tl(t.infoSyncTree_,i._path,u),setTimeout(()=>{s("ok")},0)),l},stopListening:()=>{}}),_d(t,"connected",!1),t.serverSyncTree_=new kp({startListening:(i,r,o,s)=>(t.server_.listen(i,o,r,(l,u)=>{const d=s(l,u);Dt(t.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function Qv(t){const n=t.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function vd(t){return Gk({timestamp:Qv(t)})}function Lp(t,e,n,i,r){t.dataUpdateCount++;const o=new q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(r)if(i){const u=Ms(n,d=>Ee(d));s=Ok(t.serverSyncTree_,o,u,r)}else{const u=Ee(n);s=Uk(t.serverSyncTree_,o,u,r)}else if(i){const u=Ms(n,d=>Ee(d));s=Dk(t.serverSyncTree_,o,u)}else{const u=Ee(n);s=Tl(t.serverSyncTree_,o,u)}let l=o;s.length>0&&(l=xl(t,o)),Dt(t.eventQueue_,l,s)}function Fp(t,e){_d(t,"connected",e),e===!1&&aM(t)}function sM(t,e){ze(e,(n,i)=>{_d(t,n,i)})}function _d(t,e,n){const i=new q("/.info/"+e),r=Ee(n);t.infoData_.updateSnapshot(i,r);const o=Tl(t.infoSyncTree_,i,r);Dt(t.eventQueue_,i,o)}function Xv(t){return t.nextWriteId_++}function lM(t,e,n,i,r){Cd(t,"set",{path:e.toString(),value:n,priority:i});const o=vd(t),s=Ee(n,i),l=ld(t.serverSyncTree_,e),u=bv(s,l,o),d=Xv(t),f=Fv(t.serverSyncTree_,e,u,d,!0);yd(t.eventQueue_,f),t.server_.put(e.toString(),s.val(!0),(p,m)=>{const y=p==="ok";y||Ge("set at "+e+" failed: "+p);const E=Mn(t.serverSyncTree_,d,!y);Dt(t.eventQueue_,e,E),dM(t,r,p,m)});const h=n_(t,e);xl(t,h),Dt(t.eventQueue_,h,[])}function aM(t){Cd(t,"onDisconnectEvents");const e=vd(t),n=bs();ku(t.onDisconnect_,W(),(r,o)=>{const s=$k(r,o,t.serverSyncTree_,e);Ev(n,r,s)});let i=[];ku(n,W(),(r,o)=>{i=i.concat(Tl(t.serverSyncTree_,r,o));const s=n_(t,r);xl(t,s)}),t.onDisconnect_=bs(),Dt(t.eventQueue_,W(),i)}function uM(t,e,n){let i;V(e._path)===".info"?i=Mp(t.infoSyncTree_,e,n):i=Mp(t.serverSyncTree_,e,n),Kv(t.eventQueue_,e._path,i)}function Up(t,e,n){let i;V(e._path)===".info"?i=Ou(t.infoSyncTree_,e,n):i=Ou(t.serverSyncTree_,e,n),Kv(t.eventQueue_,e._path,i)}function cM(t){t.persistentConnection_&&t.persistentConnection_.interrupt(nM)}function Cd(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Re(n,...e)}function dM(t,e,n,i){e&&$i(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const s=new Error(o);s.code=r,e(s)}})}function Zv(t,e,n){return ld(t.serverSyncTree_,e,n)||L.EMPTY_NODE}function Ed(t,e=t.transactionQueueTree_){if(e||Il(t,e),qi(e)){const n=e_(t,e);R(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&fM(t,po(e),n)}else Hv(e)&&wl(e,n=>{Ed(t,n)})}function fM(t,e,n){const i=n.map(d=>d.currentWriteId),r=Zv(t,e,i);let o=r;const s=r.hash();for(let d=0;d<n.length;d++){const f=n[d];R(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const h=Oe(e,f.path);o=o.updateChild(h,f.currentOutputSnapshotRaw)}const l=o.val(!0),u=e;t.server_.put(u.toString(),l,d=>{Cd(t,"transaction put response",{path:u.toString(),status:d});let f=[];if(d==="ok"){const h=[];for(let p=0;p<n.length;p++)n[p].status=2,f=f.concat(Mn(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&h.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Il(t,md(t.transactionQueueTree_,e)),Ed(t,t.transactionQueueTree_),Dt(t.eventQueue_,e,f);for(let p=0;p<h.length;p++)$i(h[p])}else{if(d==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Ge("transaction at "+u.toString()+" failed: "+d);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=d}xl(t,e)}},s)}function xl(t,e){const n=jv(t,e),i=po(n),r=e_(t,n);return hM(t,r,i),i}function hM(t,e,n){if(e.length===0)return;const i=[];let r=[];const s=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const u=e[l],d=Oe(n,u.path);let f=!1,h;if(R(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,h=u.abortReason,r=r.concat(Mn(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=iM)f=!0,h="maxretry",r=r.concat(Mn(t.serverSyncTree_,u.currentWriteId,!0));else{const p=Zv(t,u.path,s);u.currentInputSnapshot=p;const m=e[l].update(p.val());if(m!==void 0){gd("transaction failed: Data returned ",m,u.path);let y=Ee(m);typeof m=="object"&&m!=null&&Ot(m,".priority")||(y=y.updatePriority(p.getPriority()));const T=u.currentWriteId,v=vd(t),g=bv(y,p,v);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=g,u.currentWriteId=Xv(t),s.splice(s.indexOf(T),1),r=r.concat(Fv(t.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally)),r=r.concat(Mn(t.serverSyncTree_,T,!0))}else f=!0,h="nodata",r=r.concat(Mn(t.serverSyncTree_,u.currentWriteId,!0))}Dt(t.eventQueue_,n,r),r=[],f&&(e[l].status=2,function(p){setTimeout(p,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(h),!1,null))))}Il(t,t.transactionQueueTree_);for(let l=0;l<i.length;l++)$i(i[l]);Ed(t,t.transactionQueueTree_)}function jv(t,e){let n,i=t.transactionQueueTree_;for(n=V(e);n!==null&&qi(i)===void 0;)i=md(i,n),e=K(e),n=V(e);return i}function e_(t,e){const n=[];return t_(t,e,n),n.sort((i,r)=>i.order-r.order),n}function t_(t,e,n){const i=qi(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);wl(e,r=>{t_(t,r,n)})}function Il(t,e){const n=qi(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Bv(e,n.length>0?n:void 0)}wl(e,i=>{Il(t,i)})}function n_(t,e){const n=po(jv(t,e)),i=md(t.transactionQueueTree_,e);return Yk(i,r=>{pa(t,r)}),pa(t,i),Gv(i,r=>{pa(t,r)}),n}function pa(t,e){const n=qi(e);if(n){const i=[];let r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(R(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(R(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(Mn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Bv(e,void 0):n.length=o+1,Dt(t.eventQueue_,po(e),r);for(let s=0;s<i.length;s++)$i(i[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function mM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ge(`Invalid query segment '${n}' in query '${t}'`)}return e}const Op=function(t,e){const n=gM(t),i=n.namespace;n.domain==="firebase.com"&&Mt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Mt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||kP();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new nv(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new q(n.pathString)}},gM=function(t){let e="",n="",i="",r="",o="",s=!0,l="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(l=t.substring(0,d-1),t=t.substring(d+2));let f=t.indexOf("/");f===-1&&(f=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(f,h)),f<h&&(r=pM(t.substring(f,h)));const p=mM(t.substring(Math.min(t.length,h)));d=e.indexOf(":"),d>=0?(s=l==="https"||l==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const m=e.slice(0,d);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const y=e.indexOf(".");i=e.substring(0,y).toLowerCase(),n=e.substring(y+1),o=i}"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:i,secure:s,scheme:l,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yM=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let r;const o=new Array(8);for(r=7;r>=0;r--)o[r]=Vp.charAt(n%64),n=Math.floor(n/64);R(n===0,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)s+=Vp.charAt(e[r]);return R(s.length===20,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}}class _M{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return B(this._path)?null:dv(this._path)}get ref(){return new Cn(this._repo,this._path)}get _queryIdentifier(){const e=Cp(this._queryParams),n=$c(e);return n==="{}"?"default":n}get _queryObject(){return Cp(this._queryParams)}isEqual(e){if(e=zi(e),!(e instanceof Td))return!1;const n=this._repo===e._repo,i=Jc(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+pA(this._path)}}class Cn extends Td{constructor(e,n){super(e,n,new jc,!1)}get parent(){const e=hv(this._path);return e===null?null:new Cn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ys{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new q(e),i=eo(this.ref,e);return new Ys(this._node.getChild(n),i,se)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Ys(r,eo(this.ref,i),se)))}hasChild(e){const n=new q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wr(t,e){return t=zi(t),t._checkNotDeleted("ref"),e!==void 0?eo(t._root,e):t._root}function eo(t,e){return t=zi(t),V(t._path)===null?Zk("child","path",e):qv("child","path",e),new Cn(t._repo,fe(t._path,e))}function i_(t,e){t=zi(t),Yv("push",t._path),$v("push",e,t._path,!0);const n=Qv(t._repo),i=yM(n),r=eo(t,i),o=eo(t,i);let s;return s=Promise.resolve(o),r.then=s.then.bind(s),r.catch=s.then.bind(s,void 0),r}function bu(t,e){t=zi(t),Yv("set",t._path),$v("set",e,t._path,!1);const n=new yl;return lM(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Sd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new vM("value",this,new Ys(e.snapshotNode,new Cn(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new _M(this,e,n):null}matches(e){return e instanceof Sd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function EM(t,e,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){const u=n,d=(f,h)=>{Up(t._repo,t,l),u(f,h)};d.userCallback=n.userCallback,d.context=n.context,n=d}const s=new CM(n,o||void 0),l=new Sd(s);return uM(t._repo,t,l),()=>Up(t._repo,t,l)}function Bu(t,e,n,i){return EM(t,"value",e,n,i)}wk(Cn);Ak(Cn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="FIREBASE_DATABASE_EMULATOR_HOST",Hu={};let SM=!1;function wM(t,e,n,i){t.repoInfo_=new nv(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function xM(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||Mt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Re("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=Op(o,r),l=s.repoInfo,u;typeof process<"u"&&np&&(u=np[TM]),u?(o=`http://${u}?ns=${l.namespace}`,s=Op(o,r),l=s.repoInfo):s.repoInfo.secure;const d=new GP(t.name,t.options,e);jk("Invalid Firebase Database URL",s),B(s.path)||Mt("Database URL must point to the root of a Firebase Database (not including a child path).");const f=NM(l,t,d,new HP(t.name,n));return new RM(f,t)}function IM(t,e){const n=Hu[e];(!n||n[t.key]!==t)&&Mt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),cM(t),delete n[t.key]}function NM(t,e,n,i){let r=Hu[e.name];r||(r={},Hu[e.name]=r);let o=r[t.toURLString()];return o&&Mt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new rM(t,SM,n,i),r[t.toURLString()]=o,o}class RM{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cn(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Mt("Cannot call "+e+" on a deleted database.")}}function PM(t=hP(),e){const n=uP(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=ZN("database");i&&AM(n,...i)}return n}function AM(t,e,n,i={}){t=zi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Mt("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Mt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ts(ts.OWNER);else if(i.mockUserToken){const s=typeof i.mockUserToken=="string"?i.mockUserToken:jN(i.mockUserToken,t.app.options.projectId);o=new ts(s)}wM(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t){xP(fP),Ls(new qr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return xM(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),_i(ip,rp,t),_i(ip,rp,"esm2017")}It.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};It.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};kM();const r_={apiKey:"AIzaSyCa3i-X1qYRcCMN5Hfn-XW-75YsEkdJ_xw",authDomain:"student-ad4c5.firebaseapp.com",databaseURL:"https://student-ad4c5-default-rtdb.firebaseio.com",projectId:"student-ad4c5",storageBucket:"student-ad4c5.appspot.com",messagingSenderId:"882579023460",appId:"1:882579023460:web:84e439cdd34e7159f7a171",measurementId:"G-XEYZK3XMHJ"},MM=Vy(r_),xr=PM(MM,r_.databaseURL),DM=t=>{const e=w.useRef(null),n=w.useRef(null),i=w.useRef(!1),r=w.useRef([]),[o,s]=w.useState("#000000"),[l,u]=w.useState(5),d=w.useCallback(()=>(!n.current&&e.current&&(n.current=e.current.getContext("2d"),n.current&&(n.current.lineCap="round",n.current.lineJoin="round")),n.current),[]),f=w.useCallback(T=>{const v=d();if(!(!v||T.points.length<2)){v.strokeStyle=T.color,v.lineWidth=T.brushSize,v.beginPath(),v.moveTo(T.points[0].x,T.points[0].y);for(let g=1;g<T.points.length;g++)v.lineTo(T.points[g].x,T.points[g].y);v.stroke()}},[d]),h=w.useCallback(T=>{const v=e.current,g=d();!v||!g||(g.clearRect(0,0,v.width,v.height),T&&Object.values(T).forEach(f))},[d,f]);w.useEffect(()=>{const T=e.current,v=T==null?void 0:T.parentElement;if(!T||!v)return;const g=wr(xr,`whiteboards/${t}`);let _=!1;const S=new ResizeObserver(P=>{const x=P[0],{width:A,height:z}=x.contentRect;T.width=A,T.height=z,_&&Bu(g,D=>{h(D.val())},{onlyOnce:!0})});S.observe(v);const I=Bu(g,P=>{const x=P.val();h(x),_||(_=!0)});return()=>{I(),S.disconnect()}},[t,h]);const p=w.useCallback(({nativeEvent:T})=>{const{offsetX:v,offsetY:g}=T;i.current=!0,r.current=[{x:v,y:g}]},[]),m=w.useCallback(()=>{if(!i.current||r.current.length<2){i.current=!1,r.current=[];return}i.current=!1;const T={points:r.current,color:o,brushSize:l},v=wr(xr,`whiteboards/${t}`),g=i_(v);bu(g,T),r.current=[]},[l,o,t]),y=w.useCallback(({nativeEvent:T})=>{if(!i.current)return;const{offsetX:v,offsetY:g}=T,_=d();if(!_)return;_.strokeStyle=o,_.lineWidth=l,_.beginPath();const S=r.current[r.current.length-1];_.moveTo(S.x,S.y),_.lineTo(v,g),_.stroke(),r.current.push({x:v,y:g})},[l,o,d]),E=w.useCallback(()=>{const T=wr(xr,`whiteboards/${t}`);bu(T,null)},[t]);return{canvasRef:e,startDrawing:p,finishDrawing:m,draw:y,clearCanvas:E,color:o,setColor:s,brushSize:l,setBrushSize:u}},LM=({groupId:t})=>{const{canvasRef:e,startDrawing:n,finishDrawing:i,draw:r,clearCanvas:o,color:s,setColor:l,brushSize:u,setBrushSize:d}=DM(t),f=["#000000","#EF4444","#3B82F6","#22C55E","#F97316","#8B5CF6"];return C.jsxs("div",{className:"flex flex-col h-full w-full",children:[C.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-2 border-b bg-gray-50 rounded-t-lg",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("label",{className:"text-sm font-medium",children:"Color:"}),C.jsx("div",{className:"flex gap-1",children:f.map(h=>C.jsx("button",{onClick:()=>l(h),className:`w-6 h-6 rounded-full transition-transform hover:scale-110 border-2 ${s===h?"ring-2 ring-offset-1 ring-primary border-transparent":"border-gray-300"}`,style:{backgroundColor:h},"aria-label":`Set color to ${h}`},h))})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("label",{htmlFor:"brushSize",className:"text-sm font-medium",children:"Size:"}),C.jsx("input",{id:"brushSize",type:"range",min:"1",max:"50",value:u,onChange:h=>d(Number(h.target.value)),className:"w-32 cursor-pointer"}),C.jsx("span",{className:"text-sm w-6 text-center",children:u})]}),C.jsx("button",{onClick:o,className:"ml-auto bg-gray-200 text-gray-800 px-4 py-1.5 rounded-md hover:bg-gray-300 text-sm font-medium",children:"Clear All"})]}),C.jsx("div",{className:"flex-grow w-full h-full relative bg-white border rounded-b-lg overflow-hidden",children:C.jsx("canvas",{ref:e,onMouseDown:n,onMouseUp:i,onMouseLeave:i,onMouseMove:r,className:"w-full h-full"})})]})},FM=t=>{const[e,n]=w.useState([]),{user:i}=_t();w.useEffect(()=>{if(!t)return;const o=wr(xr,`chats/${t}`),s=Bu(o,l=>{const u=l.val();if(u){const d=Object.keys(u).map(f=>({id:f,...u[f]}));d.sort((f,h)=>new Date(f.timestamp).getTime()-new Date(h.timestamp).getTime()),n(d)}else n([])});return()=>s()},[t]);const r=w.useCallback(o=>{if(!i||!o.trim())return;const s=wr(xr,`chats/${t}`),l=i_(s),u={senderId:i.id,senderUsername:i.username,groupId:t,text:o,timestamp:new Date().toISOString()};bu(l,u)},[t,i]);return{messages:e,sendMessage:r}},UM=()=>{var P;const{id:t}=aT(),{user:e}=_t(),n=parseInt(t||"0",10),{messages:i,sendMessage:r}=FM(n),o=ay.find(x=>x.id===n),s=sn.find(x=>x.id===(o==null?void 0:o.subjectId)),l=vi.filter(x=>o==null?void 0:o.members.includes(x.id)),[u,d]=w.useState(""),[f,h]=w.useState(((P=VT.find(x=>x.groupId===n))==null?void 0:P.content)||""),[p,m]=w.useState(""),[y,E]=w.useState(!1),[T,v]=w.useState("scratchpad"),g=w.useRef(null);if(w.useEffect(()=>{var x;(x=g.current)==null||x.scrollIntoView({behavior:"smooth"})},[i]),!o||!s)return C.jsx("div",{className:"text-center text-red-500",children:"Group not found."});const _=x=>{x.preventDefault(),u.trim()&&e&&(r(u),d(""))},S=async x=>{E(!0),m("");try{let A="";x==="plan"?A=await VN(s,l):A=await bN(f),m(A)}catch{m("An error occurred while communicating with the AI.")}finally{E(!1)}},I=({tab:x,label:A})=>C.jsx("button",{onClick:()=>v(x),className:`px-4 py-2 text-sm font-medium rounded-t-md ${T===x?"bg-surface text-primary border-b-2 border-primary":"text-gray-500 hover:bg-gray-100"}`,children:A});return C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-120px)]",children:[C.jsxs("div",{className:"lg:col-span-2 bg-surface rounded-lg shadow-md flex flex-col",children:[C.jsxs("div",{className:"px-4 border-b",children:[C.jsx("h2",{className:"text-xl font-bold text-gray-800 pt-4",children:o.name}),C.jsx("h3",{className:"text-md font-semibold text-primary mb-2",children:s.name}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(I,{tab:"scratchpad",label:"Shared Scratchpad"}),C.jsx(I,{tab:"whiteboard",label:"Collaborative Whiteboard"})]})]}),C.jsxs("div",{className:"flex-grow p-4 h-0",children:[T==="scratchpad"&&C.jsxs("div",{className:"flex flex-col h-full",children:[C.jsx("textarea",{className:"flex-grow w-full p-3 border rounded-md resize-none font-mono text-sm",value:f,onChange:x=>h(x.target.value),placeholder:"Type your collaborative notes here..."}),C.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[C.jsx("button",{onClick:()=>S("plan"),disabled:y,className:"bg-secondary text-on-secondary px-4 py-2 rounded-md hover:bg-secondary/90 disabled:opacity-50 font-medium",children:"✨ Suggest Study Plan"}),C.jsx("button",{onClick:()=>S("summarize"),disabled:y||!f,className:"bg-primary text-on-primary px-4 py-2 rounded-md hover:bg-primary/90 disabled:opacity-50 font-medium",children:"📝 Summarize Notes"})]}),(y||p)&&C.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border max-h-48 overflow-y-auto",children:[C.jsx("h4",{className:"font-bold text-gray-700",children:"AI Assistant"}),y?C.jsx("p",{className:"text-gray-500 animate-pulse",children:"Thinking..."}):C.jsx("div",{className:"prose prose-sm max-w-none whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:p.replace(/\n/g,"<br />").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})]})]}),T==="whiteboard"&&C.jsx(LM,{groupId:n})]})]}),C.jsxs("div",{className:"bg-surface rounded-lg shadow-md flex flex-col p-4 h-full",children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("h3",{className:"font-bold text-lg",children:"Group Members"}),C.jsx("ul",{className:"flex flex-wrap gap-2 mt-2",children:l.map(x=>C.jsx("li",{className:"text-sm bg-gray-200 px-2 py-1 rounded",children:x.username},x.id))})]}),C.jsxs("div",{className:"flex-grow flex flex-col border-t pt-4 h-0",children:[C.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[i.map(x=>C.jsxs("div",{className:`flex items-end gap-2 ${x.senderId===(e==null?void 0:e.id)?"justify-end":""}`,children:[x.senderId!==(e==null?void 0:e.id)&&C.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs font-bold shrink-0",children:x.senderUsername.charAt(0)}),C.jsx("div",{className:`px-4 py-2 rounded-lg max-w-xs ${x.senderId===(e==null?void 0:e.id)?"bg-primary text-on-primary":"bg-gray-200 text-gray-800"}`,children:C.jsx("p",{className:"text-sm",children:x.text})})]},x.id)),C.jsx("div",{ref:g})]}),C.jsxs("form",{onSubmit:_,className:"mt-4 flex gap-2",children:[C.jsx("input",{type:"text",value:u,onChange:x=>d(x.target.value),placeholder:"Type a message...",className:"flex-grow rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm"}),C.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 font-medium",children:"Send"})]})]})]})]})},OM=()=>{const[t,e]=w.useState(""),[n,i]=w.useState(""),{login:r,loading:o}=_t(),s=so(),l=async u=>{u.preventDefault(),i("");try{await r(t),s("/")}catch(d){i(d.message||"Failed to log in")}};return C.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:C.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-surface rounded-xl shadow-lg",children:[C.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"Login to StudySync"}),C.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Use ",C.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:"alice@example.com"})," or ",C.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:"bob@example.com"})," to log in."]}),n&&C.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:n}),C.jsxs("form",{onSubmit:l,className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),C.jsx("input",{id:"email",type:"email",value:t,onChange:u=>e(u.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"})]}),C.jsx("div",{children:C.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:o?"Logging in...":"Log In"})})]}),C.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Don't have an account?"," ",C.jsx(yi,{to:"/register",className:"font-medium text-primary hover:underline",children:"Register"})]})]})})},VM=()=>{const[t,e]=w.useState(""),[n,i]=w.useState(""),[r,o]=w.useState(""),{register:s,loading:l}=_t(),u=so(),d=async f=>{f.preventDefault(),o("");try{await s(t,n),u("/")}catch(h){o(h.message||"Failed to register")}};return C.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:C.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-surface rounded-xl shadow-lg",children:[C.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"Create an Account"}),r&&C.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:r}),C.jsxs("form",{onSubmit:d,className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),C.jsx("input",{id:"username",type:"text",value:t,onChange:f=>e(f.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),C.jsx("input",{id:"email",type:"email",value:n,onChange:f=>i(f.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"})]}),C.jsx("div",{children:C.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:l?"Creating account...":"Register"})})]}),C.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Already have an account?"," ",C.jsx(yi,{to:"/login",className:"font-medium text-primary hover:underline",children:"Log In"})]})]})})},bM=()=>{const{user:t,logout:e}=_t(),n=so(),i=()=>{e(),n("/login")},r={color:"#4f46e5",fontWeight:"600"};return C.jsx("header",{className:"bg-surface shadow-md sticky top-0 z-50",children:C.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-3 flex justify-between items-center",children:[C.jsx(Jn,{to:"/",className:"text-2xl font-bold text-primary",children:"StudySync"}),C.jsx("nav",{className:"flex items-center space-x-4 md:space-x-6",children:t?C.jsxs(C.Fragment,{children:[C.jsx(Jn,{to:"/",className:"text-gray-600 hover:text-primary transition-colors",style:({isActive:o})=>o?r:{},children:"Dashboard"}),C.jsx(Jn,{to:"/find",className:"text-gray-600 hover:text-primary transition-colors",style:({isActive:o})=>o?r:{},children:"Find Partners"}),C.jsx(Jn,{to:"/profile",className:"text-gray-600 hover:text-primary transition-colors",style:({isActive:o})=>o?r:{},children:"Profile"}),C.jsx("button",{onClick:i,className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 transition-colors text-sm font-medium",children:"Logout"})]}):C.jsxs(C.Fragment,{children:[C.jsx(Jn,{to:"/login",className:"text-gray-600 hover:text-primary transition-colors",children:"Login"}),C.jsx(Jn,{to:"/register",className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 transition-colors text-sm font-medium",children:"Register"})]})})]})})},bo=({children:t})=>{const{user:e,loading:n}=_t();return n?C.jsx("div",{className:"flex justify-center items-center h-screen",children:C.jsx("div",{children:"Loading..."})}):e?C.jsx(C.Fragment,{children:t}):C.jsx(Zo,{to:"/login"})},BM=()=>C.jsx(bT,{children:C.jsx(MT,{children:C.jsxs("div",{className:"min-h-screen flex flex-col",children:[C.jsx(bM,{}),C.jsx("main",{className:"flex-grow container mx-auto p-4 md:p-6",children:C.jsx(HM,{})})]})})}),HM=()=>{const{user:t}=_t();return C.jsxs(wT,{children:[C.jsx(Ht,{path:"/login",element:t?C.jsx(Zo,{to:"/"}):C.jsx(OM,{})}),C.jsx(Ht,{path:"/register",element:t?C.jsx(Zo,{to:"/"}):C.jsx(VM,{})}),C.jsx(Ht,{path:"/",element:C.jsx(bo,{children:C.jsx(HT,{})})}),C.jsx(Ht,{path:"/profile",element:C.jsx(bo,{children:C.jsx(BN,{})})}),C.jsx(Ht,{path:"/find",element:C.jsx(bo,{children:C.jsx(GN,{})})}),C.jsx(Ht,{path:"/group/:id",element:C.jsx(bo,{children:C.jsx(UM,{})})}),C.jsx(Ht,{path:"*",element:C.jsx(Zo,{to:"/"})})]})},o_=document.getElementById("root");if(!o_)throw new Error("Could not find root element to mount to");const GM=ma.createRoot(o_);GM.render(C.jsx(Jp.StrictMode,{children:C.jsx(BM,{})}));
